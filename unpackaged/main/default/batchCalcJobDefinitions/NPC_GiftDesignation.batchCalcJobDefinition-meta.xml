<?xml version="1.0" encoding="UTF-8"?>
<BatchCalcJobDefinition xmlns="http://soap.sforce.com/2006/04/metadata">
    <aggregates>
        <fields>
            <aggregateFunction>Avg</aggregateFunction>
            <alias>Average_Transaction_Amount</alias>
            <sourceFieldName>Amount</sourceFieldName>
        </fields>
        <fields>
            <aggregateFunction>Min</aggregateFunction>
            <alias>First_Paid_Transaction_Date</alias>
            <sourceFieldName>TransactionDate</sourceFieldName>
        </fields>
        <fields>
            <aggregateFunction>Max</aggregateFunction>
            <alias>Highest_Transaction_Amount</alias>
            <sourceFieldName>Amount</sourceFieldName>
        </fields>
        <fields>
            <aggregateFunction>Max</aggregateFunction>
            <alias>Last_Paid_Transaction_Date</alias>
            <sourceFieldName>TransactionDate</sourceFieldName>
        </fields>
        <fields>
            <aggregateFunction>Min</aggregateFunction>
            <alias>Lowest_Transaction_Amount</alias>
            <sourceFieldName>Amount</sourceFieldName>
        </fields>
        <fields>
            <aggregateFunction>Count</aggregateFunction>
            <alias>Total_Transaction_Count</alias>
            <sourceFieldName>GiftTransactionId</sourceFieldName>
        </fields>
        <fields>
            <aggregateFunction>Sum</aggregateFunction>
            <alias>Transaction_Total_Amount</alias>
            <sourceFieldName>Amount</sourceFieldName>
        </fields>
        <groupBy>GiftDesignationId</groupBy>
        <label>Group By Designation</label>
        <name>Group_By_Designation</name>
        <sourceName>Filter_on_isPaid</sourceName>
    </aggregates>
    <aggregates>
        <fields>
            <aggregateFunction>Sum</aggregateFunction>
            <alias>Current_Year_Transaction_Amount</alias>
            <sourceFieldName>Amount</sourceFieldName>
        </fields>
        <fields>
            <aggregateFunction>Count</aggregateFunction>
            <alias>Current_Year_Transaction_Count</alias>
            <sourceFieldName>GiftTransactionId</sourceFieldName>
        </fields>
        <groupBy>GiftDesignationId</groupBy>
        <label>Group By Designation Current Year</label>
        <name>Group_By_Designation_Current_Year</name>
        <sourceName>Filter_on_Current_Year</sourceName>
    </aggregates>
    <aggregates>
        <fields>
            <aggregateFunction>Sum</aggregateFunction>
            <alias>Last_Two_Year_Transaction_Amount</alias>
            <sourceFieldName>Amount</sourceFieldName>
        </fields>
        <fields>
            <aggregateFunction>Count</aggregateFunction>
            <alias>Last_Two_Year_Transaction_Count</alias>
            <sourceFieldName>GiftTransactionId</sourceFieldName>
        </fields>
        <groupBy>GiftDesignationId</groupBy>
        <label>Group By Designation Last Two Year</label>
        <name>Group_By_Designation_Last_Two_Year</name>
        <sourceName>Filter_on_Last_Two_Year</sourceName>
    </aggregates>
    <aggregates>
        <fields>
            <aggregateFunction>Sum</aggregateFunction>
            <alias>Last_Year_Transaction_Amount</alias>
            <sourceFieldName>Amount</sourceFieldName>
        </fields>
        <fields>
            <aggregateFunction>Count</aggregateFunction>
            <alias>Last_Year_Transaction_Count</alias>
            <sourceFieldName>GiftTransactionId</sourceFieldName>
        </fields>
        <groupBy>GiftDesignationId</groupBy>
        <label>Group By Designation Last Year</label>
        <name>Group_By_Designation_Last_Year</name>
        <sourceName>Filter_on_Last_Year</sourceName>
    </aggregates>
    <datasources>
        <fields>
            <alias>Id</alias>
            <dataType>Text</dataType>
            <name>Id</name>
        </fields>
        <fields>
            <alias>IsPaid</alias>
            <dataType>Text</dataType>
            <name>IsPaid</name>
        </fields>
        <fields>
            <alias>TransactionDate</alias>
            <dataType>Date</dataType>
            <name>TransactionDate</name>
        </fields>
        <label>Gift Transaction</label>
        <name>Gift_Transaction</name>
        <sourceName>GiftTransaction</sourceName>
        <type>StandardObject</type>
    </datasources>
    <datasources>
        <fields>
            <alias>Amount</alias>
            <dataType>Numeric</dataType>
            <name>Amount</name>
        </fields>
        <fields>
            <alias>GiftDesignationId</alias>
            <dataType>Text</dataType>
            <name>GiftDesignationId</name>
        </fields>
        <fields>
            <alias>GiftTransactionId</alias>
            <dataType>Text</dataType>
            <name>GiftTransactionId</name>
        </fields>
        <fields>
            <alias>Id</alias>
            <dataType>Text</dataType>
            <name>Id</name>
        </fields>
        <label>Gift Transaction Designation</label>
        <name>Gift_Transaction_Designation</name>
        <sourceName>GiftTransactionDesignation</sourceName>
        <type>StandardObject</type>
    </datasources>
    <description>Gift Designation Rollup</description>
    <executionPlatformType>CRMA</executionPlatformType>
    <filters>
        <criteria>
            <inputVariable>CURRENT_CALENDAR_YEAR</inputVariable>
            <operator>GreaterThanOrEquals</operator>
            <sequence>1</sequence>
            <sourceFieldName>TransactionDate</sourceFieldName>
        </criteria>
        <filterCondition>1</filterCondition>
        <isDynamicFilter>false</isDynamicFilter>
        <label>Filter on Current Year</label>
        <name>Filter_on_Current_Year</name>
        <sourceName>Filter_on_isPaid</sourceName>
    </filters>
    <filters>
        <criteria>
            <operator>Equals</operator>
            <sequence>1</sequence>
            <sourceFieldName>IsPaid</sourceFieldName>
            <value>true</value>
        </criteria>
        <filterCondition>1</filterCondition>
        <isDynamicFilter>false</isDynamicFilter>
        <label>Filter on isPaid</label>
        <name>Filter_on_isPaid</name>
        <sourceName>Join_Gift_Transaction_Designation_and_Gift_Transaction</sourceName>
    </filters>
    <filters>
        <criteria>
            <inputVariable>LAST_CALENDAR_YEAR</inputVariable>
            <operator>GreaterThanOrEquals</operator>
            <sequence>1</sequence>
            <sourceFieldName>TransactionDate</sourceFieldName>
        </criteria>
        <filterCondition>1</filterCondition>
        <isDynamicFilter>false</isDynamicFilter>
        <label>Filter on Last Two Year</label>
        <name>Filter_on_Last_Two_Year</name>
        <sourceName>Filter_on_isPaid</sourceName>
    </filters>
    <filters>
        <criteria>
            <inputVariable>LAST_CALENDAR_YEAR</inputVariable>
            <operator>GreaterThanOrEquals</operator>
            <sequence>1</sequence>
            <sourceFieldName>TransactionDate</sourceFieldName>
        </criteria>
        <criteria>
            <inputVariable>CURRENT_CALENDAR_YEAR</inputVariable>
            <operator>LessThan</operator>
            <sequence>2</sequence>
            <sourceFieldName>TransactionDate</sourceFieldName>
        </criteria>
        <filterCondition>1 AND 2</filterCondition>
        <isDynamicFilter>false</isDynamicFilter>
        <label>Filter on Last Year</label>
        <name>Filter_on_Last_Year</name>
        <sourceName>Filter_on_isPaid</sourceName>
    </filters>
    <isTemplate>false</isTemplate>
    <joins>
        <fields>
            <alias>Amount</alias>
            <sourceFieldName>Amount</sourceFieldName>
            <sourceName>Gift_Transaction_Designation</sourceName>
        </fields>
        <fields>
            <alias>GiftDesignationId</alias>
            <sourceFieldName>GiftDesignationId</sourceFieldName>
            <sourceName>Gift_Transaction_Designation</sourceName>
        </fields>
        <fields>
            <alias>GiftTransactionId</alias>
            <sourceFieldName>GiftTransactionId</sourceFieldName>
            <sourceName>Gift_Transaction_Designation</sourceName>
        </fields>
        <fields>
            <alias>Id</alias>
            <sourceFieldName>Id</sourceFieldName>
            <sourceName>Gift_Transaction_Designation</sourceName>
        </fields>
        <fields>
            <alias>IsPaid</alias>
            <sourceFieldName>IsPaid</sourceFieldName>
            <sourceName>Gift_Transaction</sourceName>
        </fields>
        <fields>
            <alias>TransactionDate</alias>
            <sourceFieldName>TransactionDate</sourceFieldName>
            <sourceName>Gift_Transaction</sourceName>
        </fields>
        <joinKeys>
            <primarySourceFieldName>GiftTransactionId</primarySourceFieldName>
            <secondarySourceFieldName>Id</secondarySourceFieldName>
        </joinKeys>
        <label>Join Gift Transaction Designation and Gift Transaction</label>
        <name>Join_Gift_Transaction_Designation_and_Gift_Transaction</name>
        <primarySourceName>Gift_Transaction_Designation</primarySourceName>
        <secondarySourceName>Gift_Transaction</secondarySourceName>
        <type>LeftOuter</type>
    </joins>
    <joins>
        <fields>
            <alias>Average_Transaction_Amount</alias>
            <sourceFieldName>Average_Transaction_Amount</sourceFieldName>
            <sourceName>Group_By_Designation</sourceName>
        </fields>
        <fields>
            <alias>Current_Year_Transaction_Amount</alias>
            <sourceFieldName>Current_Year_Transaction_Amount</sourceFieldName>
            <sourceName>Group_By_Designation_Current_Year</sourceName>
        </fields>
        <fields>
            <alias>Current_Year_Transaction_Count</alias>
            <sourceFieldName>Current_Year_Transaction_Count</sourceFieldName>
            <sourceName>Group_By_Designation_Current_Year</sourceName>
        </fields>
        <fields>
            <alias>First_Paid_Transaction_Date</alias>
            <sourceFieldName>First_Paid_Transaction_Date</sourceFieldName>
            <sourceName>Group_By_Designation</sourceName>
        </fields>
        <fields>
            <alias>GiftDesignationId</alias>
            <sourceFieldName>GiftDesignationId</sourceFieldName>
            <sourceName>Group_By_Designation</sourceName>
        </fields>
        <fields>
            <alias>Highest_Transaction_Amount</alias>
            <sourceFieldName>Highest_Transaction_Amount</sourceFieldName>
            <sourceName>Group_By_Designation</sourceName>
        </fields>
        <fields>
            <alias>Last_Paid_Transaction_Date</alias>
            <sourceFieldName>Last_Paid_Transaction_Date</sourceFieldName>
            <sourceName>Group_By_Designation</sourceName>
        </fields>
        <fields>
            <alias>Lowest_Transaction_Amount</alias>
            <sourceFieldName>Lowest_Transaction_Amount</sourceFieldName>
            <sourceName>Group_By_Designation</sourceName>
        </fields>
        <fields>
            <alias>Total_Transaction_Count</alias>
            <sourceFieldName>Total_Transaction_Count</sourceFieldName>
            <sourceName>Group_By_Designation</sourceName>
        </fields>
        <fields>
            <alias>Transaction_Total_Amount</alias>
            <sourceFieldName>Transaction_Total_Amount</sourceFieldName>
            <sourceName>Group_By_Designation</sourceName>
        </fields>
        <joinKeys>
            <primarySourceFieldName>GiftDesignationId</primarySourceFieldName>
            <secondarySourceFieldName>GiftDesignationId</secondarySourceFieldName>
        </joinKeys>
        <label>Join Group By Designation and Current Year</label>
        <name>Join_Group_By_Designation_and_Current_Year</name>
        <primarySourceName>Group_By_Designation</primarySourceName>
        <secondarySourceName>Group_By_Designation_Current_Year</secondarySourceName>
        <type>LeftOuter</type>
    </joins>
    <joins>
        <fields>
            <alias>Average_Transaction_Amount</alias>
            <sourceFieldName>Average_Transaction_Amount</sourceFieldName>
            <sourceName>Join_Group_By_Designation_and_Current_Year</sourceName>
        </fields>
        <fields>
            <alias>Current_Year_Transaction_Amount</alias>
            <sourceFieldName>Current_Year_Transaction_Amount</sourceFieldName>
            <sourceName>Join_Group_By_Designation_and_Current_Year</sourceName>
        </fields>
        <fields>
            <alias>Current_Year_Transaction_Count</alias>
            <sourceFieldName>Current_Year_Transaction_Count</sourceFieldName>
            <sourceName>Join_Group_By_Designation_and_Current_Year</sourceName>
        </fields>
        <fields>
            <alias>First_Paid_Transaction_Date</alias>
            <sourceFieldName>First_Paid_Transaction_Date</sourceFieldName>
            <sourceName>Join_Group_By_Designation_and_Current_Year</sourceName>
        </fields>
        <fields>
            <alias>GiftDesignationId</alias>
            <sourceFieldName>GiftDesignationId</sourceFieldName>
            <sourceName>Join_Group_By_Designation_and_Current_Year</sourceName>
        </fields>
        <fields>
            <alias>Highest_Transaction_Amount</alias>
            <sourceFieldName>Highest_Transaction_Amount</sourceFieldName>
            <sourceName>Join_Group_By_Designation_and_Current_Year</sourceName>
        </fields>
        <fields>
            <alias>Last_Paid_Transaction_Date</alias>
            <sourceFieldName>Last_Paid_Transaction_Date</sourceFieldName>
            <sourceName>Join_Group_By_Designation_and_Current_Year</sourceName>
        </fields>
        <fields>
            <alias>Last_Year_Transaction_Amount</alias>
            <sourceFieldName>Last_Year_Transaction_Amount</sourceFieldName>
            <sourceName>Group_By_Designation_Last_Year</sourceName>
        </fields>
        <fields>
            <alias>Last_Year_Transaction_Count</alias>
            <sourceFieldName>Last_Year_Transaction_Count</sourceFieldName>
            <sourceName>Group_By_Designation_Last_Year</sourceName>
        </fields>
        <fields>
            <alias>Lowest_Transaction_Amount</alias>
            <sourceFieldName>Lowest_Transaction_Amount</sourceFieldName>
            <sourceName>Join_Group_By_Designation_and_Current_Year</sourceName>
        </fields>
        <fields>
            <alias>Total_Transaction_Count</alias>
            <sourceFieldName>Total_Transaction_Count</sourceFieldName>
            <sourceName>Join_Group_By_Designation_and_Current_Year</sourceName>
        </fields>
        <fields>
            <alias>Transaction_Total_Amount</alias>
            <sourceFieldName>Transaction_Total_Amount</sourceFieldName>
            <sourceName>Join_Group_By_Designation_and_Current_Year</sourceName>
        </fields>
        <joinKeys>
            <primarySourceFieldName>GiftDesignationId</primarySourceFieldName>
            <secondarySourceFieldName>GiftDesignationId</secondarySourceFieldName>
        </joinKeys>
        <label>Join Group By Designation and Current Year and Last Year</label>
        <name>Join_Group_By_Designation_and_Current_Year_and_Last_Year</name>
        <primarySourceName>Join_Group_By_Designation_and_Current_Year</primarySourceName>
        <secondarySourceName>Group_By_Designation_Last_Year</secondarySourceName>
        <type>LeftOuter</type>
    </joins>
    <joins>
        <fields>
            <alias>Average_Transaction_Amount</alias>
            <sourceFieldName>Average_Transaction_Amount</sourceFieldName>
            <sourceName>Join_Group_By_Designation_and_Current_Year_and_Last_Year</sourceName>
        </fields>
        <fields>
            <alias>Current_Year_Transaction_Amount</alias>
            <sourceFieldName>Current_Year_Transaction_Amount</sourceFieldName>
            <sourceName>Join_Group_By_Designation_and_Current_Year_and_Last_Year</sourceName>
        </fields>
        <fields>
            <alias>Current_Year_Transaction_Count</alias>
            <sourceFieldName>Current_Year_Transaction_Count</sourceFieldName>
            <sourceName>Join_Group_By_Designation_and_Current_Year_and_Last_Year</sourceName>
        </fields>
        <fields>
            <alias>First_Paid_Transaction_Date</alias>
            <sourceFieldName>First_Paid_Transaction_Date</sourceFieldName>
            <sourceName>Join_Group_By_Designation_and_Current_Year_and_Last_Year</sourceName>
        </fields>
        <fields>
            <alias>GiftDesignationId</alias>
            <sourceFieldName>GiftDesignationId</sourceFieldName>
            <sourceName>Join_Group_By_Designation_and_Current_Year_and_Last_Year</sourceName>
        </fields>
        <fields>
            <alias>Highest_Transaction_Amount</alias>
            <sourceFieldName>Highest_Transaction_Amount</sourceFieldName>
            <sourceName>Join_Group_By_Designation_and_Current_Year_and_Last_Year</sourceName>
        </fields>
        <fields>
            <alias>Last_Paid_Transaction_Date</alias>
            <sourceFieldName>Last_Paid_Transaction_Date</sourceFieldName>
            <sourceName>Join_Group_By_Designation_and_Current_Year_and_Last_Year</sourceName>
        </fields>
        <fields>
            <alias>Last_Two_Year_Transaction_Amount</alias>
            <sourceFieldName>Last_Two_Year_Transaction_Amount</sourceFieldName>
            <sourceName>Group_By_Designation_Last_Two_Year</sourceName>
        </fields>
        <fields>
            <alias>Last_Two_Year_Transaction_Count</alias>
            <sourceFieldName>Last_Two_Year_Transaction_Count</sourceFieldName>
            <sourceName>Group_By_Designation_Last_Two_Year</sourceName>
        </fields>
        <fields>
            <alias>Last_Year_Transaction_Amount</alias>
            <sourceFieldName>Last_Year_Transaction_Amount</sourceFieldName>
            <sourceName>Join_Group_By_Designation_and_Current_Year_and_Last_Year</sourceName>
        </fields>
        <fields>
            <alias>Last_Year_Transaction_Count</alias>
            <sourceFieldName>Last_Year_Transaction_Count</sourceFieldName>
            <sourceName>Join_Group_By_Designation_and_Current_Year_and_Last_Year</sourceName>
        </fields>
        <fields>
            <alias>Lowest_Transaction_Amount</alias>
            <sourceFieldName>Lowest_Transaction_Amount</sourceFieldName>
            <sourceName>Join_Group_By_Designation_and_Current_Year_and_Last_Year</sourceName>
        </fields>
        <fields>
            <alias>Total_Transaction_Count</alias>
            <sourceFieldName>Total_Transaction_Count</sourceFieldName>
            <sourceName>Join_Group_By_Designation_and_Current_Year_and_Last_Year</sourceName>
        </fields>
        <fields>
            <alias>Transaction_Total_Amount</alias>
            <sourceFieldName>Transaction_Total_Amount</sourceFieldName>
            <sourceName>Join_Group_By_Designation_and_Current_Year_and_Last_Year</sourceName>
        </fields>
        <joinKeys>
            <primarySourceFieldName>GiftDesignationId</primarySourceFieldName>
            <secondarySourceFieldName>GiftDesignationId</secondarySourceFieldName>
        </joinKeys>
        <label>Join Group By Designation and Current Year and Last Year and Last Two Year</label>
        <name>Join_Group_By_Designation_and_Current_Year_and_Last_Year_and_Last_Two_Year</name>
        <primarySourceName>Join_Group_By_Designation_and_Current_Year_and_Last_Year</primarySourceName>
        <secondarySourceName>Group_By_Designation_Last_Two_Year</secondarySourceName>
        <type>LeftOuter</type>
    </joins>
    <label>*NPC_GiftDesignation</label>
    <parameters>
        <dataType>Date</dataType>
        <isMultiValue>false</isMultiValue>
        <label>CURRENT_CALENDAR_YEAR</label>
        <name>CURRENT_CALENDAR_YEAR</name>
    </parameters>
    <parameters>
        <dataType>Date</dataType>
        <isMultiValue>false</isMultiValue>
        <label>LAST_CALENDAR_YEAR</label>
        <name>LAST_CALENDAR_YEAR</name>
    </parameters>
    <processType>DataProcessingEngine</processType>
    <status>Inactive</status>
    <writebacks>
        <fields>
            <runtimeParameter>false</runtimeParameter>
            <sourceFieldName>GiftDesignationId</sourceFieldName>
            <targetFieldName>Id</targetFieldName>
        </fields>
        <fields>
            <runtimeParameter>false</runtimeParameter>
            <sourceFieldName>Average_Transaction_Amount</sourceFieldName>
            <targetFieldName>AverageTransactionAmount</targetFieldName>
        </fields>
        <fields>
            <runtimeParameter>false</runtimeParameter>
            <sourceFieldName>First_Paid_Transaction_Date</sourceFieldName>
            <targetFieldName>FirstPaidTransactionDate</targetFieldName>
        </fields>
        <fields>
            <runtimeParameter>false</runtimeParameter>
            <sourceFieldName>Last_Paid_Transaction_Date</sourceFieldName>
            <targetFieldName>LastPaidTransactionDate</targetFieldName>
        </fields>
        <fields>
            <runtimeParameter>false</runtimeParameter>
            <sourceFieldName>Total_Transaction_Count</sourceFieldName>
            <targetFieldName>TotalTransactionCount</targetFieldName>
        </fields>
        <fields>
            <runtimeParameter>false</runtimeParameter>
            <sourceFieldName>Lowest_Transaction_Amount</sourceFieldName>
            <targetFieldName>LowestTransactionAmount</targetFieldName>
        </fields>
        <fields>
            <runtimeParameter>false</runtimeParameter>
            <sourceFieldName>Highest_Transaction_Amount</sourceFieldName>
            <targetFieldName>HighestTransactionAmount</targetFieldName>
        </fields>
        <fields>
            <runtimeParameter>false</runtimeParameter>
            <sourceFieldName>Transaction_Total_Amount</sourceFieldName>
            <targetFieldName>TotalTransactionAmount</targetFieldName>
        </fields>
        <fields>
            <runtimeParameter>false</runtimeParameter>
            <sourceFieldName>Current_Year_Transaction_Amount</sourceFieldName>
            <targetFieldName>CurrentYearTrxnAmount</targetFieldName>
        </fields>
        <fields>
            <runtimeParameter>false</runtimeParameter>
            <sourceFieldName>Current_Year_Transaction_Count</sourceFieldName>
            <targetFieldName>CurrentYearTransactionCount</targetFieldName>
        </fields>
        <fields>
            <runtimeParameter>false</runtimeParameter>
            <sourceFieldName>Last_Year_Transaction_Amount</sourceFieldName>
            <targetFieldName>LastYearTrxnAmount</targetFieldName>
        </fields>
        <fields>
            <runtimeParameter>false</runtimeParameter>
            <sourceFieldName>Last_Year_Transaction_Count</sourceFieldName>
            <targetFieldName>LastYearTransactionCount</targetFieldName>
        </fields>
        <fields>
            <runtimeParameter>false</runtimeParameter>
            <sourceFieldName>Last_Two_Year_Transaction_Amount</sourceFieldName>
            <targetFieldName>LastTwoYearTrxnAmount</targetFieldName>
        </fields>
        <fields>
            <runtimeParameter>false</runtimeParameter>
            <sourceFieldName>Last_Two_Year_Transaction_Count</sourceFieldName>
            <targetFieldName>LastTwoYearTrxnCount</targetFieldName>
        </fields>
        <isChangedRow>false</isChangedRow>
        <label>Update Gift Designation</label>
        <name>Update_Gift_Designation</name>
        <operationType>Update</operationType>
        <sourceName>Join_Group_By_Designation_and_Current_Year_and_Last_Year_and_Last_Two_Year</sourceName>
        <storageType>sObject</storageType>
        <targetObjectName>GiftDesignation</targetObjectName>
        <writebackSequence>1</writebackSequence>
        <writebackUser>005dN000002IjK6QAK</writebackUser>
    </writebacks>
</BatchCalcJobDefinition>
