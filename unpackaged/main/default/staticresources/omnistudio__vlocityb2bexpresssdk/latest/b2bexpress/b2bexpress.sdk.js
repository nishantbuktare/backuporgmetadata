/*! ************************************************************************
 *
 * VLOCITY, INC. CONFIDENTIAL
 * __________________
 *
 *  [2014] - [2019] Vlocity, Inc.
 *  All Rights Reserved.
 *
 * NOTICE:  All information contained herein is, and remains
 * the property of Vlocity, Inc. and its suppliers,
 * if any. The intellectual and technical concepts contained
 * herein are proprietary to Vlocity, Inc. and its suppliers and may be
 * covered by U.S. and Foreign Patents, patents in process, and are
 * protected by trade secret or copyright law. Dissemination of this
 * information and reproduction, modification or reverse-engineering
 * of this material, is prohibited unless prior written permission
 * is obtained from Vlocity, Inc.
 *
 * Build details:  
 * hash: 7ba8fe61081152867f66
 * chunkhash: 125975c47d67da2e9a14
 * file: b2bexpress.sdk.js
 *
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.b2bexpress=t():(e.VlocitySDK=e.VlocitySDK||{},e.VlocitySDK.b2bexpress=t())}(this,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=337)}([function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(47)),n(r(16)),n(r(48)),n(r(9)),n(r(51))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(50))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(56))},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=500;class i{static setDefaultRetryCount(e){this.defaultRetryCount=e}static addRetryDelay(){return new Promise(e=>{setTimeout(e,n)})}static setDefaultTimeout(e){this.defaultTimeout=e}}t.default=i,i.defaultRetryCount=3,i.defaultTimeout=1e4},function(e,t){var r,n,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(r===setTimeout)return setTimeout(e,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(e){r=o}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(e){n=s}}();var u,c=[],l=!1,d=-1;function h(){l&&u&&(l=!1,u.length?c=u.concat(c):d=-1,c.length&&p())}function p(){if(!l){var e=a(h);l=!0;for(var t=c.length;t;){for(u=c,c=[];++d<t;)u&&u[d].run();d=-1,t=c.length}u=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new f(e,t)),1!==c.length||l||a(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(33)),n(r(90)),n(r(91))},function(e,t,r){"use strict";var n,i="object"==typeof Reflect?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};n=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,e.exports.once=function(e,t){return new Promise(function(r,n){function i(){void 0!==o&&e.removeListener("error",o),r([].slice.call(arguments))}var o;"error"!==t&&(o=function(r){e.removeListener(t,i),n(r)},e.once("error",o)),e.once(t,i)})},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var u=10;function c(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function d(e,t,r,n){var i,o,s;if(c(r),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),s=o[t]),void 0===s)s=o[t]=r,++e._eventsCount;else if("function"==typeof s?s=o[t]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),(i=l(e))>0&&s.length>i&&!s.warned){s.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=e,a.type=t,a.count=s.length,function(e){console&&console.warn&&console.warn(e)}(a)}return e}function h(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(n);return i.listener=r,n.wrapFn=i,i}function p(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(i):m(i,i.length)}function f(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function m(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");u=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return l(this)},a.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var u=i[e];if(void 0===u)return!1;if("function"==typeof u)o(u,this,t);else{var c=u.length,l=m(u,c);for(r=0;r<c;++r)o(l[r],this,t)}return!0},a.prototype.addListener=function(e,t){return d(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return d(this,e,t,!0)},a.prototype.once=function(e,t){return c(t),this.on(e,h(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,h(this,e,t)),this},a.prototype.removeListener=function(e,t){var r,n,i,o,s;if(c(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){s=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,s||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var i,o=Object.keys(r);for(n=0;n<o.length;++n)"removeListener"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},a.prototype.listeners=function(e){return p(this,e,!0)},a.prototype.rawListeners=function(e){return p(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},a.prototype.listenerCount=f,a.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{static get namespace(){return n.internalNamespace}static set namespace(e){n.internalNamespace=e,e?(n.internalPrefix=`${e}__`,n.internalRestAPIPrefix=`/${e}`):(n.internalPrefix=e,n.internalRestAPIPrefix=e)}static get prefix(){return n.internalPrefix}static get restAPIPrefix(){return n.internalRestAPIPrefix}}t.SalesForceNamespace=n,n.internalPrefix="omnistudio__",n.internalNamespace="omnistudio",n.internalRestAPIPrefix="/omnistudio"},,function(e,t,r){"use strict";(function(t){var n=r(60);n.prototype.thenCall=function(e){return"function"==typeof e&&this.then(function(r){t.nextTick(function(){e(null,r)})},function(r){t.nextTick(function(){e(r)})}),this},n.prototype.fail=n.prototype.catch,n.defer=function(){return new i};var i=function(){var e=this;this.promise=new n(function(t,r){e.resolve=t,e.reject=r})};e.exports=n}).call(this,r(5))},function(e,t,r){"use strict";var n=r(20),i=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=d;var o=Object.create(r(14));o.inherits=r(3);var s=r(38),a=r(41);o.inherits(d,s);for(var u=i(a.prototype),c=0;c<u.length;c++){var l=u[c];d.prototype[l]||(d.prototype[l]=a.prototype[l])}function d(e){if(!(this instanceof d))return new d(e);s.call(this,e),a.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",h)}function h(){this.allowHalfOpen||this._writableState.ended||n.nextTick(p,this)}function p(e){e.end()}Object.defineProperty(d.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(d.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),d.prototype._destroy=function(e,t){this.push(null),this.end(),n.nextTick(t,e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isNode=new Function("try {return this===global;}catch(e){return false;}")()},function(e,t,r){(function(e){function r(e){return Object.prototype.toString.call(e)}t.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===r(e)},t.isBoolean=function(e){return"boolean"==typeof e},t.isNull=function(e){return null===e},t.isNullOrUndefined=function(e){return null==e},t.isNumber=function(e){return"number"==typeof e},t.isString=function(e){return"string"==typeof e},t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=function(e){return void 0===e},t.isRegExp=function(e){return"[object RegExp]"===r(e)},t.isObject=function(e){return"object"==typeof e&&null!==e},t.isDate=function(e){return"[object Date]"===r(e)},t.isError=function(e){return"[object Error]"===r(e)||e instanceof Error},t.isFunction=function(e){return"function"==typeof e},t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=e.isBuffer}).call(this,r(17).Buffer)},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(82)),n(r(83))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.INDEXEDDB="INDEXEDDB",e.LOCALSTORAGE="LOCALSTORAGE",e.SESSIONSTORAGE="SESSIONSTORAGE"}(t.CacheType||(t.CacheType={}))},function(e,t,r){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var n=r(58),i=r(59),o=r(36);function s(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=u.prototype:(null===e&&(e=new u(t)),e.length=t),e}function u(e,t,r){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return d(this,e)}return c(this,e,t,r)}function c(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n);u.TYPED_ARRAY_SUPPORT?(e=t).__proto__=u.prototype:e=h(e,t);return e}(e,t,r,n):"string"==typeof t?function(e,t,r){"string"==typeof r&&""!==r||(r="utf8");if(!u.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|f(t,r),i=(e=a(e,n)).write(t,r);i!==n&&(e=e.slice(0,i));return e}(e,t,r):function(e,t){if(u.isBuffer(t)){var r=0|p(t.length);return 0===(e=a(e,r)).length?e:(t.copy(e,0,0,r),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||function(e){return e!=e}(t.length)?a(e,0):h(e,t);if("Buffer"===t.type&&o(t.data))return h(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function d(e,t){if(l(t),e=a(e,t<0?0:0|p(t)),!u.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function h(e,t){var r=t.length<0?0:0|p(t.length);e=a(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function p(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function f(e,t){if(u.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return q(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return F(e).length;default:if(n)return q(e).length;t=(""+t).toLowerCase(),n=!0}}function m(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function y(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=u.from(t,n)),u.isBuffer(t))return 0===t.length?-1:g(e,t,r,n,i);if("number"==typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):g(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function g(e,t,r,n,i){var o,s=1,a=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,a/=2,u/=2,r/=2}function c(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){var l=-1;for(o=r;o<a;o++)if(c(e,o)===c(t,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*s}else-1!==l&&(o-=o-l),l=-1}else for(r+u>a&&(r=a-u),o=r;o>=0;o--){for(var d=!0,h=0;h<u;h++)if(c(e,o+h)!==c(t,h)){d=!1;break}if(d)return o}return-1}function v(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[r+s]=a}return s}function b(e,t,r,n){return G(q(t,e.length-r),e,r,n)}function I(e,t,r,n){return G(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function _(e,t,r,n){return I(e,t,r,n)}function w(e,t,r,n){return G(F(t),e,r,n)}function P(e,t,r,n){return G(function(e,t){for(var r,n,i,o=[],s=0;s<e.length&&!((t-=2)<0);++s)r=e.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(t,e.length-r),e,r,n)}function S(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function C(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o,s,a,u,c=e[i],l=null,d=c>239?4:c>223?3:c>191?2:1;if(i+d<=r)switch(d){case 1:c<128&&(l=c);break;case 2:128==(192&(o=e[i+1]))&&(u=(31&c)<<6|63&o)>127&&(l=u);break;case 3:o=e[i+1],s=e[i+2],128==(192&o)&&128==(192&s)&&(u=(15&c)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:o=e[i+1],s=e[i+2],a=e[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(u=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(l=u)}null===l?(l=65533,d=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),i+=d}return function(e){var t=e.length;if(t<=T)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=T));return r}(n)}t.Buffer=u,t.SlowBuffer=function(e){+e!=e&&(e=0);return u.alloc(+e)},t.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=s(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,r){return c(null,e,t,r)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,r){return function(e,t,r,n){return l(t),t<=0?a(e,t):void 0!==r?"string"==typeof n?a(e,t).fill(r,n):a(e,t).fill(r):a(e,t)}(null,e,t,r)},u.allocUnsafe=function(e){return d(null,e)},u.allocUnsafeSlow=function(e){return d(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=u.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var s=e[r];if(!u.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,i),i+=s.length}return n},u.byteLength=f,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?C(this,0,e):function(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return R(this,t,r);case"utf8":case"utf-8":return C(this,t,r);case"ascii":return A(this,t,r);case"latin1":case"binary":return E(this,t,r);case"base64":return S(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,t,r,n,i){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,i>>>=0,this===e)return 0;for(var o=i-n,s=r-t,a=Math.min(o,s),c=this.slice(n,i),l=e.slice(t,r),d=0;d<a;++d)if(c[d]!==l[d]){o=c[d],s=l[d];break}return o<s?-1:s<o?1:0},u.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},u.prototype.indexOf=function(e,t,r){return y(this,e,t,r,!0)},u.prototype.lastIndexOf=function(e,t,r){return y(this,e,t,r,!1)},u.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return v(this,e,t,r);case"utf8":case"utf-8":return b(this,e,t,r);case"ascii":return I(this,e,t,r);case"latin1":case"binary":return _(this,e,t,r);case"base64":return w(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var T=4096;function A(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function E(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function R(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=t;o<r;++o)i+=U(e[o]);return i}function O(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function x(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function j(e,t,r,n,i,o){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function D(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-r,2);i<o;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function M(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-r,4);i<o;++i)e[r+i]=t>>>8*(n?i:3-i)&255}function L(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function k(e,t,r,n,o){return o||L(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function N(e,t,r,n,o){return o||L(e,0,r,8),i.write(e,t,r,n,52,8),r+8}u.prototype.slice=function(e,t){var r,n=this.length;if(e=~~e,t=void 0===t?n:~~t,e<0?(e+=n)<0&&(e=0):e>n&&(e=n),t<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=u.prototype;else{var i=t-e;r=new u(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+e]}return r},u.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||x(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},u.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||x(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},u.prototype.readUInt8=function(e,t){return t||x(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||x(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||x(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||x(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||x(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||x(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},u.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||x(e,t,this.length);for(var n=t,i=1,o=this[e+--n];n>0&&(i*=256);)o+=this[e+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},u.prototype.readInt8=function(e,t){return t||x(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){t||x(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(e,t){t||x(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(e,t){return t||x(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||x(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||x(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||x(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||x(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||x(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||j(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},u.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||j(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},u.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||j(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||j(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):D(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||j(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):D(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||j(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):M(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||j(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):M(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);j(this,e,t,r,i-1,-i)}var o=0,s=1,a=0;for(this[t]=255&e;++o<r&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+r},u.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);j(this,e,t,r,i-1,-i)}var o=r-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+r},u.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||j(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||j(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):D(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||j(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):D(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||j(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):M(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||j(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):M(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,r){return k(this,e,t,!0,r)},u.prototype.writeFloatBE=function(e,t,r){return k(this,e,t,!1,r)},u.prototype.writeDoubleLE=function(e,t,r){return N(this,e,t,!0,r)},u.prototype.writeDoubleBE=function(e,t,r){return N(this,e,t,!1,r)},u.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,o=n-r;if(this===e&&r<t&&t<n)for(i=o-1;i>=0;--i)e[i+t]=this[i+r];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+o),t);return o},u.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var o;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(o=t;o<r;++o)this[o]=e;else{var s=u.isBuffer(e)?e:q(new u(e,n).toString()),a=s.length;for(o=0;o<r-t;++o)this[o+t]=s[o%a]}return this};var B=/[^+\/0-9A-Za-z-_]/g;function U(e){return e<16?"0"+e.toString(16):e.toString(16)}function q(e,t){var r;t=t||1/0;for(var n=e.length,i=null,o=[],s=0;s<n;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function F(e){return n.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(B,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function G(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}}).call(this,r(8))},function(e,t){e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}},function(e,t,r){(t=e.exports=r(38)).Stream=t,t.Readable=t,t.Writable=r(41),t.Duplex=r(12),t.Transform=r(43),t.PassThrough=r(74)},function(e,t,r){"use strict";(function(t){void 0===t||!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports={nextTick:function(e,r,n,i){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var o,s,a=arguments.length;switch(a){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick(function(){e.call(null,r)});case 3:return t.nextTick(function(){e.call(null,r,n)});case 4:return t.nextTick(function(){e.call(null,r,n,i)});default:for(o=new Array(a-1),s=0;s<o.length;)o[s++]=arguments[s];return t.nextTick(function(){e.apply(null,o)})}}}:e.exports=t}).call(this,r(5))},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(80)),n(r(81))},function(e,t,r){"use strict";var n=r(7).EventEmitter,i=e.exports=new n;i.VERSION=r(34),i.Connection=r(35),i.OAuth2=r(23),i.Date=i.SfDate=r(27),i.Promise=r(11),i.require=r(77)},function(e,t,r){"use strict";var n=r(63),i=r(24),o="https://login.salesforce.com",s=e.exports=function(e){e.authzServiceUrl&&e.tokenServiceUrl?(this.loginUrl=e.authzServiceUrl.split("/").slice(0,3).join("/"),this.authzServiceUrl=e.authzServiceUrl,this.tokenServiceUrl=e.tokenServiceUrl,this.revokeServiceUrl=e.revokeServiceUrl):(this.loginUrl=e.loginUrl||o,this.authzServiceUrl=this.loginUrl+"/services/oauth2/authorize",this.tokenServiceUrl=this.loginUrl+"/services/oauth2/token",this.revokeServiceUrl=this.loginUrl+"/services/oauth2/revoke"),this.clientId=e.clientId,this.clientSecret=e.clientSecret,this.redirectUri=e.redirectUri,e.proxyUrl?this._transport=new i.ProxyTransport(e.proxyUrl):e.httpProxy?this._transport=new i.HttpProxyTransport(e.httpProxy):this._transport=new i};Object.assign(s.prototype,{getAuthorizationUrl:function(e){return e=Object.assign({response_type:"code",client_id:this.clientId,redirect_uri:this.redirectUri},e||{}),this.authzServiceUrl+(this.authzServiceUrl.indexOf("?")>=0?"&":"?")+n.stringify(e)},refreshToken:function(e,t){var r={grant_type:"refresh_token",refresh_token:e,client_id:this.clientId};return this.clientSecret&&(r.client_secret=this.clientSecret),this._postParams(r,t)},requestToken:function(e,t,r){return"function"==typeof t&&(r=t,t={}),t=Object.assign({grant_type:"authorization_code",code:e,client_id:this.clientId,redirect_uri:this.redirectUri},t||{}),this.clientSecret&&(t.client_secret=this.clientSecret),this._postParams(t,r)},authenticate:function(e,t,r){return this._postParams({grant_type:"password",username:e,password:t,client_id:this.clientId,client_secret:this.clientSecret,redirect_uri:this.redirectUri},r)},revokeToken:function(e,t){return this._transport.httpRequest({method:"POST",url:this.revokeServiceUrl,body:n.stringify({token:e}),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){if(e.statusCode>=400){var t=n.parse(e.body);t&&t.error||(t={error:"ERROR_HTTP_"+e.statusCode,error_description:e.body});var r=new Error(t.error_description);throw r.name=t.error,r}}).thenCall(t)},_postParams:function(e,t){return this._transport.httpRequest({method:"POST",url:this.tokenServiceUrl,body:n.stringify(e),headers:{"content-type":"application/x-www-form-urlencoded"}}).then(function(e){var t;try{t=JSON.parse(e.body)}catch(e){}if(e.statusCode>=400){t=t||{error:"ERROR_HTTP_"+e.statusCode,error_description:e.body};var r=new Error(t.error_description);throw r.name=t.error,r}return t}).thenCall(t)}})},function(e,t,r){"use strict";(function(t){var n,i=r(18),o=r(11),s=r(66),a=r(75),u=r(76);if(s.defaults){var c={followAllRedirects:!0};t.env.HTTP_PROXY&&(c.proxy=t.env.HTTP_PROXY),parseInt(t.env.HTTP_TIMEOUT)&&(c.timeout=parseInt(t.env.HTTP_TIMEOUT)),s=s.defaults(c)}if("undefined"==typeof window)n=t.env.LOCATION_BASE_URL||"";else{var l=function(e){var t=/(\w+)\.(visual\.force|salesforce)\.com$/.exec(e);t&&(e=t[1]+".salesforce.com");return e}(window.location.host);n=l?"https://"+l:""}var d=e.exports=function(){};d.prototype.httpRequest=function(e,t){var r,n=o.defer(),i=this._getHttpRequestModule();return function e(t,r){var n=t.then;return t.then=function(){return r(),e(n.apply(t,arguments),r)},t.stream=r,t}(n.promise,function(){return r||(r=i(e,function(e,t){e?n.reject(e):n.resolve(t)})),r}).thenCall(t)},d.prototype._getHttpRequestModule=function(){return s};var h=d.JsonpTransport=function(e){this._jsonpParam=e};i(h,d),h.prototype._getHttpRequestModule=function(){return u.createRequest(this._jsonpParam)},h.supported=u.supported;var p=d.CanvasTransport=function(e){this._signedRequest=e};i(p,d),p.prototype._getHttpRequestModule=function(){return a.createRequest(this._signedRequest)},p.supported=a.supported;var f=d.ProxyTransport=function(e){this._proxyUrl=e};i(f,d),f.prototype.httpRequest=function(e,t){var r=e.url;0===r.indexOf("/")&&(r=n+r);var i={method:e.method,url:this._proxyUrl+"?"+Date.now()+"."+(""+Math.random()).substring(2),headers:{"salesforceproxy-endpoint":r}};if((e.body||""===e.body)&&(i.body=e.body),e.headers)for(var o in e.headers)i.headers[o]=e.headers[o];return f.super_.prototype.httpRequest.call(this,i,t)};var m=d.HttpProxyTransport=function(e){this._httpProxy=e};i(m,d),m.prototype.httpRequest=function(e,t){var r=e.url;0===r.indexOf("/")&&(r=n+r);var i={method:e.method,url:e.url,proxy:this._httpProxy,headers:{}};if((e.body||""===e.body)&&(i.body=e.body),e.headers)for(var o in e.headers)i.headers[o]=e.headers[o];return m.super_.prototype.httpRequest.call(this,i,t)}}).call(this,r(5))},function(e,t,r){var n=r(17),i=n.Buffer;function o(e,t){for(var r in e)t[r]=e[r]}function s(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(o(n,t),t.Buffer=s),o(i,s),s.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,r)},s.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=i(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},function(e,t,r){"use strict";(function(t){var n=r(3),i=(r(7),r(19)),o=r(11),s=r(44),a=e.exports=function(e,t,r){a.super_.call(this,{objectMode:!0}),this._conn=e,"string"==typeof t?this._soql=t:t.locator&&t.locator.indexOf("/")>=0?this._locator=t.locator.split("/").pop():(this._config=t,this.select(t.fields),t.includes&&this.include(t.includes),t.sort&&this.sort(t.sort)),this._options=Object.assign(r||{},{maxFetch:1e4,autoFetch:!1,scanAll:!1,responseTarget:u.QueryResult}),this._executed=!1,this._finished=!1,this._chaining=!1,this._deferred=o.defer()};n(a,i.Readable);var u=a.ResponseTargets={};["QueryResult","Records","SingleRecord","Count"].forEach(function(e){u[e]=e}),a.prototype.run=a.prototype.exec=a.prototype.execute=function(e,t){var r=this,n=this._conn._logger,i=this._deferred;if(this._executed)return i.reject(new Error("re-executing already executed query")),this;if(this._finished)return i.reject(new Error("executing already closed query")),this;"function"==typeof e&&(t=e,e={}),e={headers:(e=e||{}).headers||r._options.headers,responseTarget:e.responseTarget||r._options.responseTarget,autoFetch:e.autoFetch||r._options.autoFetch,maxFetch:e.maxFetch||r._options.maxFetch,scanAll:e.scanAll||r._options.scanAll};var o=function(e,r){if("function"==typeof t)try{r=t(e,r),e=null}catch(t){e=t}e?i.reject(e):i.resolve(r)};return this.once("response",function(e){o(null,e)}),this.once("error",function(e){o(e)}),this.once("fetch",function(){if(e.responseTarget===u.Records&&(r._chaining||t)){n.debug("--- collecting all fetched records ---");var i=[],o=function(e){i.push(e)};r.on("record",o),r.once("end",function(){r.removeListener("record",o),r.emit("response",i,r)})}}),this._executed=!0,n.debug(">>> Query start >>>"),this._execute(e).then(function(){n.debug("*** Query finished ***")}).fail(function(e){n.debug("--- Query error ---"),r.emit("error",e)}),this},a.prototype._execute=function(e){var t=this,r=this._conn._logger,n=e.responseTarget,i=e.autoFetch,s=e.maxFetch,a=e.scanAll;return o.resolve(t._locator?t._conn._baseUrl()+"/query/"+t._locator:t.toSOQL().then(function(e){return t.totalFetched=0,r.debug("SOQL = "+e),t._conn._baseUrl()+"/"+(a?"queryAll":"query")+"?q="+encodeURIComponent(e)})).then(function(r){return t._conn.request({method:"GET",url:r,headers:e.headers})}).then(function(r){var o;switch(t.emit("fetch"),t.totalSize=r.totalSize,n){case u.SingleRecord:o=r.records&&r.records.length>0?r.records[0]:null;break;case u.Records:o=r.records;break;case u.Count:o=r.totalSize;break;default:o=r}n!==u.Records&&t.emit("response",o,t);for(var a=r.records&&r.records.length||0,c=0;c<a;c++){if(t.totalFetched>=s){t._finished=!0;break}var l=r.records[c];t.push(l),t.emit("record",l,t.totalFetched++,t)}return r.nextRecordsUrl&&(t._locator=r.nextRecordsUrl.split("/").pop()),t._finished=t._finished||r.done||!i,t._finished?t.push(null):t._execute(e),o})},a.prototype.on=function(e,t){if("record"===e){var r=this;this.on("readable",function(){for(;null!==r.read(););})}return a.super_.prototype.on.call(this,e,t)},a.prototype.addListener=a.prototype.on,a.prototype._expandFields=function(){if(this._soql)return o.reject(new Error("Cannot expand fields for the query which has already built SOQL."));var e=this,t=e._conn._logger,r=this._conn,n=this._config.table,i=this._config.fields||[];t.debug("_expandFields: table = "+n+", fields = "+i.join(", "));var s=[],a=[];return i.forEach(function(e){s.push(function e(r,n){t.debug('expanding field "'+n+'" in "'+r+'"...');var i=n.split(".");return"*"===i[i.length-1]?u(r).then(function(n){if(t.debug("table "+r+"has been described"),i.length>1){var o=i.shift(),s=n.fields.find(function(e){return e.relationshipName&&e.relationshipName.toUpperCase()===o.toUpperCase()});if(s){var a=1===s.referenceTo.length?s.referenceTo[0]:"Name";return e(a,i.join(".")).then(function(e){return e.map(e=>o+"."+e)})}return[]}return n.fields.map(e=>e.name)}):o.resolve([n])}(n,e))}),(e._children||[]).forEach(function(e){a.push(e._expandFields())}),o.all([o.resolve(e._parent?function(r){var n=e._parent._config.table;return t.debug('finding table for relation "'+r+'" in "'+n+'"...'),u(n).then(function(e){var t=r.toUpperCase(),n=e.childRelationships.find(function(e){return(e.relationshipName||"").toUpperCase()===t});return n?n.childSObject:o.reject(new Error("No child relationship found: "+r))})}(n):n).then(function(t){return o.all(s).then(function(t){e._config.fields=t.flat()})}),o.all(a)]);function u(e){t.debug("describe cache: "+e);var n=o.defer();return r.describe$(e,function(e,r){t.debug("... done."),e?n.reject(e):n.resolve(r)}),n.promise}},a.prototype.toSOQL=function(e){var t=this;return o.resolve(t._soql||t._expandFields().then(function(){return s.createSOQL(t._config)})).thenCall(e)};a.prototype.then=function(e,t){return this._chaining=!0,this._finished||this._executed||this.execute(),this._deferred.promise.then.apply(this._deferred.promise,arguments)},a.prototype.thenCall=function(e){return"function"==typeof e&&this.then(function(r){t.nextTick(function(){e(null,r)})},function(r){t.nextTick(function(){e(r)})}),this};var c=function(e,t,r){c.super_.call(this,e,r),this._parent=t};n(c,a),c.prototype.include=function(){throw new Error("Not allowed to include another subquery in subquery.")},c.prototype.end=function(){return this._parent},c.prototype.run=c.prototype.exec=c.prototype.execute=function(){return this._parent.execute.apply(this._parent,arguments)}}).call(this,r(5))},function(e,t,r){"use strict";var n=e.exports=function(e){this._literal=e};function i(e){return(e<10?"0":"")+e}n.prototype.toString=n.prototype.toJSON=function(){return this._literal},n.toDateLiteral=function(e){"number"==typeof e?e=new Date(e):"string"==typeof e&&(e=n.parseDate(e));var t=e.getFullYear(),r=e.getMonth()+1,o=e.getDate(),s=[t,i(r),i(o)].join("-");return new n(s)},n.toDateTimeLiteral=function(e){"number"==typeof e?e=new Date(e):"string"==typeof e&&(e=n.parseDate(e));var t=e.getUTCFullYear(),r=e.getUTCMonth()+1,o=e.getUTCDate(),s=e.getUTCHours(),a=e.getUTCMinutes(),u=e.getUTCSeconds(),c=[t,i(r),i(o)].join("-")+"T"+[i(s),i(a),i(u)].join(":")+"Z";return new n(c)},n.parseDate=function(e){var t=new Date,r=e.match(/^([\d]{4})-?([\d]{2})-?([\d]{2})(T([\d]{2}):?([\d]{2}):?([\d]{2})(.([\d]{3}))?(Z|([\+\-])([\d]{2}):?([\d]{2})))?$/);if(r){if(t=new Date(0),r[4]){if(t.setUTCFullYear(parseInt(r[1],10)),t.setUTCDate(parseInt(r[3],10)),t.setUTCMonth(parseInt(r[2],10)-1),t.setUTCHours(parseInt(r[5],10)),t.setUTCMinutes(parseInt(r[6],10)),t.setUTCSeconds(parseInt(r[7],10)),t.setUTCMilliseconds(parseInt(r[9]||"0",10)),r[10]&&"Z"!==r[10]){var n=60*parseInt(r[12],10)+parseInt(r[13],10);t.setTime(("+"===r[11]?-1:1)*n*60*1e3+t.getTime())}}else t.setFullYear(parseInt(r[1],10)),t.setDate(parseInt(r[3],10)),t.setMonth(parseInt(r[2],10)-1),t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0);return t}throw new Error("Invalid date format is specified : "+e)};var o={YESTERDAY:1,TODAY:1,TOMORROW:1,LAST_WEEK:1,THIS_WEEK:1,NEXT_WEEK:1,LAST_MONTH:1,THIS_MONTH:1,NEXT_MONTH:1,LAST_90_DAYS:1,NEXT_90_DAYS:1,LAST_N_DAYS:2,NEXT_N_DAYS:2,NEXT_N_WEEKS:2,LAST_N_WEEKS:2,NEXT_N_MONTHS:2,LAST_N_MONTHS:2,THIS_QUARTER:1,LAST_QUARTER:1,NEXT_QUARTER:1,NEXT_N_QUARTERS:2,LAST_N_QUARTERS:2,THIS_YEAR:1,LAST_YEAR:1,NEXT_YEAR:1,NEXT_N_YEARS:2,LAST_N_YEARS:2,THIS_FISCAL_QUARTER:1,LAST_FISCAL_QUARTER:1,NEXT_FISCAL_QUARTER:1,NEXT_N_FISCAL_QUARTERS:2,LAST_N_FISCAL_QUARTERS:2,THIS_FISCAL_YEAR:1,LAST_FISCAL_YEAR:1,NEXT_FISCAL_YEAR:1,NEXT_N_FISCAL_YEARS:2,LAST_N_FISCAL_YEARS:2};for(var s in o){var a=o[s];n[s]=1===a?new n(s):u(s)}function u(e){return function(t){return new n(e+":"+t)}}},function(e,t,r){"use strict";var n=r(7),i=function(){this.fetching=!1};r(3)(i,n.EventEmitter),i.prototype.get=function(e){if(!e)return this._value;this.once("value",e),void 0!==this._value&&this.emit("value",this._value)},i.prototype.set=function(e){this._value=e,this.emit("value",this._value)},i.prototype.clear=function(){this.fetching=!1,delete this._value};var o=function(){this._entries={}};function s(e,t){let r=[],n="";return(t=Array.prototype.slice.apply(t)).forEach(function(e){r.push(JSON.stringify(e))}),e+"("+(n=r.join(","))+")"}o.prototype.get=function(e){if(e&&this._entries[e])return this._entries[e];var t=new i;return this._entries[e]=t,t},o.prototype.clear=function(e){for(var t in this._entries)e&&0!==t.indexOf(e)||this._entries[t].clear()},o.prototype.makeResponseCacheable=function(e,t,r){var n=this;return r=r||{},function(){var i=Array.prototype.slice.apply(arguments),o=i.pop();"function"!=typeof o&&(i.push(o),o=null);var a,u,c="string"==typeof r.key||r.key instanceof String?r.key:"function"==typeof r.key?r.key.apply(t,i):s(r.namespace,i),l=n.get(c);l.fetching=!0,o&&i.push(function(e,t){l.set({error:e,result:t}),o(e,t)});try{a=e.apply(t||this,i)}catch(e){u=e}if(a&&"function"==typeof a.then)return o?a:a.then(function(e){return l.set({error:void 0,result:e}),e},function(e){throw l.set({error:e,result:void 0}),e});if(l.set({error:u,result:a}),u)throw u;return a}},o.prototype.makeCacheable=function(e,t,r){var n=this;r=r||{};var i=function(){var i=Array.prototype.slice.apply(arguments),o=i.pop();"function"!=typeof o&&i.push(o);var a="string"==typeof r.key?r.key:"function"==typeof r.key?r.key.apply(t,i):s(r.namespace,i),u=n.get(a);if("function"!=typeof o){var c=u.get();if(!c)throw new Error("Function call result is not cached yet.");if(c.error)throw c.error;return c.result}u.get(function(e){o(e.error,e.result)}),u.fetching||(u.fetching=!0,i.push(function(e,t){u.set({error:e,result:t})}),e.apply(t||this,i))};return i.clear=function(){var e="string"==typeof r.key?r.key:"function"==typeof r.key?r.key.apply(t,arguments):s(r.namespace,arguments);n.clear(e)},i},e.exports=o},function(e,t,r){"use strict";var n=r(3),i=r(7),o=r(11),s=function(e,t){t=t||{},this._conn=e,this.on("resume",function(t){e.emit("resume",t)}),this._responseType=t.responseType,this._transport=t.transport||e._transport,this._noContentResponse=t.noContentResponse};function a(e){return JSON.parse(e)}function u(e){return e}n(s,i.EventEmitter),s.prototype.request=function(e,t){var r=this,n=this._conn,i=n._logger,s=this.getRefreshDelegate(),a=n.instanceUrl,u=o.defer(),c=function(t){t?u.reject(t):(a!==n.instanceUrl&&(e.url=e.url.replace(a,n.instanceUrl)),r.request(e).then(function(e){u.resolve(e)},function(e){u.reject(e)}))};if(s&&s._refreshing)return s.once("resume",c),u.promise.thenCall(t);r.beforeSend(e),r.emit("request",e),i.debug("<request> method="+e.method+", url="+e.url);var l=Date.now();return this._transport.httpRequest(e).then(function(t){var n=Date.now();if(i.debug("elappsed time : "+(n-l)+"msec"),i.debug("<response> status="+t.statusCode+", url="+e.url),r.emit("response",t),r.isSessionExpired(t)&&s)return s.refresh(l,c),u.promise;if(r.isErrorResponse(t))throw r.getError(t);return r.getResponseBody(t)},function(e){var t=Date.now();throw i.debug("elappsed time : "+(t-l)+"msec"),i.error(e),e}).thenCall(t)},s.prototype.getRefreshDelegate=function(){return this._conn._refreshDelegate},s.prototype.beforeSend=function(e){if(e.headers=e.headers||{},this._conn.accessToken&&(e.headers.Authorization="Bearer "+this._conn.accessToken),this._conn.callOptions){var t=[];for(var r in this._conn.callOptions)t.push(r+"="+this._conn.callOptions[r]);e.headers["Sforce-Call-Options"]=t.join(", ")}},s.prototype.getResponseContentType=function(e){return this._responseType||e.headers&&e.headers["content-type"]},s.prototype.parseResponseBody=function(e){var t=this.getResponseContentType(e),r=/^application\/json(;|$)/.test(t)?a:u;try{return r(e.body)}catch(t){return e.body}},s.prototype.getResponseBody=function(e){if(204===e.statusCode)return this._noContentResponse;var t,r=this.parseResponseBody(e);if(this.hasErrorInResponseBody(r))throw t=this.getError(e,r);if(300===e.statusCode)throw(t=new Error("Multiple records found")).name="MULTIPLE_CHOICES",t.content=r,t;return r},s.prototype.isSessionExpired=function(e){return 401===e.statusCode},s.prototype.isErrorResponse=function(e){return e.statusCode>=400},s.prototype.hasErrorInResponseBody=function(e){return!1},s.prototype.parseError=function(e){var t=e;return Array.isArray(t)?t[0]:t},s.prototype.getError=function(e,t){var r;try{r=this.parseError(t||this.parseResponseBody(e))}catch(e){}r="object"==typeof r&&"string"==typeof r.message?r:{errorCode:"ERROR_HTTP_"+e.statusCode,message:e.body};var n=new Error(r.message);for(var i in n.name=r.errorCode,r)n[i]=r[i];return n};var c=function(e,t){this._conn=e,this._refreshFn=t,this._refreshing=!1};n(c,i.EventEmitter),c.prototype.refresh=function(e,t){if(this._lastRefreshedAt>e)return t();var r=this,n=this._conn,i=n._logger;return r.once("resume",t),r._refreshing?void 0:(i.debug("<refresh token>"),r._refreshing=!0,r._refreshFn(n,function(e,t,o){e||(i.debug("Connection refresh completed."),n.accessToken=t,n.emit("refresh",t,o)),r._lastRefreshedAt=Date.now(),r._refreshing=!1,r.emit("resume",e)}))},s.SessionRefreshDelegate=c,e.exports=s},,function(e,t,r){(function(e){var n=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++)r[t[n]]=Object.getOwnPropertyDescriptor(e,t[n]);return r},i=/%[sdj%]/g;t.format=function(e){if(!g(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(a(arguments[r]));return t.join(" ")}r=1;for(var n=arguments,o=n.length,s=String(e).replace(i,function(e){if("%%"===e)return"%";if(r>=o)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}}),u=n[r];r<o;u=n[++r])m(u)||!I(u)?s+=" "+u:s+=" "+a(u);return s},t.deprecate=function(r,n){if(void 0!==e&&!0===e.noDeprecation)return r;if(void 0===e)return function(){return t.deprecate(r,n).apply(this,arguments)};var i=!1;return function(){if(!i){if(e.throwDeprecation)throw new Error(n);e.traceDeprecation?console.trace(n):console.error(n),i=!0}return r.apply(this,arguments)}};var o,s={};function a(e,r){var n={seen:[],stylize:c};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),f(r)?n.showHidden=r:r&&t._extend(n,r),v(n.showHidden)&&(n.showHidden=!1),v(n.depth)&&(n.depth=2),v(n.colors)&&(n.colors=!1),v(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=u),l(n,e,n.depth)}function u(e,t){var r=a.styles[t];return r?"["+a.colors[r][0]+"m"+e+"["+a.colors[r][1]+"m":e}function c(e,t){return e}function l(e,r,n){if(e.customInspect&&r&&P(r.inspect)&&r.inspect!==t.inspect&&(!r.constructor||r.constructor.prototype!==r)){var i=r.inspect(n,e);return g(i)||(i=l(e,i,n)),i}var o=function(e,t){if(v(t))return e.stylize("undefined","undefined");if(g(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(y(t))return e.stylize(""+t,"number");if(f(t))return e.stylize(""+t,"boolean");if(m(t))return e.stylize("null","null")}(e,r);if(o)return o;var s=Object.keys(r),a=function(e){var t={};return e.forEach(function(e,r){t[e]=!0}),t}(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(r)),w(r)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return d(r);if(0===s.length){if(P(r)){var u=r.name?": "+r.name:"";return e.stylize("[Function"+u+"]","special")}if(b(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(_(r))return e.stylize(Date.prototype.toString.call(r),"date");if(w(r))return d(r)}var c,I="",S=!1,C=["{","}"];(p(r)&&(S=!0,C=["[","]"]),P(r))&&(I=" [Function"+(r.name?": "+r.name:"")+"]");return b(r)&&(I=" "+RegExp.prototype.toString.call(r)),_(r)&&(I=" "+Date.prototype.toUTCString.call(r)),w(r)&&(I=" "+d(r)),0!==s.length||S&&0!=r.length?n<0?b(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special"):(e.seen.push(r),c=S?function(e,t,r,n,i){for(var o=[],s=0,a=t.length;s<a;++s)A(t,String(s))?o.push(h(e,t,r,n,String(s),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(h(e,t,r,n,i,!0))}),o}(e,r,n,a,s):s.map(function(t){return h(e,r,n,a,t,S)}),e.seen.pop(),function(e,t,r){if(e.reduce(function(e,t){return 0,t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60)return r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1];return r[0]+t+" "+e.join(", ")+" "+r[1]}(c,I,C)):C[0]+I+C[1]}function d(e){return"["+Error.prototype.toString.call(e)+"]"}function h(e,t,r,n,i,o){var s,a,u;if((u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?a=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(a=e.stylize("[Setter]","special")),A(n,i)||(s="["+i+"]"),a||(e.seen.indexOf(u.value)<0?(a=m(r)?l(e,u.value,null):l(e,u.value,r-1)).indexOf("\n")>-1&&(a=o?a.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+a.split("\n").map(function(e){return"   "+e}).join("\n")):a=e.stylize("[Circular]","special")),v(s)){if(o&&i.match(/^\d+$/))return a;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function p(e){return Array.isArray(e)}function f(e){return"boolean"==typeof e}function m(e){return null===e}function y(e){return"number"==typeof e}function g(e){return"string"==typeof e}function v(e){return void 0===e}function b(e){return I(e)&&"[object RegExp]"===S(e)}function I(e){return"object"==typeof e&&null!==e}function _(e){return I(e)&&"[object Date]"===S(e)}function w(e){return I(e)&&("[object Error]"===S(e)||e instanceof Error)}function P(e){return"function"==typeof e}function S(e){return Object.prototype.toString.call(e)}function C(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(r){if(v(o)&&(o=e.env.NODE_DEBUG||""),r=r.toUpperCase(),!s[r])if(new RegExp("\\b"+r+"\\b","i").test(o)){var n=e.pid;s[r]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",r,n,e)}}else s[r]=function(){};return s[r]},t.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=p,t.isBoolean=f,t.isNull=m,t.isNullOrUndefined=function(e){return null==e},t.isNumber=y,t.isString=g,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=v,t.isRegExp=b,t.isObject=I,t.isDate=_,t.isError=w,t.isFunction=P,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=r(52);var T=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function A(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",function(){var e=new Date,t=[C(e.getHours()),C(e.getMinutes()),C(e.getSeconds())].join(":");return[e.getDate(),T[e.getMonth()],t].join(" ")}(),t.format.apply(t,arguments))},t.inherits=r(53),t._extend=function(e,t){if(!t||!I(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e};var E="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function R(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(E&&e[E]){var t;if("function"!=typeof(t=e[E]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,E,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,r,n=new Promise(function(e,n){t=e,r=n}),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push(function(e,n){e?r(e):t(n)});try{e.apply(this,i)}catch(e){r(e)}return n}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),E&&Object.defineProperty(t,E,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,n(e))},t.promisify.custom=E,t.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function r(){for(var r=[],n=0;n<arguments.length;n++)r.push(arguments[n]);var i=r.pop();if("function"!=typeof i)throw new TypeError("The last argument must be of type Function");var o=this,s=function(){return i.apply(o,arguments)};t.apply(this,r).then(function(t){e.nextTick(s,null,t)},function(t){e.nextTick(R,t,s)})}return Object.setPrototypeOf(r,Object.getPrototypeOf(t)),Object.defineProperties(r,n(t)),r}}).call(this,r(5))},,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.queryStringEncode=function(e,t=!0,r){let n;return(n=Object.entries(e).filter(([e])=>!r||0===r.length||r.indexOf(e)>=0).map(([e,t])=>`${e}=${encodeURIComponent(String(t))}`).join("&"))?(t&&(n=`?${n}`),n):""}},function(e,t,r){"use strict";e.exports="1.9.2"},function(e,t,r){"use strict";(function(t){var n=r(7),i=r(18),o=(r(11),r(37)),s=r(23),a=r(26),u=(r(45),r(29)),c=r(24),l=r(28),d="https://login.salesforce.com",h="",p="42.0",f=e.exports=function(e){e=e||{},this._logger=new o(e.logLevel);var t=e.oauth2||{loginUrl:e.loginUrl,clientId:e.clientId,clientSecret:e.clientSecret,redirectUri:e.redirectUri,proxyUrl:e.proxyUrl,httpProxy:e.httpProxy};this.oauth2=t=t instanceof s?t:new s(t),this.loginUrl=e.loginUrl||t.loginUrl||d,this.version=e.version||p,this.maxRequest=e.maxRequest||this.maxRequest||10,e.proxyUrl?this._transport=new c.ProxyTransport(e.proxyUrl):e.httpProxy?this._transport=new c.HttpProxyTransport(e.httpProxy):this._transport=new c,this.callOptions=e.callOptions,r(22).emit("connection:new",this),this.cache=new l;var n=e.refreshFn;!n&&this.oauth2.clientId&&(n=m),n&&(this._refreshDelegate=new u.SessionRefreshDelegate(this,n));var i={key:function(e){return e?"describe."+e:"describe"}};this.describe$=this.cache.makeCacheable(this.describe,this,i),this.describe=this.cache.makeResponseCacheable(this.describe,this,i),this.describeSObject$=this.describe$,this.describeSObject=this.describe,i={key:"describeGlobal"},this.describeGlobal$=this.cache.makeCacheable(this.describeGlobal,this,i),this.describeGlobal=this.cache.makeResponseCacheable(this.describeGlobal,this,i),this.initialize(e)};function m(e,t){e.oauth2.refreshToken(e.refreshToken,function(r,n){if(r)return t(r);var i=y(n.id);e.initialize({instanceUrl:n.instance_url,accessToken:n.access_token,userInfo:i}),t(null,n.access_token,n)})}function y(e){var t=e.split("/");return{id:t.pop(),organizationId:t.pop(),url:e}}function g(e){return e&&String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}i(f,n.EventEmitter),f.prototype.initialize=function(e){if(!e.instanceUrl&&e.serverUrl&&(e.instanceUrl=e.serverUrl.split("/").slice(0,3).join("/")),this.instanceUrl=e.instanceUrl||e.serverUrl||this.instanceUrl||h,this.accessToken=e.sessionId||e.accessToken||this.accessToken,this.refreshToken=e.refreshToken||this.refreshToken,this.refreshToken&&!this._refreshDelegate)throw new Error("Refresh token is specified without oauth2 client information or refresh function");this.signedRequest=e.signedRequest&&function(e){if("string"==typeof e){if("{"===e[0])return JSON.parse(e);var r=e.split(".").pop(),n=t.from(r,"base64").toString("utf-8");return JSON.parse(n)}return e}(e.signedRequest),this.signedRequest&&(this.accessToken=this.signedRequest.client.oauthToken,c.CanvasTransport.supported&&(this._transport=new c.CanvasTransport(this.signedRequest))),e.userInfo&&(this.userInfo=e.userInfo),this.limitInfo={},this.sobjects={},this.cache.clear(),this.cache.get("describeGlobal").removeAllListeners("value"),this.cache.get("describeGlobal").on("value",function(e){e.result&&e.result.sobjects.map(e=>e.name).forEach(this.sobject,this)}.bind(this)),this.tooling&&this.tooling.initialize(),this._sessionType=e.sessionId?"soap":"oauth2"},f.prototype._baseUrl=function(){return[this.instanceUrl,"services/data","v"+this.version].join("/")},f.prototype._normalizeUrl=function(e){return"/"===e[0]?0===e.indexOf("/services/")?this.instanceUrl+e:this._baseUrl()+e:e},f.prototype.request=function(e,t,r){"function"==typeof t&&(r=t,t=null),t=t||{};var n=this;"string"==typeof e&&(e={method:"GET",url:e}),e.url=this._normalizeUrl(e.url);var i=new u(this,t);return i.on("response",function(e){if(e.headers&&e.headers["sforce-limit-info"]){var t=e.headers["sforce-limit-info"].match(/api\-usage=(\d+)\/(\d+)/);t&&(n.limitInfo={apiUsage:{used:parseInt(t[1],10),limit:parseInt(t[2],10)}})}}),i.request(e).thenCall(r)},f.prototype.query=function(e,t,r){"function"==typeof t&&(r=t,t=void 0);var n=new a(this,e,t);return r&&n.run(r),n},f.prototype.search=function(e,t){var r=this._baseUrl()+"/search?q="+encodeURIComponent(e);return this.request(r).thenCall(t)},f.prototype.login=function(e,t,r){return this._refreshDelegate=new u.SessionRefreshDelegate(this,function(e,t){return function(r,n){r.login(e,t,function(e){if(e)return n(e);n(null,r.accessToken)})}}(e,t)),this.oauth2&&this.oauth2.clientId&&this.oauth2.clientSecret?this.loginByOAuth2(e,t,r):this.loginBySoap(e,t,r)},f.prototype.loginByOAuth2=function(e,t,r){var n=this,i=this._logger;return this.oauth2.authenticate(e,t).then(function(e){var t=y(e.id);return n.initialize({instanceUrl:e.instance_url,accessToken:e.access_token,userInfo:t}),i.debug("<login> completed. user id = "+t.id+", org id = "+t.organizationId),t}).thenCall(r)},f.prototype.loginBySoap=function(e,t,r){var n=this,i=this._logger,o=['<se:Envelope xmlns:se="http://schemas.xmlsoap.org/soap/envelope/">',"<se:Header/>","<se:Body>",'<login xmlns="urn:partner.soap.sforce.com">',"<username>"+g(e)+"</username>","<password>"+g(t)+"</password>","</login>","</se:Body>","</se:Envelope>"].join(""),s=[this.loginUrl,"services/Soap/u",this.version].join("/");return this._transport.httpRequest({method:"POST",url:s,body:o,headers:{"Content-Type":"text/xml",SOAPAction:'""'}}).then(function(e){var t;if(e.statusCode>=400){var r=(t=e.body.match(/<faultstring>([^<]+)<\/faultstring>/))&&t[1];throw new Error(r||e.body)}i.debug("SOAP response = "+e.body);var o=(t=e.body.match(/<serverUrl>([^<]+)<\/serverUrl>/))&&t[1],a=(t=e.body.match(/<sessionId>([^<]+)<\/sessionId>/))&&t[1],u=(t=e.body.match(/<userId>([^<]+)<\/userId>/))&&t[1],c=(t=e.body.match(/<organizationId>([^<]+)<\/organizationId>/))&&t[1],l=s.split("/").slice(0,3).join("/"),d={id:u,organizationId:c,url:l+="/id/"+c+"/"+u};return n.initialize({serverUrl:o.split("/").slice(0,3).join("/"),sessionId:a,userInfo:d}),i.debug("<login> completed. user id = "+u+", org id = "+c),d}).thenCall(r)},f.prototype.logout=function(e,t){return"function"==typeof e&&(t=e,e=!1),"oauth2"===this._sessionType?this.logoutByOAuth2(e,t):this.logoutBySoap(e,t)},f.prototype.logoutByOAuth2=function(e,t){"function"==typeof e&&(t=e,e=!1);var r=this;this._logger;return this.oauth2.revokeToken(e?this.refreshToken:this.accessToken).then(function(){r.accessToken=null,r.userInfo=null,r.refreshToken=null,r.instanceUrl=null,r.cache.clear()}).thenCall(t)},f.prototype.logoutBySoap=function(e,t){"function"==typeof e&&(t=e,e=!1);var r=this,n=this._logger,i=['<se:Envelope xmlns:se="http://schemas.xmlsoap.org/soap/envelope/">',"<se:Header>",'<SessionHeader xmlns="urn:partner.soap.sforce.com">',"<sessionId>"+g(e?this.refreshToken:this.accessToken)+"</sessionId>","</SessionHeader>","</se:Header>","<se:Body>",'<logout xmlns="urn:partner.soap.sforce.com"/>',"</se:Body>","</se:Envelope>"].join("");return this._transport.httpRequest({method:"POST",url:[this.instanceUrl,"services/Soap/u",this.version].join("/"),body:i,headers:{"Content-Type":"text/xml",SOAPAction:'""'}}).then(function(e){if(n.debug("SOAP statusCode = "+e.statusCode+", response = "+e.body),e.statusCode>=400){var t=e.body.match(/<faultstring>([^<]+)<\/faultstring>/),i=t&&t[1];throw new Error(i||e.body)}r.accessToken=null,r.userInfo=null,r.refreshToken=null,r.instanceUrl=null,r.cache.clear()}).thenCall(t)}}).call(this,r(17).Buffer)},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t,r){"use strict";var n=e.exports=function(e){"string"==typeof e&&(e=i[e]),e||(e=i.INFO),this._logLevel=e},i=n.LogLevels={DEBUG:1,INFO:2,WARN:3,ERROR:4,FATAL:5};for(var o in n.prototype.log=function(e,t){this._logLevel<=e&&(e<i.ERROR?console.log(t):console.error(t))},i)n.prototype[o.toLowerCase()]=s(i[o]);function s(e){return function(t){this.log(e,t)}}},function(e,t,r){"use strict";(function(t,n){var i=r(20);e.exports=b;var o,s=r(36);b.ReadableState=v;r(7).EventEmitter;var a=function(e,t){return e.listeners(t).length},u=r(39),c=r(25).Buffer,l=t.Uint8Array||function(){};var d=Object.create(r(14));d.inherits=r(3);var h=r(67),p=void 0;p=h&&h.debuglog?h.debuglog("stream"):function(){};var f,m=r(68),y=r(40);d.inherits(b,u);var g=["error","close","destroy","pause","resume"];function v(e,t){o=o||r(12),e=e||{};var n=t instanceof o;this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var i=e.highWaterMark,s=e.readableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n&&(s||0===s)?s:a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(f||(f=r(42).StringDecoder),this.decoder=new f(e.encoding),this.encoding=e.encoding)}function b(e){if(o=o||r(12),!(this instanceof b))return new b(e);this._readableState=new v(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),u.call(this)}function I(e,t,r,n,i){var o,s=e._readableState;null===t?(s.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,S(e)}(e,s)):(i||(o=function(e,t){var r;(function(e){return c.isBuffer(e)||e instanceof l})(t)||"string"==typeof t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk"));return r}(s,t)),o?e.emit("error",o):s.objectMode||t&&t.length>0?("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===c.prototype||(t=function(e){return c.from(e)}(t)),n?s.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):_(e,s,t,!0):s.ended?e.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!r?(t=s.decoder.write(t),s.objectMode||0!==t.length?_(e,s,t,!1):T(e,s)):_(e,s,t,!1))):n||(s.reading=!1));return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(s)}function _(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&S(e)),T(e,t)}Object.defineProperty(b.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),b.prototype.destroy=y.destroy,b.prototype._undestroy=y.undestroy,b.prototype._destroy=function(e,t){this.push(null),t(e)},b.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=c.from(e,t),t=""),r=!0),I(this,e,t,!1,r)},b.prototype.unshift=function(e){return I(this,e,null,!0,!1)},b.prototype.isPaused=function(){return!1===this._readableState.flowing},b.prototype.setEncoding=function(e){return f||(f=r(42).StringDecoder),this._readableState.decoder=new f(e),this._readableState.encoding=e,this};var w=8388608;function P(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=w?e=w:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function S(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(p("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?i.nextTick(C,e):C(e))}function C(e){p("emit readable"),e.emit("readable"),O(e)}function T(e,t){t.readingMore||(t.readingMore=!0,i.nextTick(A,e,t))}function A(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(p("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function E(e){p("readable nexttick read 0"),e.read(0)}function R(e,t){t.reading||(p("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),O(e),t.flowing&&!t.reading&&e.read(0)}function O(e){var t=e._readableState;for(p("flow",t.flowing);t.flowing&&null!==e.read(););}function x(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=function(e,t,r){var n;e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):n=e===t.head.data.length?t.shift():r?function(e,t){var r=t.head,n=1,i=r.data;e-=i.length;for(;r=r.next;){var o=r.data,s=e>o.length?o.length:e;if(s===o.length?i+=o:i+=o.slice(0,e),0===(e-=s)){s===o.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(s));break}++n}return t.length-=n,i}(e,t):function(e,t){var r=c.allocUnsafe(e),n=t.head,i=1;n.data.copy(r),e-=n.data.length;for(;n=n.next;){var o=n.data,s=e>o.length?o.length:e;if(o.copy(r,r.length-e,0,s),0===(e-=s)){s===o.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(s));break}++i}return t.length-=i,r}(e,t);return n}(e,t.buffer,t.decoder),r);var r}function j(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,i.nextTick(D,t,e))}function D(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function M(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}b.prototype.read=function(e){p("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return p("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?j(this):S(this),null;if(0===(e=P(e,t))&&t.ended)return 0===t.length&&j(this),null;var n,i=t.needReadable;return p("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&p("length less than watermark",i=!0),t.ended||t.reading?p("reading or ended",i=!1):i&&(p("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=P(r,t))),null===(n=e>0?x(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&j(this)),null!==n&&this.emit("data",n),n},b.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},b.prototype.pipe=function(e,t){var r=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=e;break;case 1:o.pipes=[o.pipes,e];break;default:o.pipes.push(e)}o.pipesCount+=1,p("pipe count=%d opts=%j",o.pipesCount,t);var u=(!t||!1!==t.end)&&e!==n.stdout&&e!==n.stderr?l:b;function c(t,n){p("onunpipe"),t===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,p("cleanup"),e.removeListener("close",g),e.removeListener("finish",v),e.removeListener("drain",d),e.removeListener("error",y),e.removeListener("unpipe",c),r.removeListener("end",l),r.removeListener("end",b),r.removeListener("data",m),h=!0,!o.awaitDrain||e._writableState&&!e._writableState.needDrain||d())}function l(){p("onend"),e.end()}o.endEmitted?i.nextTick(u):r.once("end",u),e.on("unpipe",c);var d=function(e){return function(){var t=e._readableState;p("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&a(e,"data")&&(t.flowing=!0,O(e))}}(r);e.on("drain",d);var h=!1;var f=!1;function m(t){p("ondata"),f=!1,!1!==e.write(t)||f||((1===o.pipesCount&&o.pipes===e||o.pipesCount>1&&-1!==M(o.pipes,e))&&!h&&(p("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,f=!0),r.pause())}function y(t){p("onerror",t),b(),e.removeListener("error",y),0===a(e,"error")&&e.emit("error",t)}function g(){e.removeListener("finish",v),b()}function v(){p("onfinish"),e.removeListener("close",g),b()}function b(){p("unpipe"),r.unpipe(e)}return r.on("data",m),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?s(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",y),e.once("close",g),e.once("finish",v),e.emit("pipe",r),o.flowing||(p("pipe resume"),r.resume()),e},b.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r),this);if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,r);return this}var s=M(t.pipes,e);return-1===s?this:(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r),this)},b.prototype.on=function(e,t){var r=u.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&S(this):i.nextTick(E,this))}return r},b.prototype.addListener=b.prototype.on,b.prototype.resume=function(){var e=this._readableState;return e.flowing||(p("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,i.nextTick(R,e,t))}(this,e)),this},b.prototype.pause=function(){return p("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(p("pause"),this._readableState.flowing=!1,this.emit("pause")),this},b.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",function(){if(p("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(i){(p("wrapped data"),r.decoder&&(i=r.decoder.write(i)),!r.objectMode||null!==i&&void 0!==i)&&((r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause())))}),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<g.length;o++)e.on(g[o],this.emit.bind(this,g[o]));return this._read=function(t){p("wrapped _read",t),n&&(n=!1,e.resume())},this},Object.defineProperty(b.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),b._fromList=x}).call(this,r(8),r(5))},function(e,t,r){e.exports=r(7).EventEmitter},function(e,t,r){"use strict";var n=r(20);function i(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var r=this,o=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return o||s?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||n.nextTick(i,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(n.nextTick(i,r,e),r._writableState&&(r._writableState.errorEmitted=!0)):t&&t(e)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(e,t,r){"use strict";(function(t,n,i){var o=r(20);function s(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;e.entry=null;for(;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}e.exports=v;var a,u=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?n:o.nextTick;v.WritableState=g;var c=Object.create(r(14));c.inherits=r(3);var l={deprecate:r(72)},d=r(39),h=r(25).Buffer,p=i.Uint8Array||function(){};var f,m=r(40);function y(){}function g(e,t){a=a||r(12),e=e||{};var n=t instanceof a;this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var i=e.highWaterMark,c=e.writableHighWaterMark,l=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n&&(c||0===c)?c:l,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var d=!1===e.decodeStrings;this.decodeStrings=!d,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,n,i){--t.pendingcb,r?(o.nextTick(i,n),o.nextTick(S,e,t),e._writableState.errorEmitted=!0,e.emit("error",n)):(i(n),e._writableState.errorEmitted=!0,e.emit("error",n),S(e,t))}(e,r,n,t,i);else{var s=w(r);s||r.corked||r.bufferProcessing||!r.bufferedRequest||_(e,r),n?u(I,e,r,s,i):I(e,r,s,i)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}function v(e){if(a=a||r(12),!(f.call(v,this)||this instanceof a))return new v(e);this._writableState=new g(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),d.call(this)}function b(e,t,r,n,i,o,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function I(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),S(e,t)}function _(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),o=t.corkedRequestsFree;o.entry=r;for(var a=0,u=!0;r;)i[a]=r,r.isBuf||(u=!1),r=r.next,a+=1;i.allBuffers=u,b(e,t,!0,t.length,i,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new s(t),t.bufferedRequestCount=0}else{for(;r;){var c=r.chunk,l=r.encoding,d=r.callback;if(b(e,t,!1,t.objectMode?1:c.length,c,l,d),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function w(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function P(e,t){e._final(function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),S(e,t)})}function S(e,t){var r=w(t);return r&&(!function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,o.nextTick(P,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),r}c.inherits(v,d),g.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(g.prototype,"buffer",{get:l.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(f=Function.prototype[Symbol.hasInstance],Object.defineProperty(v,Symbol.hasInstance,{value:function(e){return!!f.call(this,e)||this===v&&(e&&e._writableState instanceof g)}})):f=function(e){return e instanceof this},v.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},v.prototype.write=function(e,t,r){var n=this._writableState,i=!1,s=!n.objectMode&&function(e){return h.isBuffer(e)||e instanceof p}(e);return s&&!h.isBuffer(e)&&(e=function(e){return h.from(e)}(e)),"function"==typeof t&&(r=t,t=null),s?t="buffer":t||(t=n.defaultEncoding),"function"!=typeof r&&(r=y),n.ended?function(e,t){var r=new Error("write after end");e.emit("error",r),o.nextTick(t,r)}(this,r):(s||function(e,t,r,n){var i=!0,s=!1;return null===r?s=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||t.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(e.emit("error",s),o.nextTick(n,s),i=!1),i}(this,n,e,r))&&(n.pendingcb++,i=function(e,t,r,n,i,o){if(!r){var s=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=h.from(t,r));return t}(t,n,i);n!==s&&(r=!0,i="buffer",n=s)}var a=t.objectMode?1:n.length;t.length+=a;var u=t.length<t.highWaterMark;u||(t.needDrain=!0);if(t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else b(e,t,!1,a,n,i,o);return u}(this,n,s,e,t,r)),i},v.prototype.cork=function(){this._writableState.corked++},v.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||_(this,e))},v.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(v.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),v.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))},v.prototype._writev=null,v.prototype.end=function(e,t,r){var n=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!==e&&void 0!==e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||function(e,t,r){t.ending=!0,S(e,t),r&&(t.finished?o.nextTick(r):e.once("finish",r));t.ended=!0,e.writable=!1}(this,n,r)},Object.defineProperty(v.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),v.prototype.destroy=m.destroy,v.prototype._undestroy=m.undestroy,v.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,r(5),r(70).setImmediate,r(8))},function(e,t,r){"use strict";var n=r(73).Buffer,i=n.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(n.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=u,this.end=c,t=4;break;case"utf8":this.fillLast=a,t=4;break;case"base64":this.text=l,this.end=d,t=3;break;default:return this.write=h,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(t)}function s(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function a(e){var t=this.lastTotal-this.lastNeed,r=function(e,t,r){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}(this,e);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function u(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function c(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function l(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function d(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function h(e){return e.toString(this.encoding)}function p(e){return e&&e.length?this.write(e):""}t.StringDecoder=o,o.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},o.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(n<r)return 0;var i=s(t[n]);if(i>=0)return i>0&&(e.lastNeed=i-1),i;if(--n<r||-2===i)return 0;if((i=s(t[n]))>=0)return i>0&&(e.lastNeed=i-2),i;if(--n<r||-2===i)return 0;if((i=s(t[n]))>=0)return i>0&&(2===i?i=0:e.lastNeed=i-3),i;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},function(e,t,r){"use strict";e.exports=o;var n=r(12),i=Object.create(r(14));function o(e){if(!(this instanceof o))return new o(e);n.call(this,e),this._transformState={afterTransform:function(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",s)}function s(){var e=this;"function"==typeof this._flush?this._flush(function(t,r){a(e,t,r)}):a(this,null,null)}function a(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}i.inherits=r(3),i.inherits(o,n),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,n.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")},o.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},o.prototype._destroy=function(e,t){var r=this;n.prototype._destroy.call(this,e,function(e){t(e),r.emit("close")})}},function(e,t,r){"use strict";var n=r(27);function i(e){var t=["SELECT ",function(e,t){let r=[];return(t=t||[]).forEach(e=>{r.push("("+i(cquery)+")")}),(e||["Id"]).concat(r).join(", ")}(e.fields,e.includes)," FROM ",e.table].join(""),r=function e(t,r,n){if("string"==typeof t)return t;t=t||[];r=r||"AND";n=n||0;t=a(t)?t.map(function(e){var t=[];for(var r in e)t.push({key:r,value:e[r]});return t.length>1?t:t[0]}):Object.keys(t).map(function(e){return{key:e,value:t[e]}});t=t.map(function(i){var a,u=n+1;switch(i.key){case"$or":case"$and":case"$not":return"NOT"!==r&&1===t.length&&(u=n),a="$or"===i.key?"OR":"$and"===i.key?"AND":"NOT",e(i.value,a,u);default:return function(e,t){var r="$eq";if(Array.isArray(t))r="$in";else if("object"==typeof t){for(var n in t)if("$"===n[0]){r=n,t=t[n];break}}var i=o[r];if(!i||void 0===t)return null;var a=s(t);if(void 0===a)return null;switch(i){case"NOT LIKE":return"("+["NOT",e,"LIKE",a].join(" ")+")";case"EXISTS":return[e,t?"!=":"=","null"].join(" ");default:return[e,i,a].join(" ")}}(i.key,i.value)}}).filter(function(e){return e});var i;return"NOT"===r?((i=n>0)?"(":"")+"NOT "+t[0]+(i?")":""):((i=n>0&&t.length>1)?"(":"")+t.join(" "+r+" ")+(i?")":"")}(e.conditions);r&&(t+=" WHERE "+r);var n=function(e){if("string"==typeof(e=e||[])){if(/,|\s+(asc|desc)\s*$/.test(e))return e;e=e.split(/\s+/).map(function(e){var t="ASC",r=e[0];return"-"===r?(t="DESC",e=e.substring(1)):"+"===r&&(e=e.substring(1)),[e,t]})}else a(e)||(e=Object.keys(e).map(function(t){var r=e[t];return[t,r]}));return e.map(function(e){var t=e[0],r=e[1];switch(String(r)){case"DESC":case"desc":case"descending":case"-":case"-1":r="DESC";break;default:r="ASC"}return t+" "+r}).join(", ")}(e.sort);return n&&(t+=" ORDER BY "+n),e.limit&&(t+=" LIMIT "+e.limit),e.offset&&(t+=" OFFSET "+e.offset),t}var o={"=":"=",$eq:"=","!=":"!=",$ne:"!=",">":">",$gt:">","<":"<",$lt:"<",">=":">=",$gte:">=","<=":"<=",$lte:"<=",$like:"LIKE",$nlike:"NOT LIKE",$in:"IN",$nin:"NOT IN",$includes:"INCLUDES",$excludes:"EXCLUDES",$exists:"EXISTS"};function s(e){return a(e)?e.length>0?"("+e.map(s).join(", ")+")":void 0:e instanceof n?e.toString():"string"==typeof e?"'"+function(e){return String(e||"").replace(/'/g,"\\'")}(e)+"'":"number"==typeof e?e.toString():null===e?"null":e}function a(e){return"object"==typeof e&&"function"==typeof e.pop}t.createSOQL=i},function(e,t,r){"use strict";var n=r(46),i=r(26),o=(r(28),e.exports=function(e,t){this._conn=e,this.type=t;var r={key:"describe."+this.type};this.describe$=e.cache.makeCacheable(this.describe,this,r),this.describe=e.cache.makeResponseCacheable(this.describe,this,r),r={key:"layouts."+this.type},this.layouts$=e.cache.makeCacheable(this.layouts,this,r),this.layouts=e.cache.makeResponseCacheable(this.layouts,this,r),r={key:"compactLayouts."+this.type},this.compactLayouts$=e.cache.makeCacheable(this.compactLayouts,this,r),this.compactLayouts=e.cache.makeResponseCacheable(this.compactLayouts,this,r),r={key:"approvalLayouts."+this.type},this.approvalLayouts$=e.cache.makeCacheable(this.approvalLayouts,this,r),this.approvalLayouts=e.cache.makeResponseCacheable(this.approvalLayouts,this,r)});o.prototype.insert=o.prototype.create=function(e,t,r){return"function"==typeof t&&(r=t,t={}),this._conn.create(this.type,e,t,r)},o.prototype.retrieve=function(e,t,r){return"function"==typeof t&&(r=t,t={}),this._conn.retrieve(this.type,e,t,r)},o.prototype.update=function(e,t,r){return"function"==typeof t&&(r=t,t={}),this._conn.update(this.type,e,t,r)},o.prototype.upsert=function(e,t,r,n){return"function"==typeof r&&(n=r,r={}),this._conn.upsert(this.type,e,t,r,n)},o.prototype.delete=o.prototype.del=o.prototype.destroy=function(e,t,r){return"function"==typeof t&&(r=t,t={}),this._conn.destroy(this.type,e,t,r)},o.prototype.describe=function(e){return this._conn.describe(this.type,e)},o.prototype.record=function(e){return new n(this._conn,this.type,e)},o.prototype.find=function(e,t,r,n){"function"==typeof e?(n=e,e={},t=null,r=null):"function"==typeof t?(n=t,t=null,r=null):"function"==typeof r&&(n=r,r=null);var o={fields:t,includes:(r=r||{}).includes,table:this.type,conditions:e,limit:r.limit,sort:r.sort,offset:r.offset||r.skip},s=new i(this._conn,o,r);return s.setResponseTarget(i.ResponseTargets.Records),n&&s.run(n),s},o.prototype.findOne=function(e,t,r,n){"function"==typeof e?(n=e,e={},t=null,r=null):"function"==typeof t?(n=t,t=null,r=null):"function"==typeof r&&(n=r,r=null),r=Object.assign(r||{},{limit:1});var o=this.find(e,t,r);return o.setResponseTarget(i.ResponseTargets.SingleRecord),n&&o.run(n),o},o.prototype.select=function(e,t){return this.find(null,e,null,t)},o.prototype.count=function(e,t){"function"==typeof e&&(t=e,e={});var r=this.find(e,{"count()":!0});return r.setResponseTarget("Count"),t&&r.run(t),r},o.prototype.recent=function(e){return this._conn.recent(this.type,e)},o.prototype.updated=function(e,t,r){return this._conn.updated(this.type,e,t,r)},o.prototype.deleted=function(e,t,r){return this._conn.deleted(this.type,e,t,r)},o.prototype.layouts=function(e,t){"function"==typeof e&&(t=e,e=null);var r="/sobjects/"+this.type+"/describe/"+(e?"namedLayouts/"+e:"layouts");return this._conn.request(r,t)},o.prototype.compactLayouts=function(e){var t="/sobjects/"+this.type+"/describe/compactLayouts";return this._conn.request(t,e)},o.prototype.approvalLayouts=function(e){var t="/sobjects/"+this.type+"/describe/approvalLayouts";return this._conn.request(t,e)},o.prototype.listviews=function(e){var t=this._conn._baseUrl()+"/sobjects/"+this.type+"/listviews";return this._conn.request(t,e)},o.prototype.listview=function(e){return new s(this._conn,this.type,e)};var s=function(e,t,r){this._conn=e,this.type=t,this.id=r};s.prototype.results=function(e){var t=this._conn._baseUrl()+"/sobjects/"+this.type+"/listviews/"+this.id+"/results";return this._conn.request(t,e)},s.prototype.describe=function(e,t){"function"==typeof e&&(t=e,e={}),e=e||{};var r=this._conn._baseUrl()+"/sobjects/"+this.type+"/listviews/"+this.id+"/describe";return this._conn.request({method:"GET",url:r,headers:e.headers},t)},s.prototype.explain=function(e){var t="/query/?explain="+this.id;return this._conn.request(t,e)}},function(e,t,r){"use strict";var n=e.exports=function(e,t,r){this._conn=e,this.type=t,this.id=r};n.prototype.retrieve=function(e,t){return"function"==typeof e&&(t=e,e={}),this._conn.retrieve(this.type,this.id,e,t)},n.prototype.update=function(e,t,r){return"function"==typeof t&&(r=t,t={}),e.Id=this.id,this._conn.update(this.type,e,t,r)},n.prototype.delete=n.prototype.del=n.prototype.destroy=function(e,t){return"function"==typeof e&&(t=e,e={}),this._conn.destroy(this.type,this.id,e,t)},n.prototype.blob=function(e){var t=[this._conn._baseUrl(),"sobjects",this.type,this.id,e].join("/");return this._conn.request(t).stream()}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(31),i=r(1),o=r(9);t.BaseSDK=class{constructor(){this.sdkVersion="1.0.0"}static extend(e){if(!n.isObject(e))throw new Error("Extend method expects an object with functions as properties");Object.keys(e).filter(t=>n.isFunction(e[t])).forEach(t=>{this.prototype.hasOwnProperty(t)?i.Logger.log(`SDK extend method failed to extend ${t} as it already exists`):this.prototype[t]=e[t]})}static override(e){if(!n.isObject(e))throw new Error("Override method expects an object with properties");Object.assign(this.prototype,e)}version(){return this.sdkVersion}get namespace(){return o.SalesForceNamespace.namespace}set namespace(e){o.SalesForceNamespace.namespace=e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.GET="GET",e.HEAD="HEAD",e.POST="POST",e.PUT="PUT",e.DELETE="DELETE",e.CONNECT="CONNECT",e.OPTIONS="OPTIONS",e.TRACE="TRACE",e.PATCH="PATCH"}(t.HttpMethod||(t.HttpMethod={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(2);t.RestInput=class extends n.BaseDataSourceInput{constructor(e){super(e.cacheable,e.cacheExpiration,e.retryCount,e.timeoutInMillis,e.reload,e.cacheType),this.url=e.url,this.options=e.options}digest(){return super.digestData(this.url,JSON.stringify(this.options))}}},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.debug=0]="debug",e[e.log=1]="log",e[e.info=2]="info",e[e.warn=3]="warn",e[e.error=4]="error",e[e.none=5]="none"}(n=t.LogLevel||(t.LogLevel={}));class i{static debug(...e){i.emitLogMessage("debug",e)}static info(...e){i.emitLogMessage("info",e)}static log(...e){i.emitLogMessage("log",e)}static warn(...e){i.emitLogMessage("warn",e)}static error(...e){i.emitLogMessage("error",e)}static getLogLevel(){return this.debugLevel}static setLogLevel(e){if(!(e in n))throw new Error("Invalid value `value` assigned to `logLevel`");this.debugLevel=e}static emitLogMessage(e,t){n[e]<i.debugLevel||console[e](...t)}}t.Logger=i,i.debugLevel=n.info},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SDKConfig=class{}},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},function(e,t,r){"use strict";var n=r(22),i=function(e){this._conn=e};i.prototype._baseUrl=function(){return this._conn.instanceUrl+"/services/apexrest"},i.prototype._createRequestParams=function(e,t,r,n){var i={method:e,url:this._baseUrl()+t},o={};return n&&"object"==typeof n.headers&&(o=n.headers),/^(GET|DELETE)$/i.test(e)||(o["Content-Type"]="application/json"),i.headers=o,r&&(i.body=JSON.stringify(r)),i},i.prototype.get=function(e,t,r){return"function"==typeof t&&(r=t,t=void 0),this._conn.request(this._createRequestParams("GET",e,void 0,t)).thenCall(r)},i.prototype.post=function(e,t,r,n){"function"==typeof t&&(n=t,t=void 0,r=void 0),"function"==typeof r&&(n=r,r=void 0);var i=this._createRequestParams("POST",e,t,r);return this._conn.request(i).thenCall(n)},i.prototype.put=function(e,t,r,n){"function"==typeof t&&(n=t,t=void 0,r=void 0),"function"==typeof r&&(n=r,r=void 0);var i=this._createRequestParams("PUT",e,t,r);return this._conn.request(i).thenCall(n)},i.prototype.patch=function(e,t,r,n){"function"==typeof t&&(n=t,t=void 0,r=void 0),"function"==typeof r&&(n=r,r=void 0);var i=this._createRequestParams("PATCH",e,t,r);return this._conn.request(i).thenCall(n)},i.prototype.del=i.prototype.delete=function(e,t,r){return"function"==typeof t&&(r=t,t=void 0),this._conn.request(this._createRequestParams("DELETE",e,void 0,t)).thenCall(r)},n.on("connection:new",function(e){e.apex=new i(e)}),e.exports=i},,function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):function(e){return e instanceof r?e:new r(function(t){t(e)})}(e.value).then(s,a)}u((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=r(16),o=r(4);class s{constructor(e=!1,t=s.DEFAULT_CACHE_EXPIRATION,r=o.default.defaultRetryCount,n=o.default.defaultTimeout,a=!1,u=i.CacheType.INDEXEDDB){this.cacheable=e,this.cacheExpiration=t,this.retryCount=r,this.timeoutInMillis=n,this.reload=a,this.cacheType=u}digestData(...e){return n(this,void 0,void 0,function*(){const t=(new TextEncoder).encode(e.join(","));return crypto.subtle.digest("SHA-256",t).then(e=>this.hexString(e))})}hexString(e){return[...new Uint8Array(e)].map(e=>{return e.toString(16).padStart(2,"0")}).join("")}}t.BaseDataSourceInput=s,s.DEFAULT_CACHE_EXPIRATION=new Date((new Date).getTime()+3e5)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(161);t.B2BInput=class{constructor(){this.remoteClass="CpqAppHandler",this.customFields=[],this.columns=[],this.cacheable=!1,this.reload=!1,this.timeoutInMillis=2e4,this.contentType="application/json",this.ipMethod="",this.bundleName=""}getAuthorisationType(){return n.default.authTokenType?n.default.authTokenType:"Basic "}getRemoteMethod(){return this.actionObj?this.actionObj.remote.methodName:this.remoteMethod}findLineItem(e,t){if(e.Id.value===t)return e;if(e.productGroups)for(let r=0;r<e.productGroups.records.length;r++){const n=this.findLineItem(e.productGroups.records[r],t);if(n)return n}if(e.lineItems)for(let r=0;r<e.lineItems.records.length;r++){const n=this.findLineItem(e.lineItems.records[r],t);if(n)return n}if(e.childProducts)for(let r=0;r<e.childProducts.records.length;r++){const n=this.findLineItem(e.childProducts.records[r],t);if(n)return n}}cloneDeep(e){return JSON.parse(JSON.stringify(e))}}},function(e,t,r){"use strict";t.byteLength=function(e){var t=c(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,n=c(e),s=n[0],a=n[1],u=new o(function(e,t,r){return 3*(t+r)/4-r}(0,s,a)),l=0,d=a>0?s-4:s;for(r=0;r<d;r+=4)t=i[e.charCodeAt(r)]<<18|i[e.charCodeAt(r+1)]<<12|i[e.charCodeAt(r+2)]<<6|i[e.charCodeAt(r+3)],u[l++]=t>>16&255,u[l++]=t>>8&255,u[l++]=255&t;2===a&&(t=i[e.charCodeAt(r)]<<2|i[e.charCodeAt(r+1)]>>4,u[l++]=255&t);1===a&&(t=i[e.charCodeAt(r)]<<10|i[e.charCodeAt(r+1)]<<4|i[e.charCodeAt(r+2)]>>2,u[l++]=t>>8&255,u[l++]=255&t);return u},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,o=[],s=0,a=r-i;s<a;s+=16383)o.push(d(e,s,s+16383>a?a:s+16383));1===i?(t=e[r-1],o.push(n[t>>2]+n[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],o.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return o.join("")};for(var n=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=s.length;a<u;++a)n[a]=s[a],i[s.charCodeAt(a)]=a;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function l(e){return n[e>>18&63]+n[e>>12&63]+n[e>>6&63]+n[63&e]}function d(e,t,r){for(var n,i=[],o=t;o<r;o+=3)n=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),i.push(l(n));return i.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
t.read=function(e,t,r,n,i){var o,s,a=8*i-n-1,u=(1<<a)-1,c=u>>1,l=-7,d=r?i-1:0,h=r?-1:1,p=e[t+d];for(d+=h,o=p&(1<<-l)-1,p>>=-l,l+=a;l>0;o=256*o+e[t+d],d+=h,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=n;l>0;s=256*s+e[t+d],d+=h,l-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,n),o-=c}return(p?-1:1)*s*Math.pow(2,o-n)},t.write=function(e,t,r,n,i,o){var s,a,u,c=8*o-i-1,l=(1<<c)-1,d=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,f=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),(t+=s+d>=1?h/u:h*Math.pow(2,1-d))*u>=2&&(s++,u/=2),s+d>=l?(a=0,s=l):s+d>=1?(a=(t*u-1)*Math.pow(2,i),s+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,i),s=0));i>=8;e[r+p]=255&a,p+=f,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;e[r+p]=255&s,p+=f,s/=256,c-=8);e[r+p-f]|=128*m}},function(e,t,r){"use strict";var n=r(61);e.exports=n;var i=l(!0),o=l(!1),s=l(null),a=l(void 0),u=l(0),c=l("");function l(e){var t=new n(n._61);return t._65=1,t._55=e,t}n.resolve=function(e){if(e instanceof n)return e;if(null===e)return s;if(void 0===e)return a;if(!0===e)return i;if(!1===e)return o;if(0===e)return u;if(""===e)return c;if("object"==typeof e||"function"==typeof e)try{var t=e.then;if("function"==typeof t)return new n(t.bind(e))}catch(e){return new n(function(t,r){r(e)})}return l(e)},n.all=function(e){var t=Array.prototype.slice.call(e);return new n(function(e,r){if(0===t.length)return e([]);var i=t.length;function o(s,a){if(a&&("object"==typeof a||"function"==typeof a)){if(a instanceof n&&a.then===n.prototype.then){for(;3===a._65;)a=a._55;return 1===a._65?o(s,a._55):(2===a._65&&r(a._55),void a.then(function(e){o(s,e)},r))}var u=a.then;if("function"==typeof u)return void new n(u.bind(a)).then(function(e){o(s,e)},r)}t[s]=a,0==--i&&e(t)}for(var s=0;s<t.length;s++)o(s,t[s])})},n.reject=function(e){return new n(function(t,r){r(e)})},n.race=function(e){return new n(function(t,r){e.forEach(function(e){n.resolve(e).then(t,r)})})},n.prototype.catch=function(e){return this.then(null,e)}},function(e,t,r){"use strict";var n=r(62);function i(){}var o=null,s={};function a(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("Promise constructor's argument is not a function");this._40=0,this._65=0,this._55=null,this._72=null,e!==i&&p(e,this)}function u(e,t){for(;3===e._65;)e=e._55;if(a._37&&a._37(e),0===e._65)return 0===e._40?(e._40=1,void(e._72=t)):1===e._40?(e._40=2,void(e._72=[e._72,t])):void e._72.push(t);!function(e,t){n(function(){var r=1===e._65?t.onFulfilled:t.onRejected;if(null!==r){var n=function(e,t){try{return e(t)}catch(e){return o=e,s}}(r,e._55);n===s?l(t.promise,o):c(t.promise,n)}else 1===e._65?c(t.promise,e._55):l(t.promise,e._55)})}(e,t)}function c(e,t){if(t===e)return l(e,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"==typeof t||"function"==typeof t)){var r=function(e){try{return e.then}catch(e){return o=e,s}}(t);if(r===s)return l(e,o);if(r===e.then&&t instanceof a)return e._65=3,e._55=t,void d(e);if("function"==typeof r)return void p(r.bind(t),e)}e._65=1,e._55=t,d(e)}function l(e,t){e._65=2,e._55=t,a._87&&a._87(e,t),d(e)}function d(e){if(1===e._40&&(u(e,e._72),e._72=null),2===e._40){for(var t=0;t<e._72.length;t++)u(e,e._72[t]);e._72=null}}function h(e,t,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=r}function p(e,t){var r=!1,n=function(e,t,r){try{e(t,r)}catch(e){return o=e,s}}(e,function(e){r||(r=!0,c(t,e))},function(e){r||(r=!0,l(t,e))});r||n!==s||(r=!0,l(t,o))}e.exports=a,a._37=null,a._87=null,a._61=i,a.prototype.then=function(e,t){if(this.constructor!==a)return function(e,t,r){return new e.constructor(function(n,o){var s=new a(i);s.then(n,o),u(e,new h(t,r,s))})}(this,e,t);var r=new a(i);return u(this,new h(e,t,r)),r}},function(e,t,r){"use strict";(function(t){function r(e){i.length||(n(),!0),i[i.length]=e}e.exports=r;var n,i=[],o=0,s=1024;function a(){for(;o<i.length;){var e=o;if(o+=1,i[e].call(),o>s){for(var t=0,r=i.length-o;t<r;t++)i[t]=i[t+o];i.length-=o,o=0}}i.length=0,o=0,!1}var u=void 0!==t?t:self,c=u.MutationObserver||u.WebKitMutationObserver;function l(e){return function(){var t=setTimeout(n,0),r=setInterval(n,50);function n(){clearTimeout(t),clearInterval(r),e()}}}n="function"==typeof c?function(e){var t=1,r=new c(e),n=document.createTextNode("");return r.observe(n,{characterData:!0}),function(){t=-t,n.data=t}}(a):l(a),r.requestFlush=n,r.makeRequestCallFromTimer=l}).call(this,r(8))},function(e,t,r){"use strict";t.decode=t.parse=r(64),t.encode=t.stringify=r(65)},function(e,t,r){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,r,o){t=t||"&",r=r||"=";var s={};if("string"!=typeof e||0===e.length)return s;var a=/\+/g;e=e.split(t);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var c=e.length;u>0&&c>u&&(c=u);for(var l=0;l<c;++l){var d,h,p,f,m=e[l].replace(a,"%20"),y=m.indexOf(r);y>=0?(d=m.substr(0,y),h=m.substr(y+1)):(d=m,h=""),p=decodeURIComponent(d),f=decodeURIComponent(h),n(s,p)?i(s[p])?s[p].push(f):s[p]=[s[p],f]:s[p]=f}return s};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,r){"use strict";var n=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,r,a){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?o(s(e),function(s){var a=encodeURIComponent(n(s))+r;return i(e[s])?o(e[s],function(e){return a+encodeURIComponent(n(e))}).join(t):a+encodeURIComponent(n(e[s]))}).join(t):a?encodeURIComponent(n(a))+r+encodeURIComponent(n(e)):""};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function o(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var s=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},function(e,t,r){"use strict";var n=r(19).Duplex;e.exports=function(e,t){var r,i=new XMLHttpRequest;if(i.open(e.method,e.url),e.headers)for(var o in e.headers)i.setRequestHeader(o,e.headers[o]);i.setRequestHeader("Accept","*/*");var s=new n;s._read=function(e){r&&s.push(r.body)};var a=[],u=!1;return s._write=function(e,t,r){a.push(e.toString("buffer"===t?"binary":t)),r()},s.on("finish",function(){u||(i.send(a.join("")),u=!0)}),!e.body&&""!==e.body&&/^(put|post|patch)$/i.test(e.method)||(i.send(e.body),u=!0),i.onreadystatechange=function(){if(4===i.readyState){var e={};(function(e){var t=[];return(e.getAllResponseHeaders()||"").split(/[\r\n]+/).forEach(function(e){t.push(e.split(/\s*:/)[0].toLowerCase())}),t})(i).forEach(function(t){t&&(e[t]=i.getResponseHeader(t))}),(r={statusCode:i.status,headers:e,body:i.response||i.responseText}).statusCode||(r.statusCode=400,r.body="Access Declined"),t&&t(null,r,r.body),s.end()}},s}},function(e,t){},function(e,t,r){"use strict";var n=r(25).Buffer,i=r(69);function o(e,t,r){e.copy(t,r)}e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},e.prototype.concat=function(e){if(0===this.length)return n.alloc(0);if(1===this.length)return this.head.data;for(var t=n.allocUnsafe(e>>>0),r=this.head,i=0;r;)o(r.data,t,i),i+=r.data.length,r=r.next;return t},e}(),i&&i.inspect&&i.inspect.custom&&(e.exports.prototype[i.inspect.custom]=function(){var e=i.inspect({length:this.length});return this.constructor.name+" "+e})},function(e,t){},function(e,t,r){(function(e){var n=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(i.call(setTimeout,n,arguments),clearTimeout)},t.setInterval=function(){return new o(i.call(setInterval,n,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(n,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},r(71),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,r(8))},function(e,t,r){(function(e,t){!function(e,r){"use strict";if(!e.setImmediate){var n,i=1,o={},s=!1,a=e.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(e);u=u&&u.setTimeout?u:e,"[object process]"==={}.toString.call(e.process)?n=function(e){t.nextTick(function(){l(e)})}:function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?function(){var t="setImmediate$"+Math.random()+"$",r=function(r){r.source===e&&"string"==typeof r.data&&0===r.data.indexOf(t)&&l(+r.data.slice(t.length))};e.addEventListener?e.addEventListener("message",r,!1):e.attachEvent("onmessage",r),n=function(r){e.postMessage(t+r,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){l(e.data)},n=function(t){e.port2.postMessage(t)}}():a&&"onreadystatechange"in a.createElement("script")?function(){var e=a.documentElement;n=function(t){var r=a.createElement("script");r.onreadystatechange=function(){l(t),r.onreadystatechange=null,e.removeChild(r),r=null},e.appendChild(r)}}():n=function(e){setTimeout(l,0,e)},u.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var s={callback:e,args:t};return o[i]=s,n(i),i++},u.clearImmediate=c}function c(e){delete o[e]}function l(e){if(s)setTimeout(l,0,e);else{var t=o[e];if(t){s=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(r,n)}}(t)}finally{c(e),s=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,r(8),r(5))},function(e,t,r){(function(t){function r(e){try{if(!t.localStorage)return!1}catch(e){return!1}var r=t.localStorage[e];return null!=r&&"true"===String(r).toLowerCase()}e.exports=function(e,t){if(r("noDeprecation"))return e;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}}}).call(this,r(8))},function(e,t,r){
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
var n=r(17),i=n.Buffer;function o(e,t){for(var r in e)t[r]=e[r]}function s(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(o(n,t),t.Buffer=s),s.prototype=Object.create(i.prototype),o(i,s),s.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,r)},s.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=i(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},function(e,t,r){"use strict";e.exports=o;var n=r(43),i=Object.create(r(14));function o(e){if(!(this instanceof o))return new o(e);n.call(this,e)}i.inherits=r(3),i.inherits(o,n),o.prototype._transform=function(e,t,r){r(null,e)}},function(e,t,r){"use strict";var n=r(19).Duplex;e.exports={supported:"object"==typeof Sfdc&&void 0!==Sfdc.canvas,createRequest:function(e){return function(t,r){var i,o=new n;o._read=function(e){i&&o.push(i.body)};var s=[],a=!1;function u(n){var s={client:e.client,method:t.method,data:n};if(t.headers)for(var a in s.headers={},t.headers)"content-type"===a.toLowerCase()?s.contentType=t.headers[a]:s.headers[a]=t.headers[a];s.success=function(e){var t=function(e){var t={};return e.split(/\n/).forEach(function(e){var r=e.split(/\s*:\s*/),n=r[0].toLowerCase(),i=r[1];t[n]=i}),t}(e.responseHeaders),n=e.payload;"string"==typeof n||n instanceof String||(n=JSON.stringify(n)),i={statusCode:e.status,headers:t,body:n},r&&r(null,i,i.body),o.end()},s.failure=function(e){r&&r(e)},Sfdc.canvas.client.ajax(t.url,s)}return o._write=function(e,t,r){s.push(e.toString(t)),r()},o.on("finish",function(){a||(u(s.join("")),a=!0)}),!t.body&&""!==t.body&&/^(put|post|patch)$/i.test(t.method)||(u(t.body),a=!0),o}}}},function(e,t,r){"use strict";var n=0;e.exports={supported:"undefined"!=typeof window&&"undefined"!=typeof document,createRequest:function(e,t){return e=e||"callback",t=t||1e4,function(r,i){if("GET"!==r.method.toUpperCase())return i(new Error("JSONP only supports GET request."));var o="_jsforce_jsonpCallback_"+ ++n,s=window,a=r.url;a+=a.indexOf("?")>0?"&":"?",a+=e+"="+o;var u=document.createElement("script");u.type="text/javascript",u.src=a,document.documentElement.appendChild(u);var c=setTimeout(function(){l(),i(new Error("JSONP call time out."))},t);s[o]=function(e){l(),i(null,{statusCode:200,headers:{"content-type":"application/json"},body:JSON.stringify(e)})};var l=function(){clearTimeout(c),document.documentElement.removeChild(u),delete s[o]}}}}},function(e,t,r){"use strict";var n=r(78);e.exports=function(e){"./jsforce"!==e&&"jsforce"!==e||(e="./core");var t=n[e];if(void 0===t)throw new Error("Cannot find module '"+e+"'");return t}},function(e,t,r){"use strict";e.exports={inherits:r(3),util:r(31),events:r(7),"readable-stream":r(19),"./VERSION":r(34),"./cache":r(28),"./connection":r(35),"./core":r(22),"./date":r(27),"./http-api":r(29),"./inherits":r(18),"./logger":r(37),"./oauth2":r(23),"./promise":r(11),"./query":r(26),"./record":r(46),"./soap":r(79),"./sobject":r(45),"./soql-builder":r(44),"./transport":r(24)}},function(e,t,r){"use strict";var n=r(18),i=r(29),o=e.exports=function(e,t){o.super_.apply(this,arguments),this._endpointUrl=t.endpointUrl,this._xmlns=t.xmlns||"urn:partner.soap.sforce.com"};function s(e,t){var r=t.shift();if(r){for(var n in e)if(r.test(n))return s(e[n],t);return null}return e}function a(e,t){if("object"==typeof e&&(t=e,e=null),Array.isArray(t)){let r=[];return t.forEach(function(t){r.push(a(e,t))}),r.join("")}var r=[],n=[];if("object"==typeof t){for(var i in t){var o=t[i];"@"===i[0]?(i=i.substring(1),r.push(i+'="'+o+'"')):n.push(a(i,o))}t=n.join("")}else t=String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;");return(e?"<"+e+(r.length>0?" "+r.join(" "):"")+">":"")+t+(e?"</"+e+">":"")}n(o,i),o.prototype.invoke=function(e,t,r,n){"function"==typeof r&&(n=r,r=null);var i={};return i[e]=t,this.request({method:"POST",url:this._endpointUrl,headers:{"Content-Type":"text/xml",SOAPAction:'""'},message:i}).then(function(e){return r?function e(t,r){if(Array.isArray(t))return t.map(function(t){return e(t,r&&r[0])});if("object"==typeof t){if(t.$&&"true"===t.$["xsi:nil"])return null;if(Array.isArray(r))return[e(t,r[0])];var n={};for(var i in t)n[i]=e(t[i],r&&r[i]);return n}if(Array.isArray(r))return[e(t,r[0])];if("object"==typeof r)return{};switch(r){case"string":return String(t);case"number":return Number(t);case"boolean":return"true"===t;default:return t}}(e,r):e}).thenCall(n)},o.prototype.beforeSend=function(e){e.body=this._createEnvelope(e.message)},o.prototype.isSessionExpired=function(e){return 500===e.statusCode&&/<faultcode>[a-zA-Z]+:INVALID_SESSION_ID<\/faultcode>/.test(e.body)},o.prototype.parseError=function(e){var t=s(e,[/:Envelope$/,/:Body$/,/:Fault$/]);return{errorCode:t.faultcode,message:t.faultstring}},o.prototype.getResponseBody=function(e){return s(o.super_.prototype.getResponseBody.call(this,e),[/:Envelope$/,/:Body$/,/.+/])},o.prototype._createEnvelope=function(e){var t={},r=this._conn;return r.accessToken&&(t.SessionHeader={sessionId:this._conn.accessToken}),r.callOptions&&(t.CallOptions=r.callOptions),['<?xml version="1.0" encoding="UTF-8"?>','<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"',' xmlns:xsd="http://www.w3.org/2001/XMLSchema"',' xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">','<soapenv:Header xmlns="'+this._xmlns+'">',a(t),"</soapenv:Header>",'<soapenv:Body xmlns="'+this._xmlns+'">',a(e),"</soapenv:Body>","</soapenv:Envelope>"].join("")}},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):function(e){return e instanceof r?e:new r(function(t){t(e)})}(e.value).then(s,a)}u((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=r(9),o=r(1),s=r(4),a=r(13);t.ApexRemoteDataSource=class{constructor(e,t,r,n){this.connection=e,this.input=t,this.input.retryCount=void 0!==this.input.retryCount?this.input.retryCount:s.default.defaultRetryCount,this.input.timeoutInMillis=void 0!==this.input.timeoutInMillis?this.input.timeoutInMillis:s.default.defaultTimeout,this.dataSourceDB=r,this.inPlatformData=n}execute(){return n(this,void 0,void 0,function*(){try{if(o.Logger.log("ApexRemote",this.input),"function"==typeof this.inPlatformData){const e=this.inPlatformData,t={type:"apexremote",value:{className:this.input.className,methodName:this.input.methodName,inputMap:JSON.stringify(this.input.inputMap),optionsMap:this.input.optionsMap}},r=yield e(JSON.stringify(t));return JSON.parse(r)}if(this.inPlatformData)return this.inPlatformData;if(a.isNode||"function"!=typeof this.input.digest)return this.visualForceRemoteInvoke(this.input);{const e=yield this.input.digest();return this.dataSourceDB.getDataFromCache(e,this.input.reload,this.input.cacheType).catch(()=>this.visualForceRemoteInvoke(this.input).then(t=>n(this,void 0,void 0,function*(){return this.dataSourceDB.getCacheableValue(this.input.cacheable,this.connection?this.connection.instanceUrl:"")&&(yield this.dataSourceDB.setCache(e,t,this.input.cacheExpiration,this.input.cacheType)),t})).catch(e=>e))}}catch(e){let t="object"==typeof e&&null!==e?JSON.stringify(e):e;return Promise.reject(new Error(t))}})}visualForceRemoteInvoke(e){const t=`${i.SalesForceNamespace.namespace}.${e.className}.${e.methodName}`,r=Object.assign(Object.assign({},{escape:!1}),e.config);return new Promise((n,i)=>{Visualforce.remoting.timeout=this.input.timeoutInMillis,Visualforce.remoting.Manager.invokeAction(t,...this.input.paramsArray||[],(t,r)=>{if(o.Logger.log(t),"string"==typeof t&&(t=JSON.parse(t)),r.statusCode<400)n(t);else{if(404===r.statusCode&&0!==this.input.retryCount)return--this.input.retryCount,s.default.addRetryDelay().then(()=>this.visualForceRemoteInvoke(e));i(r)}},r)}).catch(e=>Promise.reject(new Error(e)))}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(2);t.ApexRemoteInput=class extends n.BaseDataSourceInput{constructor(e){super(e.cacheable,e.cacheExpiration,e.retryCount,e.timeoutInMillis,e.reload,e.cacheType),this.optionsMap={},this.className=e.className,this.methodName=e.methodName,this.paramsArray=e.paramsArray,this.config=e.config,this.inputMap=e.inputMap}digest(){return super.digestData(this.className,this.methodName,JSON.stringify(this.paramsArray),this.inputMap)}}},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):function(e){return e instanceof r?e:new r(function(t){t(e)})}(e.value).then(s,a)}u((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),r(54);const i=r(0),o=r(1),s=r(4),a=r(13),u=r(15),c="Request timed out";t.ApexRestDataSource=class{constructor(e,t,r,n){this.connection=e,this.input=t,this.input.retryCount=void 0!==this.input.retryCount?this.input.retryCount:s.default.defaultRetryCount,this.input.timeoutInMillis=void 0!==this.input.timeoutInMillis?this.input.timeoutInMillis:s.default.defaultTimeout,this.dataSourceDB=r,this.inPlatformData=n}execute(){return n(this,void 0,void 0,function*(){o.Logger.log("In ApexRest",this.input);try{if(this.inPlatformData)return this.inPlatformData;if(a.isNode||"function"!=typeof this.input.digest)return this.jsforceApexRest(this.input);{const e=yield this.input.digest();return this.dataSourceDB.getDataFromCache(e,this.input.reload,this.input.cacheType).catch(()=>this.jsforceApexRest(this.input).then(t=>n(this,void 0,void 0,function*(){return this.dataSourceDB.getCacheableValue(this.input.cacheable,this.connection.instanceUrl)&&(this.input.method===i.HttpMethod.GET||this.input.method===i.HttpMethod.POST)&&(yield this.dataSourceDB.setCache(e,t,this.input.cacheExpiration,this.input.cacheType)),t})).catch(e=>e))}}catch(e){let t="object"==typeof e&&null!==e?JSON.stringify(e):e;return Promise.reject(new Error(t))}})}jsforceApexRest(e){const t={method:i.HttpMethod.GET,options:{},path:""},r=new u.ApexRestInput(t);let n=new u.ApexRestInput(Object.assign(Object.assign({},r),e));return new Promise((t,r)=>{let i=setTimeout(()=>{r(new Error(c))},this.input.timeoutInMillis);"get"===n.method.toLowerCase()?this.connection.apex.get(n.path,n.options,(a,u)=>{if(clearTimeout(i),a){if(0!==this.input.retryCount)return--this.input.retryCount,s.default.addRetryDelay().then(()=>this.jsforceApexRest(e));o.Logger.log("ApexRest failed",n,a),r(a)}o.Logger.log("ApexRest is successful",n,u),t(u)}):"delete"===n.method.toLowerCase()?this.connection.apex[n.method.toLowerCase()](n.path,n.options,(a,u)=>{if(clearTimeout(i),a){if(0!==this.input.retryCount)return--this.input.retryCount,s.default.addRetryDelay().then(()=>this.jsforceApexRest(e).then(t).catch(r));o.Logger.log("ApexRest failed",n,a),r(a)}o.Logger.log("ApexRest is successful",n,u),t(u)}):this.connection.apex[n.method.toLowerCase()](n.path,n.body,n.options,(a,u)=>{if(clearTimeout(i),a){if(0!==this.input.retryCount)return--this.input.retryCount,s.default.addRetryDelay().then(()=>this.jsforceApexRest(e).then(t).catch(r));o.Logger.log("ApexRest failed",n,a),r(a)}o.Logger.log("ApexRest is successful",n,u),t(u)})}).catch(t=>{if(t.message===c&&this.input.retryCount>0)return--this.input.retryCount,s.default.addRetryDelay().then(()=>this.jsforceApexRest(e))})}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(2);t.ApexRestInput=class extends n.BaseDataSourceInput{constructor(e){super(e.cacheable,e.cacheExpiration,e.retryCount,e.timeoutInMillis,e.reload,e.cacheType),this.path=e.path,this.method=e.method,this.body=e.body,this.options=e.options}digest(){return super.digestData(this.path,this.method,this.body,this.options?JSON.stringify(this.options):"")}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(2);t.SoqlInput=class extends n.BaseDataSourceInput{constructor(e){super(e.cacheable,e.cacheExpiration,e.retryCount,e.timeoutInMillis,e.reload,e.cacheType),this.query=e.query}digest(){return super.digestData(this.query)}}},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(86)),n(r(84))},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):function(e){return e instanceof r?e:new r(function(t){t(e)})}(e.value).then(s,a)}u((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=r(1),o=r(2),s=r(4),a=r(13),u="Request timed out";t.SoqlDataSource=class{constructor(e,t,r,n){this.connection=e,this.input=t,this.input.retryCount=void 0!==this.input.retryCount?this.input.retryCount:s.default.defaultRetryCount,this.input.timeoutInMillis=void 0!==this.input.timeoutInMillis?this.input.timeoutInMillis:s.default.defaultTimeout,this.dataSourceDB=r,this.inPlatformData=n}execute(){return n(this,void 0,void 0,function*(){i.Logger.log("In Soql",this.input);try{if("function"==typeof this.inPlatformData){const e=this.inPlatformData,t={type:"query",value:JSON.stringify(this.input.query)};return yield e(JSON.stringify(t))}if(this.inPlatformData)return this.inPlatformData;if(!a.isNode&&this.input instanceof o.BaseDataSourceInput){const e=yield this.input.digest();return this.dataSourceDB.getDataFromCache(e,this.input.reload,this.input.cacheType).catch(()=>this.jsforceSoql(this.input).then(t=>n(this,void 0,void 0,function*(){return(yield this.dataSourceDB.getCacheableValue(this.input.cacheable,this.connection.instanceUrl))&&(yield this.dataSourceDB.setCache(e,t,this.input.cacheExpiration,this.input.cacheType)),t})).catch(e=>e))}return this.jsforceSoql(this.input)}catch(e){let t="object"==typeof e&&null!==e?JSON.stringify(e):e;return Promise.reject(new Error(t))}})}jsforceSoql(e){return new Promise((t,r)=>{let n=setTimeout(()=>{r(new Error(u))},this.input.timeoutInMillis);this.connection.query(e.query,(o,a)=>{if(clearTimeout(n),o){if(0!==this.input.retryCount)return--this.input.retryCount,s.default.addRetryDelay().then(()=>this.jsforceSoql(e).then(t).catch(r));i.Logger.log("SOSL query failed",o),r(o)}t(a)})}).catch(t=>{if(t.message===u&&this.input.retryCount>0)return--this.input.retryCount,s.default.addRetryDelay().then(()=>this.jsforceSoql(e))})}}},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(88)),n(r(89))},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):function(e){return e instanceof r?e:new r(function(t){t(e)})}(e.value).then(s,a)}u((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=r(1),o=r(2),s=r(4),a=r(13),u="Request timed out";t.SoslDataSource=class{constructor(e,t,r,n){this.connection=e,this.input=t,this.input.retryCount=void 0!==this.input.retryCount?this.input.retryCount:s.default.defaultRetryCount,this.input.timeoutInMillis=void 0!==this.input.timeoutInMillis?this.input.timeoutInMillis:s.default.defaultTimeout,this.dataSourceDB=r,this.inPlatformData=n}execute(){return n(this,void 0,void 0,function*(){i.Logger.log("SOSL",this.input);try{if("function"==typeof this.inPlatformData){const e=this.inPlatformData,t={type:"search",value:JSON.stringify(this.input.query)};return yield e(JSON.stringify(t))}if(this.inPlatformData)return this.inPlatformData;if(!a.isNode&&this.input instanceof o.BaseDataSourceInput){const e=yield this.input.digest();return this.dataSourceDB.getDataFromCache(e,this.input.reload,this.input.cacheType).catch(()=>this.jsforceSosl(this.input).then(t=>n(this,void 0,void 0,function*(){return(yield this.dataSourceDB.getCacheableValue(this.input.cacheable,this.connection.instanceUrl))&&(yield this.dataSourceDB.setCache(e,t,this.input.cacheExpiration,this.input.cacheType)),t})).catch(e=>e))}return this.jsforceSosl(this.input)}catch(e){let t="object"==typeof e&&null!==e?JSON.stringify(e):e;return Promise.reject(new Error(t))}})}jsforceSosl(e){return new Promise((t,r)=>{let n=setTimeout(()=>{r(new Error(u))},this.input.timeoutInMillis);this.connection.search(this.escapeSOSLSearchCharacters(e.query),(o,a)=>{if(clearTimeout(n),o){if(0!==this.input.retryCount)return--this.input.retryCount,s.default.addRetryDelay().then(()=>this.jsforceSosl(e).then(t).catch(r));i.Logger.log("SOSL query failed",o),r(o)}t(a)})}).catch(t=>{if(t.message===u&&this.input.retryCount>0)return--this.input.retryCount,s.default.addRetryDelay().then(()=>this.jsforceSosl(e))})}escapeSOSLSearchCharacters(e){if(0===(e=e.trim()).search(/FIND\s*{/i)){const t=e.match(/{(.|[\r\n\s])+}/i);if(t&&t.length>=0){const r=t[0].substr(1,t[0].length-2).replace(/[-[\]&{}!()*:"'~\+\-\?.,\\^$|]/g,"\\$&");return e.replace(/FIND\s*{(.|\s)*}/i,`FIND {${r}}`)}return e}return e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(2);t.SoslInput=class extends n.BaseDataSourceInput{constructor(e){super(e.cacheable,e.cacheExpiration,e.retryCount,e.timeoutInMillis,e.reload,e.cacheType),this.query=e.query}digest(){return super.digestData(this.query)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.objectMap=function(e,t,r){const n=[];try{e.forEach(e=>{const i={};t.forEach(t=>{if(t){const r=function(e){const t=e.split("#"),r={customKey:null,key:t[0]};return t.length>1&&(r.customKey=t[1]),r}(t),n=(t=r.key).split(".");n.length>1?i[r.customKey||n[n.length-1]]=n.reduce((e,t)=>e[t],e):i[r.customKey||t]=e[t]}}),r?n.push(Object.values(i).toString()):n.push(i)})}catch(e){return[]}return JSON.parse(JSON.stringify(n))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(1);t.findProductGroup=function e(t,r){try{for(const n of r)if(n.Id===t[0]){if(n.childProducts)return n;if(n.productGroups)return e(t.slice(1),n.productGroups)}}catch(e){return n.Logger.info("@@@ here in catch",e),null}},t.sortItems=function(e,t,r){try{let n=[];return n=t?e.sort((e,r)=>e[t].toString().localeCompare(r[t].toString())):e.sort(),r?n.reverse():n}catch(t){return e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(93);r(54);const i=r(0),o=r(94),s=r(21),a=r(15),u=r(97),c=r(100),l=r(101),d=r(103),h=r(106),p=r(49),f=r(85),m=r(87),y=r(4);class g extends i.BaseSDK{constructor(e){if(super(),this.config=e,this.dataSourceDB=new o.default(this.config.dbName="IndexedResponseDB",this.config.storeName="DataSourceResponseStore"),this.dataSourceDB.createIndexedDBStore(),this.config&&this.config.jsforceConnection)this.connection=this.config.jsforceConnection;else if(this.config&&this.config.sessionId&&this.config.url){const e={serverUrl:this.config.url,sessionId:this.config.sessionId};this.config.proxyUrl&&(e.proxyUrl=this.config.proxyUrl),this.connection=new n.Connection(e)}}static getInstance(e){if(!g.instance&&!e)throw new Error("DataSource:getInstance: DataSource cannot be instantiated properly. DataSourceSDKConfig must be provided.");return(!g.instance||e&&e.create)&&(g.instance=new g(e)),g.instance}apexRemote(e){return new s.ApexRemoteDataSource(this.connection,e,this.dataSourceDB,this.config.inPlatformData)}apexRest(e){return new a.ApexRestDataSource(this.connection,e,this.dataSourceDB,this.config.inPlatformData)}rest(e){return new h.RestDataSource(e,this.dataSourceDB,this.config.inPlatformData)}soql(e){return new f.SoqlDataSource(this.connection,e,this.dataSourceDB,this.config.inPlatformData)}sosl(e){return new m.SoslDataSource(this.connection,e,this.dataSourceDB,this.config.inPlatformData)}dataRaptor(e){return new u.DataRaptor(this.connection,e,this.dataSourceDB,this.config.inPlatformData)}integrationProcedure(e){return new d.IntegrationProcedure(this.connection,e,this.dataSourceDB,this.config.inPlatformData)}dual(e,t){const r=new l.DualDataSource(this.connection,e,t,this.dataSourceDB,this.config.inPlatformData);return r.useRemote=this.config.useApexRemoteForDualDataSource,r}setRetryCount(e){y.default.setDefaultRetryCount(e)}setRequestTimeout(e){y.default.setDefaultTimeout(e)}getCacheData(e,t){return this.dataSourceDB.get(e,t)}setCacheData(e,t,r){return this.dataSourceDB.set(e,t,r)}deleteCacheData(e,t){return this.dataSourceDB.delete(e,t)}getCachedKeys(){return this.dataSourceDB.keys()}clearCache(){return this.dataSourceDB.clear()}getCachedResults(e,t){return this.dataSourceDB.getDataFromCache(e,!1,t)}setCachedResults(e,t,r,n){return this.dataSourceDB.setCache(e,t,r,n)}static createConfigForDatasourceUser(e,t,r){const n=new c.default;return n.sessionId=t,n.url=e,n.inPlatformData=r,n}apexRemoteInput(e){return new s.ApexRemoteInput(e)}apexRestInput(e){return new a.ApexRestInput(e)}dataRaptorInput(e){return new u.DataRaptorInput(e)}integrationProcedureInput(e){return new d.IntegrationProcedureInput(e)}restInput(e){return new p.RestInput(e)}soqlInput(e){return new f.SoqlInput(e)}soslInput(e){return new m.SoslInput(e)}static createConfigForLoginUser(e,t,r){return this.createConfigForDatasourceUser(e,t,r)}handleApexRemoteCall(e){return this.apexRemote(this.apexRemoteInput(e)).execute()}handleApexRestCall(e){return this.apexRest(this.apexRestInput(e)).execute()}handleDataRaptorCall(e){return this.dataRaptor(this.dataRaptorInput(e)).execute()}handleIntegrationProcedureCall(e){return this.integrationProcedure(this.integrationProcedureInput(e)).execute()}handleRestCall(e){return this.rest(this.restInput(e)).execute()}handleSoqlCall(e){return this.soql(this.soqlInput(e)).execute()}handleSoslCall(e){return this.sosl(this.soslInput(e)).execute()}}t.default=g},function(e,t,r){"use strict";var n=r(22);e.exports=n},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):function(e){return e instanceof r?e:new r(function(t){t(e)})}(e.value).then(s,a)}u((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=r(95),o=r(96),s=r(13),a=r(16),u="VlocitySDK";new Date((new Date).getTime()+3e5);class c{constructor(e,t){this.dbName=e,this.storeName=u+"."+t}createIndexedDBStore(){c.isIndexedDBAvailable&&(this.db=new i.Store(this.dbName,this.storeName))}get(e,t){return n(this,void 0,void 0,function*(){return s.isNode?Promise.reject():t&&t!==a.CacheType.INDEXEDDB?t===a.CacheType.LOCALSTORAGE?localStorage.getItem(e)?JSON.parse(localStorage.getItem(e)):null:t===a.CacheType.SESSIONSTORAGE?sessionStorage.getItem(e)?JSON.parse(sessionStorage.getItem(e)):null:void 0:c.isIndexedDBAvailable&&this.db?i.get(e,this.db):localStorage.getItem(e)?JSON.parse(localStorage.getItem(e)):null})}set(e,t,r){return n(this,void 0,void 0,function*(){return s.isNode?Promise.reject():r&&r!==a.CacheType.INDEXEDDB?r===a.CacheType.LOCALSTORAGE?localStorage.setItem(e,t):r===a.CacheType.SESSIONSTORAGE?sessionStorage.setItem(e,t):void 0:c.isIndexedDBAvailable&&this.db?i.set(e,t,this.db):localStorage.setItem(e,t)})}delete(e,t){return n(this,void 0,void 0,function*(){return s.isNode?Promise.reject():t&&t!==a.CacheType.INDEXEDDB?t===a.CacheType.LOCALSTORAGE?localStorage.removeItem(e):t===a.CacheType.SESSIONSTORAGE?sessionStorage.removeItem(e):void 0:c.isIndexedDBAvailable&&this.db?i.del(e,this.db):localStorage.removeItem(e)})}clear(){return n(this,void 0,void 0,function*(){i.clear(this.db)})}keys(){return n(this,void 0,void 0,function*(){return c.isIndexedDBAvailable?i.keys(this.db):Promise.reject()})}getCachedResults(e){return n(this,void 0,void 0,function*(){let t;return c.isIndexedDBAvailable?(t=yield this.get(e))&&t.cacheExpiration.getTime()>Date.now()?Promise.resolve(JSON.parse(t.result)):Promise.reject():Promise.reject(t)})}setResultsCache(e,t,r){return n(this,void 0,void 0,function*(){let n=new o.CacheResult;n.result=JSON.stringify(t),n.cacheExpiration=r||t.cacheExpiration,yield this.set(e,n)})}deleteDatabase(){return n(this,void 0,void 0,function*(){const e=indexedDB.deleteDatabase(this.dbName);return new Promise((t,r)=>{e.onerror=(e=>{r(e)}),e.onsuccess=(()=>{t()})})})}getCacheableValue(e,t){let r=!0;if(t&&t.split("?")[1]){const e=t.split("?")[1].toLowerCase(),n=e.includes("usecache=")?e.split("usecache=")[1].split("&")[0]:null;r=null===n||"true"===n}return e&&r}getDataFromCache(e,t,r){return n(this,void 0,void 0,function*(){return t||s.isNode?Promise.reject():r&&r!==a.CacheType.INDEXEDDB||!c.isIndexedDBAvailable?r===a.CacheType.LOCALSTORAGE?this.getCachedResultsLocalStorage(e):r===a.CacheType.SESSIONSTORAGE?this.getCachedResultsSessionStorage(e):Promise.reject():this.db?this.getCachedResults(e):this.getCachedResultsLocalStorage(e)})}setCache(e,t,r,i){return n(this,void 0,void 0,function*(){return s.isNode?Promise.reject():i&&i!==a.CacheType.INDEXEDDB?i===a.CacheType.LOCALSTORAGE?this.setResultsCacheLocalStorage(e,t,r):i===a.CacheType.SESSIONSTORAGE?this.setResultsCacheSessionStorage(e,t,r):void 0:this.db?this.setResultsCache(e,t,r):this.setResultsCacheLocalStorage(e,t,r)})}getCachedResultsLocalStorage(e){return n(this,void 0,void 0,function*(){let t;return(t=localStorage.getItem(e)?JSON.parse(localStorage.getItem(e)):null)&&new Date(t.cacheExpiration).getTime()>Date.now()?Promise.resolve(JSON.parse(t.result)):Promise.reject()})}setResultsCacheLocalStorage(e,t,r){return n(this,void 0,void 0,function*(){let n=new o.CacheResult;n.result=JSON.stringify(t),n.cacheExpiration=r||t.cacheExpiration,yield localStorage.setItem(e,JSON.stringify(n))})}getCachedResultsSessionStorage(e){return n(this,void 0,void 0,function*(){let t;return(t=sessionStorage.getItem(e)?JSON.parse(sessionStorage.getItem(e)):null)&&new Date(t.cacheExpiration).getTime()>Date.now()?Promise.resolve(JSON.parse(t.result)):Promise.reject()})}setResultsCacheSessionStorage(e,t,r){return n(this,void 0,void 0,function*(){let n=new o.CacheResult;n.result=JSON.stringify(t),n.cacheExpiration=r||t.cacheExpiration,yield sessionStorage.setItem(e,JSON.stringify(n))})}}t.default=c,c.isIndexedDBAvailable=!s.isNode&&"indexedDB"in window},function(e,t,r){"use strict";r.r(t),r.d(t,"Store",function(){return n}),r.d(t,"get",function(){return s}),r.d(t,"set",function(){return a}),r.d(t,"del",function(){return u}),r.d(t,"clear",function(){return c}),r.d(t,"keys",function(){return l});class n{constructor(e="keyval-store",t="keyval"){this.storeName=t,this._dbp=new Promise((r,n)=>{const i=indexedDB.open(e,1);i.onerror=(()=>n(i.error)),i.onsuccess=(()=>r(i.result)),i.onupgradeneeded=(()=>{i.result.createObjectStore(t)})})}_withIDBStore(e,t){return this._dbp.then(r=>new Promise((n,i)=>{const o=r.transaction(this.storeName,e);o.oncomplete=(()=>n()),o.onabort=o.onerror=(()=>i(o.error)),t(o.objectStore(this.storeName))}))}}let i;function o(){return i||(i=new n),i}function s(e,t=o()){let r;return t._withIDBStore("readonly",t=>{r=t.get(e)}).then(()=>r.result)}function a(e,t,r=o()){return r._withIDBStore("readwrite",r=>{r.put(t,e)})}function u(e,t=o()){return t._withIDBStore("readwrite",t=>{t.delete(e)})}function c(e=o()){return e._withIDBStore("readwrite",e=>{e.clear()})}function l(e=o()){const t=[];return e._withIDBStore("readonly",e=>{(e.openKeyCursor||e.openCursor).call(e).onsuccess=function(){this.result&&(t.push(this.result.key),this.result.continue())}}).then(()=>t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.CacheResult=class{}},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(98)),n(r(99))},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):function(e){return e instanceof r?e:new r(function(t){t(e)})}(e.value).then(s,a)}u((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=r(0),o=r(9),s=r(1),a=r(33),u=r(15),c=r(4);t.DataRaptor=class{constructor(e,t,r,n){this.connection=e,this.input=t,this.input.retryCount=void 0!==this.input.retryCount?this.input.retryCount:c.default.defaultRetryCount,this.input.timeoutInMillis=void 0!==this.input.timeoutInMillis?this.input.timeoutInMillis:c.default.defaultTimeout,this.dataSourceDB=r,this.inPlatformData=n}execute(){return n(this,void 0,void 0,function*(){s.Logger.log("DataSource call input",this.input);try{if("function"==typeof this.inPlatformData){const e=this.inPlatformData,t={type:"dataraptor",value:{bundleName:this.input.bundleName,inputMap:JSON.stringify(this.input.inputMap)}},r=yield e(JSON.stringify(t));return JSON.parse(r)}if(this.inPlatformData)return this.inPlatformData;{s.Logger.log("In Dataraptor using ApexRest",this.input);const e=new u.ApexRestInput({method:i.HttpMethod.GET,path:this.getDataraptorPath(this.input.bundleName,this.input.inputParamsString,this.input.inputMap),retryCount:this.input.retryCount,timeoutInMillis:this.input.timeoutInMillis,cacheable:this.input.cacheable,cacheExpiration:this.input.cacheExpiration,reload:this.input.reload,cacheType:this.input.cacheType});return yield new u.ApexRestDataSource(this.connection,e,this.dataSourceDB).execute()}}catch(e){let t="object"==typeof e&&null!==e?JSON.stringify(e):e;return Promise.reject(new Error(t))}})}getDataraptorPath(e,t,r){let n="";return t?n="?"+t:r&&(n=a.queryStringEncode(r)),`${o.SalesForceNamespace.restAPIPrefix}/v2/DataRaptor/${e}/${n}`}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(2);t.DataRaptorInput=class extends n.BaseDataSourceInput{constructor(e){super(e.cacheable,e.cacheExpiration,e.retryCount,e.timeoutInMillis,e.reload,e.cacheType),this.bundleName=e.bundleName,this.inputParamsString=e.inputParamsString,this.inputMap=e.inputMap}digest(){return null}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(0);t.default=class extends n.SDKConfig{}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(102))},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):function(e){return e instanceof r?e:new r(function(t){t(e)})}(e.value).then(s,a)}u((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=r(1),o=r(21),s=r(15),a=r(4);t.DualDataSource=class{constructor(e,t,r,n,i){this.connection=e,this.apexRestInput=t,this.apexRemoteInput=r,this.useRemote=!1,this.apexRestInput.retryCount=void 0!==this.apexRestInput.retryCount?this.apexRestInput.retryCount:a.default.defaultRetryCount,this.apexRemoteInput.retryCount=void 0!==this.apexRemoteInput.retryCount?this.apexRemoteInput.retryCount:a.default.defaultRetryCount,this.apexRestInput.timeoutInMillis=void 0!==this.apexRestInput.timeoutInMillis?this.apexRestInput.timeoutInMillis:a.default.defaultTimeout,this.apexRemoteInput.timeoutInMillis=void 0!==this.apexRemoteInput.timeoutInMillis?this.apexRemoteInput.timeoutInMillis:a.default.defaultTimeout,this.dataSourceDB=n,this.inPlatformData=i}execute(){return n(this,void 0,void 0,function*(){try{if("function"==typeof this.inPlatformData&&this.useRemote){const e=this.inPlatformData,t={type:"apexremote",value:{className:this.apexRemoteInput.className,methodName:this.apexRemoteInput.methodName,inputMap:JSON.stringify(this.apexRemoteInput.inputMap),optionsMap:this.apexRemoteInput.optionsMap}},r=yield e(JSON.stringify(t));return JSON.parse(r)}return this.inPlatformData?this.inPlatformData:this.useRemote?(i.Logger.log("In Dual using ApexRemote",this.apexRemoteInput),yield new o.ApexRemoteDataSource(this.connection,this.apexRemoteInput,this.dataSourceDB).execute()):(i.Logger.log("In Dual using ApexRest",this.apexRestInput),yield new s.ApexRestDataSource(this.connection,this.apexRestInput,this.dataSourceDB).execute())}catch(e){let t="object"==typeof e&&null!==e?JSON.stringify(e):e;return Promise.reject(new Error(t))}})}}},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(104)),n(r(105))},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):function(e){return e instanceof r?e:new r(function(t){t(e)})}(e.value).then(s,a)}u((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=r(9),o=r(1),s=r(33),a=r(21),u=r(15),c=r(4);t.IntegrationProcedure=class{constructor(e,t,r,n){this.connection=e,this.input=t,this.input.retryCount=void 0!==this.input.retryCount?this.input.retryCount:c.default.defaultRetryCount,this.input.timeoutInMillis=void 0!==this.input.timeoutInMillis?this.input.timeoutInMillis:c.default.defaultTimeout,this.dataSourceDB=r,this.inPlatformData=n}execute(){return n(this,void 0,void 0,function*(){if(o.Logger.log("Integration Procedure call input",this.input),this.actionMode="undefined"!=typeof Visualforce,"function"==typeof this.inPlatformData){let e=this.inPlatformData,t={type:"integrationprocedure",value:{ipMethod:this.input.procedureKey,inputMap:JSON.stringify(this.input.input),optionsMap:this.input.optionsMap}};const r=yield e(JSON.stringify(t));return JSON.parse(r)}if(this.inPlatformData)return this.inPlatformData;if(this.actionMode){const e=i.SalesForceNamespace.namespace,t=this.input.remote.className,r=this.input.remote.methodName;if(!window[e]||!window[e][t]||!window[e][t][r])throw new Error("Remote Action not found.");const n=new a.ApexRemoteInput({className:t,methodName:r,paramsArray:[this.input.procedureKey,this.input.input,this.input.optionsMap],retryCount:this.input.retryCount,timeoutInMillis:this.input.timeoutInMillis,cacheable:this.input.cacheable,cacheExpiration:this.input.cacheExpiration,reload:this.input.reload,cacheType:this.input.cacheType});return yield new a.ApexRemoteDataSource(this.connection,n,this.dataSourceDB).execute().then(e=>this.ipResponse(e)).catch(e=>e)}const e=new u.ApexRestInput({body:this.input.rest?this.input.rest.body:{},method:this.input.rest?this.input.rest.method:"GET",options:this.input.rest?this.input.rest.options:{},path:this.getIntegrationProcedurePath(this.input.procedureKey,this.input.input),retryCount:this.input.retryCount,timeoutInMillis:this.input.timeoutInMillis,cacheable:this.input.cacheable,cacheExpiration:this.input.cacheExpiration,reload:this.input.reload,cacheType:this.input.cacheType});return yield new u.ApexRestDataSource(this.connection,e,this.dataSourceDB).execute().then(e=>this.ipResponse(e)).catch(e=>e)})}getIntegrationProcedurePath(e,t){let r="";return t&&(r=s.queryStringEncode(t)),`${i.SalesForceNamespace.restAPIPrefix}/v1/integrationprocedure/${e}${r}`}ipResponse(e){let t;try{t="string"==typeof e?JSON.parse(e):e}catch(e){throw new Error(e)}return t&&t.hasOwnProperty("vlcIPData")&&t.hasOwnProperty("vlcStatus")&&"InProgress"===t.vlcStatus?(this.actionMode?this.input.optionsMap=t:this.input.rest.options.headers=t,this.execute()):t}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(2);t.IntegrationProcedureInput=class extends n.BaseDataSourceInput{constructor(e){super(e.cacheable,e.cacheExpiration,e.retryCount,e.timeoutInMillis,e.reload,e.cacheType),this.procedureKey=e.procedureKey,this.input=e.input,this.optionsMap=e.optionsMap,this.rest=e.rest,this.remote=e.remote}digest(){return null}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(107))},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):function(e){return e instanceof r?e:new r(function(t){t(e)})}(e.value).then(s,a)}u((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),r(108);const i=r(0),o=r(1),s=r(2),a=r(109),u=r(4),c=r(13);t.RestDataSource=class{constructor(e,t,r){this.input=e,this.input.retryCount=void 0!==this.input.retryCount?this.input.retryCount:u.default.defaultRetryCount,this.input.timeoutInMillis=void 0!==this.input.timeoutInMillis?this.input.timeoutInMillis:u.default.defaultTimeout,this.dataSourceDB=t,this.inPlatformData=r}execute(){return n(this,void 0,void 0,function*(){try{if(o.Logger.log("Rest ",this.input),"function"==typeof this.inPlatformData){const e=this.inPlatformData,t={type:"rest",value:{methodType:this.input.options.method,headers:this.input.options.headers,endpoint:this.input.url,data:this.input.options.body,namedCredential:this.input.options.credentials}};return yield e(JSON.stringify(t))}if(this.inPlatformData)return this.inPlatformData;if(!c.isNode&&this.input instanceof s.BaseDataSourceInput){const e=yield this.input.digest();return this.dataSourceDB.getDataFromCache(e,this.input.reload,this.input.cacheType).catch(()=>this.Rest(this.input).then(t=>n(this,void 0,void 0,function*(){return(yield this.dataSourceDB.getCacheableValue(this.input.cacheable,this.input.url))&&this.input.options.method===i.HttpMethod.GET&&(yield this.dataSourceDB.setCache(e,t,this.input.cacheExpiration,this.input.cacheType)),t})).catch(e=>e))}return this.Rest(this.input)}catch(e){let t="object"==typeof e&&null!==e?JSON.stringify(e):e;return Promise.reject(new Error(t))}})}Rest(e){return n(this,void 0,void 0,function*(){let e;try{e=setTimeout(()=>Promise.reject(new Error("Request timed out")),this.input.timeoutInMillis);const t=yield fetch(this.input.url,this.input.options);return clearTimeout(e),t.ok?204===t.status?yield{}:yield t.json():(o.Logger.info("Rest call failed",t),Promise.reject(new a.default(t.statusText,this.input.url,t)))}catch(e){if(404===e.status&&0!==this.input.retryCount)return--this.input.retryCount,yield u.default.addRetryDelay(),yield this.execute();o.Logger.info("Rest call error",e),yield e.response.json().then(t=>(e.errorJson=t,Promise.reject(e)))}})}}},function(e,t,r){"use strict";r.r(t),r.d(t,"Headers",function(){return l}),r.d(t,"Request",function(){return g}),r.d(t,"Response",function(){return b}),r.d(t,"DOMException",function(){return _}),r.d(t,"fetch",function(){return w});var n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==n&&n,i={searchParams:"URLSearchParams"in n,iterable:"Symbol"in n&&"iterator"in Symbol,blob:"FileReader"in n&&"Blob"in n&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in n,arrayBuffer:"ArrayBuffer"in n};if(i.arrayBuffer)var o=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],s=ArrayBuffer.isView||function(e){return e&&o.indexOf(Object.prototype.toString.call(e))>-1};function a(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function u(e){return"string"!=typeof e&&(e=String(e)),e}function c(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return i.iterable&&(t[Symbol.iterator]=function(){return t}),t}function l(e){this.map={},e instanceof l?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function d(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function h(e){return new Promise(function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}})}function p(e){var t=new FileReader,r=h(t);return t.readAsArrayBuffer(e),r}function f(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function m(){return this.bodyUsed=!1,this._initBody=function(e){this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:i.blob&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:i.formData&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:i.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():i.arrayBuffer&&i.blob&&function(e){return e&&DataView.prototype.isPrototypeOf(e)}(e)?(this._bodyArrayBuffer=f(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):i.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||s(e))?this._bodyArrayBuffer=f(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):i.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i.blob&&(this.blob=function(){var e=d(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=d(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}return this.blob().then(p)}),this.text=function(){var e=d(this);if(e)return e;if(this._bodyBlob)return function(e){var t=new FileReader,r=h(t);return t.readAsText(e),r}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},i.formData&&(this.formData=function(){return this.text().then(v)}),this.json=function(){return this.text().then(JSON.parse)},this}l.prototype.append=function(e,t){e=a(e),t=u(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},l.prototype.delete=function(e){delete this.map[a(e)]},l.prototype.get=function(e){return e=a(e),this.has(e)?this.map[e]:null},l.prototype.has=function(e){return this.map.hasOwnProperty(a(e))},l.prototype.set=function(e,t){this.map[a(e)]=u(t)},l.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},l.prototype.keys=function(){var e=[];return this.forEach(function(t,r){e.push(r)}),c(e)},l.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),c(e)},l.prototype.entries=function(){var e=[];return this.forEach(function(t,r){e.push([r,t])}),c(e)},i.iterable&&(l.prototype[Symbol.iterator]=l.prototype.entries);var y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function g(e,t){if(!(this instanceof g))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var r=(t=t||{}).body;if(e instanceof g){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new l(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,r||null==e._bodyInit||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new l(t.headers)),this.method=function(e){var t=e.toUpperCase();return y.indexOf(t)>-1?t:e}(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(r),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var n=/([?&])_=[^&]*/;if(n.test(this.url))this.url=this.url.replace(n,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function v(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(i))}}),t}function b(e,t){if(!(this instanceof b))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"",this.headers=new l(t.headers),this.url=t.url||"",this._initBody(e)}g.prototype.clone=function(){return new g(this,{body:this._bodyInit})},m.call(g.prototype),m.call(b.prototype),b.prototype.clone=function(){return new b(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new l(this.headers),url:this.url})},b.error=function(){var e=new b(null,{status:0,statusText:""});return e.type="error",e};var I=[301,302,303,307,308];b.redirect=function(e,t){if(-1===I.indexOf(t))throw new RangeError("Invalid status code");return new b(null,{status:t,headers:{location:e}})};var _=n.DOMException;try{new _}catch(e){(_=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack}).prototype=Object.create(Error.prototype),_.prototype.constructor=_}function w(e,t){return new Promise(function(r,o){var s=new g(e,t);if(s.signal&&s.signal.aborted)return o(new _("Aborted","AbortError"));var a=new XMLHttpRequest;function c(){a.abort()}a.onload=function(){var e={status:a.status,statusText:a.statusText,headers:function(e){var t=new l;return e.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e}).forEach(function(e){var r=e.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();t.append(n,i)}}),t}(a.getAllResponseHeaders()||"")};e.url="responseURL"in a?a.responseURL:e.headers.get("X-Request-URL");var t="response"in a?a.response:a.responseText;setTimeout(function(){r(new b(t,e))},0)},a.onerror=function(){setTimeout(function(){o(new TypeError("Network request failed"))},0)},a.ontimeout=function(){setTimeout(function(){o(new TypeError("Network request failed"))},0)},a.onabort=function(){setTimeout(function(){o(new _("Aborted","AbortError"))},0)},a.open(s.method,function(e){try{return""===e&&n.location.href?n.location.href:e}catch(t){return e}}(s.url),!0),"include"===s.credentials?a.withCredentials=!0:"omit"===s.credentials&&(a.withCredentials=!1),"responseType"in a&&(i.blob?a.responseType="blob":i.arrayBuffer&&s.headers.get("Content-Type")&&-1!==s.headers.get("Content-Type").indexOf("application/octet-stream")&&(a.responseType="arraybuffer")),!t||"object"!=typeof t.headers||t.headers instanceof l?s.headers.forEach(function(e,t){a.setRequestHeader(t,e)}):Object.getOwnPropertyNames(t.headers).forEach(function(e){a.setRequestHeader(e,u(t.headers[e]))}),s.signal&&(s.signal.addEventListener("abort",c),a.onreadystatechange=function(){4===a.readyState&&s.signal.removeEventListener("abort",c)}),a.send(void 0===s._bodyInit?null:s._bodyInit)})}w.polyfill=!0,n.fetch||(n.fetch=w,n.Headers=l,n.Request=g,n.Response=b)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class extends Error{constructor(e,t,r){super(e),this.requestOptions=t,this.response=(r||{}).response||r,this.status=r.status}}},,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{static hasLineItemAlreadyBeenAddedToParent(e,t){let r,n=!1;if(!e.lineItems)return n;r=e.lineItems.records.length;for(let i=0;i<r;i++)if(e.lineItems.records[i].Id.value===t.Id.value){n=!0;break}return n}static findProductGroupsWithLineItemsAmongNodeList(e){let t;this.foundProductGroups=[];for(const r of e)(t=this.findProductGroupWithLineItemsInsideNode(r))&&this.foundProductGroups.push(t);return this.foundProductGroups}static findProductGroupWithLineItemsInsideNode(e){let t=[];if(e.lineItems&&e.lineItems.records&&e.lineItems.records.length>0)return e;if(e.productGroups&&e.productGroups.records&&e.productGroups.records.length>0)for(const r of e.productGroups.records)(t=this.findProductGroupWithLineItemsInsideNode(r))&&this.foundProductGroups.push(t);return null}static findProductGroupAmongNodeList(e,t,r){let n;for(const i of r)if(n=this.findProductGroupInsideNode(e,t,i))break;return n||null}static findProductGroupInsideNode(e,t,r){let n;if(r.Id.value===e&&r.productHierarchyPath===t)return r;if(r.productGroups&&r.productGroups.records&&r.productGroups.records.length>0){for(const i of r.productGroups.records)if(n=this.findProductGroupInsideNode(e,t,i))return n}else{if(!(r.lineItems&&r.lineItems.records&&r.lineItems.records.length>0))return null;for(const i of r.lineItems.records)if(n=this.findProductGroupInsideNode(e,t,i))return n}}static findChildItemInProductGroups(e){return this.findItemsInProductGroups(e,"childProducts")}static findLineItemInProductGroups(e){return this.findItemsInProductGroups(e,"lineItems")}static findItemsInProductGroups(e,t){let r;return e[t]?e[t].records:(e.productGroups&&(r=this.findItemsInProductGroups(e.productGroups.records[0],t)),r)}static removeLineItemFromParent(e,t){let r;const n=[];if(e.lineItems){r=JSON.parse(JSON.stringify(e.lineItems.records));for(const e of r)e.Id.value!==t&&n.push(e);e.lineItems.records=n}return e}static searchLineItem(e,t){if(e.id&&e.id===t)return e;if(e.Id&&e.Id.value===t)return e;if(e.productGroups)for(let r=0;r<e.productGroups.length;r++){const n=this.searchLineItem(e.productGroups[r],t);if(n)return n}if(e.lineItems&&e.lineItems.records)for(let r=0;r<e.lineItems.records.length;r++){const n=this.searchLineItem(e.lineItems.records[r],t);if(n)return n}}}t.CrossActionsService=n,n.foundProductGroups=[]},,,,function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(162)),n(r(165)),n(r(164)),n(r(163)),n(r(167)),n(r(168)),n(r(169)),n(r(170)),n(r(166)),n(r(171)),n(r(172))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(51);class i extends n.SDKConfig{}t.default=i,i.anonymousSiteConfigUrl="",i.authToken="",i.authTokenType="Basic ",i.contentType="application/json"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(6),i=r(57);t.AddProductToCartInput=class extends i.B2BInput{constructor(){super(...arguments),this.remoteMethod="postCartsItems"}getAPIPath(){return""}getRequestPayload(e){if(!this.actionObj&&!this.childProductId)throw new Error("AddProductToCartInput must have childProductId.");if(!this.actionObj&&!this.cartId)throw new Error("AddProductToCartInput must have cartId.");if(this.actionObj){if(this.rootBundleId){const t=e.records.find(e=>e.Id.value===this.rootBundleId);this.parentObject=this.findLineItem(this.cloneDeep(t),this.parentId)}}else this.actionObj=this.prepareAddToCartActionObject();return this.actionObj}getInputMap(){return{}}getAnonymousSiteRestUrl(){return""}prepareAddToCartActionObject(){return{client:{params:{}},link:"/services/apexrest/vlocity_cmt/v2/cpq/carts/"+this.cartId+"/items",remote:{methodName:"postCartsItems",params:{}},rest:{method:"POST",link:"/services/apexrest/vlocity_cmt/v2/cpq/carts/"+this.cartId+"/items",params:{cartId:this.cartId,hierarchy:-1,includeAttachment:!1,items:[{itemId:this.childProductId}],lastRecordId:null,methodName:"postCartsItems",pagesize:10,price:!0,query:null,validate:!0}}}}getEncodedQueryString(){return n.queryStringEncode(this.getInputMap(),!0,[])}}},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):function(e){return e instanceof r?e:new r(function(t){t(e)})}(e.value).then(s,a)}u((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=r(0),o=r(112),s=r(164);class a{constructor(){this.messages=[],this.cartMessages=[],this.crossActionMessages=[],this.records=[],this.prices={},this.customFields={}}static parse(e,t){const r=new a;return r.messages=e.messages,r.prices=e.prices,r.records=[],e.actions&&e.actions.nextproducts&&e.actions.nextproducts.remote&&e.actions.nextproducts.remote.params&&e.actions.nextproducts.remote.params.offsetSize&&(r.offsetSize=e.actions.nextproducts.remote.params.offsetSize),e.records&&(e.records.forEach(e=>{r.records.push(s.CartItem.parse(e,e.Id.value,t))}),r.records.forEach(e=>{"Disconnect"!==e.action&&"Change"!==e.action&&"Existing"!==e.action||(e.isAssets=!0)})),e.crossActionMessages&&(r.crossActionMessages=e.crossActionMessages),t.customFields&&t.customFields.length&&t.customFields.map(t=>{e.hasOwnProperty(t)&&(r.customFields[t]=e[t])}),r.messages&&r.messages.length&&r.messages.forEach(e=>{if(e.messageId){e.bundleId||(e.bundleId=e.messageId.split("|")[0]);const t=r.records.findIndex(t=>t.id===e.bundleId);if(-1!==t&&"ERROR"===e.severity){const n=e.messageId.split("|")[0],i=o.CrossActionsService.searchLineItem(r.records[t],n);i&&-1===i.messages.findIndex(t=>t.messageId===e.messageId)&&i.messages.push(e)}}}),r}static update(e,t,r,o){return n(this,void 0,void 0,function*(){const n=new a,s=i.SalesForceNamespace.namespace+"__InCartQuantityMap__c";if(t.records&&!t.records[0].lineItems)t.records[0].lineItems=e.lineItems,t.records[0].childProducts=e.childProducts,t.records[0].productGroups=e.productGroups,t.records[0].actions=e.actions,yield n.replacePrices(e,t.records,!1),e[s]=t.records[0][s];else if(t.records){e[s]=t.records[0][s];n.insertLineItemToParent(e,t.records[0].lineItems.records[0])}if(e.Id.value===r.Id.value&&e.Name)r=e;else if(e.Id.value===r.Id.value)r.lineItems=e.lineItems,r.productGroups=e.productGroups,r.childProducts=e.childProducts,r[s]=e[s];else{a.findAndReplaceLineItem(r,e.Id.value,e)}if(r.Name||(e.lineItems=r.lineItems),!o)return r;const u=yield n.updatePrices(r,o.records);return t.messages&&(u.messages=t.messages),u})}static clone(e,t,r,o){return n(this,void 0,void 0,function*(){const n=new a,s=i.SalesForceNamespace.namespace+"__InCartQuantityMap__c",u=a.findAndReplaceLineItem(t.records[0],e.Id.value);if(u&&u.lineItems&&u.lineItems.records.forEach(t=>{n.insertLineItemToParent(e,t)}),u&&u.productGroups&&(e.productGroups=u.productGroups),e[s]=u[s],!o)return r;const c=yield n.updatePrices(r,o.records);return t.messages&&(c.messages=t.messages),c})}static updateDeleteItem(e,t,r,o,s){return n(this,void 0,void 0,function*(){const n=new a,u=i.SalesForceNamespace.namespace+"__InCartQuantityMap__c",c=t.records.findIndex(e=>e.Id.value===s.rootBundleId);if(t&&t.records[c].lineItems&&"Add"!==t.records[c].action){const r=a.findAndReplaceLineItem(t.records[c],s.itemObject.Id.value),n=(a.findAndReplaceLineItem(e,r.Id.value,r),a.findAndReplaceLineItem(t.records[c],e.Id.value));e[u].value=n[u].value,t.records[c].childProducts&&(e.childProducts&&e.childProducts.records&&e.childProducts.records.length&&t.records[c].childProducts.records&&t.records[c].childProducts.records.length?e.childProducts.records.push(t.records[c].childProducts.records[0]):e.childProducts=t.records[c].childProducts)}else if(s&&s.itemObject){if(t&&t.records){const e=t.records[c];e.childProducts&&e.childProducts.records&&e.childProducts.records[0]&&(s.itemObject.UnitPrice=e.childProducts.records[0].UnitPrice)}n.removeLineItemFromParent(e,s.itemObject)}if(e.Id.value===r.Id.value&&e.Name)r=e;else if(e.Id.value===r.Id.value)r.lineItems=e.lineItems,r.productGroups=e.productGroups,r.childProducts=e.childProducts,r[u]=e[u];else{a.findAndReplaceLineItem(r,e.Id.value,e)}return yield n.updatePrices(r,o.records)})}static findAndReplaceLineItem(e,t,r,n){if(e.Id.value===t)return r&&(e=r),e;if(e.productGroups)for(let i=0;i<e.productGroups.records.length;i++){let o=this.findAndReplaceLineItem(e.productGroups.records[i],t,r,n);if(o)return r&&(o=r,e.productGroups.records[i].Id.value===r.Id.value&&(e.productGroups.records[i]=r)),n?{lineItem:e.productGroups.records[i]}:o}if(e.lineItems)for(let i=0;i<e.lineItems.records.length;i++){let o=this.findAndReplaceLineItem(e.lineItems.records[i],t,r,n);if(o)return r&&(o=r,e.lineItems.records[i].Id.value===r.Id.value&&(e.lineItems.records[i]=r)),n?{lineItem:e.lineItems.records[i]}:o}}static findAndReplaceLineItemInCart(e,t,r,n){if(e.Id.value===t)return r&&(e=r),e;if(e.productGroups)for(let i=0;i<e.productGroups.records.length;i++){let o=this.findAndReplaceLineItemInCart(e.productGroups.records[i],t,r,n);if(o)return r&&(o=r,e.productGroups.records[i].Id.value===r.Id.value&&(e.productGroups.records[i]=r)),n?!1===o.returnParent?{lineItem:o.lineItem,returnParent:!1}:{lineItem:e,returnParent:!1}:o}if(e.lineItems)for(let i=0;i<e.lineItems.records.length;i++){let o=this.findAndReplaceLineItemInCart(e.lineItems.records[i],t,r,n);if(o)return r&&(o=r,e.lineItems.records[i].Id.value===r.Id.value&&(e.lineItems.records[i]=r)),n?!1===o.returnParent?{lineItem:o.lineItem,returnParent:!1}:{lineItem:e,returnParent:!1}:o}}static updateItemsAttribute(e,t,r){let n;for(let r=0;r<e.records.length;r++){const i=e.records[r],o=a.findAndReplaceLineItem(i,t.Id.value);o&&(n=o)}if(n&&t)return n.attributeCategories=t.attributeCategories,n.PricebookEntry=t.PricebookEntry,e}static findRootFromGivenLineItem(e,t){if(e&&e.length)for(let r=0;r<e.length;r++){if(this.findAndReplaceLineItem(e[r],t))return{index:r,lineItem:e[r]}}return null}insertLineItemToParent(e,t){let r,n=[];if(e.lineItems?n=this.cloneDeep(e.lineItems.records):e.lineItems={records:[{}]},-1===(r=n.findIndex(e=>e.Id.value===t.Id.value)))n.push(t);else{const e=n[r];t.actions=e.actions,t.lineItems=e.lineItems,t.childProducts=e.childProducts,t.productGroups=e.productGroups,n[r]=t}return e.lineItems.records=n,0===t.minQuantity&&t.defaultQuantity>0&&this.removeAddonFromParent(e,t.PricebookEntryId.value),e}updatePrices(e,t){return n(this,void 0,void 0,function*(){return e.records?e.records.forEach(e=>n(this,void 0,void 0,function*(){t=yield this.replacePrices(e,t),e.productGroups&&this.updatePrices(e.productGroups,t),e.lineItems&&this.updatePrices(e.lineItems,t)})):(t=yield this.replacePrices(e,t),e.productGroups&&this.updatePrices(e.productGroups,t),e.lineItems&&this.updatePrices(e.lineItems,t)),Promise.resolve(e)})}removeLineItemFromParent(e,t){let r,n="";const o=[];if(e.lineItems&&((r=this.cloneDeep(e.lineItems.records)).forEach(e=>{e.Id.value!==t.Id.value?o.push(e):n=e.Product2Id}),e.lineItems.records=o),e.childProducts){-1===e.childProducts.records.findIndex(e=>(e.PricebookEntry?e.PricebookEntry.Id:e.Id.value)===t.PricebookEntry.Id)&&e.childProducts.records.push(t)}else e.childProducts={records:[t]};const s=i.SalesForceNamespace.namespace+"__InCartQuantityMap__c",a=e[s].value[n];let u=1;t&&t.Quantity&&t.Quantity.value&&(u=t.Quantity.value);const c=a-u;return a&&c>0?e[s].value[n]=c:delete e[s].value[n],e}removeAddonFromParent(e,t){let r;const n=[];let i;if(e.childProducts){for(r=this.cloneDeep(e.childProducts.records),i=0;i<r.length;i++)r[i].Id.value!==t&&n.push(r[i]);e.childProducts.records=n}}replacePrices(e,t,r=!0){return n(this,void 0,void 0,function*(){const n=t.findIndex(t=>t.Id.value===e.Id.value);if(-1!==n){[i.SalesForceNamespace.namespace+"__EffectiveOneTimeTotal__c",i.SalesForceNamespace.namespace+"__EffectiveRecurringTotal__c",i.SalesForceNamespace.namespace+"__OneTimeCalculatedPrice__c",i.SalesForceNamespace.namespace+"__OneTimeCharge__c",i.SalesForceNamespace.namespace+"__OneTimeManualDiscount__c",i.SalesForceNamespace.namespace+"__OneTimeTotal__c",i.SalesForceNamespace.namespace+"__RecurringCalculatedPrice__c",i.SalesForceNamespace.namespace+"__RecurringCharge__c",i.SalesForceNamespace.namespace+"__RecurringManualDiscount__c",i.SalesForceNamespace.namespace+"__RecurringTotal__c",i.SalesForceNamespace.namespace+"__EffectiveQuantity__c",i.SalesForceNamespace.namespace+"__UsageUnitPrice__c"].forEach(r=>{e[r]&&e[r].actions?e[r].value=t[n][r]?t[n][r].value:e[r].value:e[r]=t[n]?t[n][r]:0}),r&&t.splice(n,1)}return t})}cloneDeep(e){return JSON.parse(JSON.stringify(e))}}t.CartItems=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(0),i=r(6),o=r(165),s=r(166);class a{constructor(){this.messages=[],this.actions=[],this.isAssets=!1,this.prices={},this.customFields={},this.columns=[],this.promotions={},this.productRelationshipRules=[]}static parse(e,t,r,u,c){const l=new a;if(e=JSON.parse(JSON.stringify(e)),l.actions=e.actions,l.sequenceNumber=e.sequenceNumber,l.rootItemId=t,l.name=e.name||e.Name&&e.Name.value,l.description=e.Product2.Description,l.productId=e.Product2.Id,l.productHierarchyPath=e.productHierarchyPath,l.defaultQuantity=e.defaultQuantity,l.minQuantity=e.minQuantity,l.maxQuantity=e.maxQuantity,l.groupMinQuantity=e.groupMinQuantity,l.groupMaxQuantity=e.groupMaxQuantity,l.itemType=e.itemType,l.promotions=e.promotions,l.messages=e.messages,l.failType=e.failType,l.category=e.category,l.versionLabel=e.Product2[n.SalesForceNamespace.namespace+"__VersionLabel__c"],l.lineItemHierarchyPath=c?c+">"+e.Id.value:e.Id.value,e[n.SalesForceNamespace.namespace+"__AssetReferenceId__c"]&&(l.assetReferenceId=e[n.SalesForceNamespace.namespace+"__AssetReferenceId__c"].value),e[n.SalesForceNamespace.namespace+"__Product2Id__r"]&&(l.objectTypeId=e[n.SalesForceNamespace.namespace+"__Product2Id__r"][n.SalesForceNamespace.namespace+"__ObjectTypeId__c"]),e.SellingPeriod&&(l.sellingPeriod=e.SellingPeriod),u&&(l.parentId=u.id,l.parentAction=u.action),l.action=e[n.SalesForceNamespace.namespace+"__Action__c"]?e[n.SalesForceNamespace.namespace+"__Action__c"].value:null,l.id=e.Id?e.Id.value:e.id.value,l.PricebookEntry=e.PricebookEntry,l.pricebookId=e.Pricebook2Id&&e.Pricebook2Id.value?e.Pricebook2Id.value:e.Pricebook2Id,l.quantity=e.Quantity?e.Quantity.value:e.quantity?e.quantity.value:0,l.prices=Object.assign({},s.Price.parse(e,r)),l.isVirtualItem=e.isVirtualItem,e[n.SalesForceNamespace.namespace+"__InCartQuantityMap__c"]&&(l.inCartQuantityMap=e[n.SalesForceNamespace.namespace+"__InCartQuantityMap__c"].value),e.childProducts&&e.childProducts.records&&(l.childProducts=[],e.childProducts.records=i.sortItems(e.childProducts.records,"sequenceNumber"),e.childProducts.records.forEach(e=>{0!==e.maxQuantity&&l.childProducts.push(a.parse(e,t,r,l,l.lineItemHierarchyPath))})),e.lineItems&&(l.lineItems=[],e.lineItems.records=i.sortItems(e.lineItems.records,"sequenceNumber"),e.lineItems.records.forEach(e=>{l.lineItems.push(a.parse(e,t,r,l,l.lineItemHierarchyPath))})),e.productGroups&&(l.productGroups=[],e.productGroups.records.forEach(e=>{l.productGroups.push(a.parse(e,t,r,l,l.lineItemHierarchyPath))})),e.attributeCategories&&e.attributeCategories.records&&e.attributeCategories.records.length&&(l.attributeCategories=[],e.attributeCategories.records.forEach(e=>{l.attributeCategories.push(o.AttributeCategory.parse(e,r,l.id))})),r.customFields&&r.customFields.length&&r.customFields.map(t=>{e.hasOwnProperty(t)&&(l.customFields[t]=e[t])}),r.columns&&r.columns.length&&r.columns.map(t=>{const r=i.objectMap([e],[t.valueMap]);if(r&&r.length){const e=t.valueMap.split(".");let n=t.valueMap;e.length>1&&(n=e[e.length-1]),l.columns.push({value:r[0][n],label:t.label,valueMap:t.valueMap,dataType:t.dataType})}}),r.productRelationshipRuleMap){let e=JSON.parse(JSON.stringify(r.productRelationshipRuleMap)),t=e[l.productId],i=e[l.objectTypeId];if(t||i){let i=t?l.productId:l.objectTypeId;if(l.productRelationshipRules=e[i],l.productRelationshipRules.forEach(e=>{e.relatedItems=[]}),r.lineItemRelationshipMap&&r.lineItemRelationshipMap.hasOwnProperty(l.id)){let e=JSON.parse(JSON.stringify(r.lineItemRelationshipMap[l.id]));l.productRelationshipRules.forEach(t=>{let r=n.SalesForceNamespace.namespace+"__GlobalKey__c";if(e[t[r]]){let i=n.SalesForceNamespace.namespace+"__RelatedQuoteLineItemId__r";t.relatedItems=e[t[r]],e[t[r]].forEach(e=>{e.relatedItemName=e[i]&&e[i].Product2?e[i].Product2.Name:""})}})}}}return l}}t.CartItem=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(6);class i{constructor(){this.productAttributes=[],this.customFields={}}static parse(e,t,r){const o=new i;o.code=e.Code__c,o.name=e.Name,o.id=e.id;const s=n.sortItems(e.productAttributes.records,"displaySequence");return s&&s.forEach(i=>{const s=n.objectMap([i],["attributeId","disabled","label","messages","readonly","required","userValues","hidden","multiselect","inputType","hasRules","dataType","code","formatMask","min","max","description"].concat(t.customFields))[0];s.values=[],s[i.inputType]=!0,s.attributeId=e.id.concat("<"+i.attributeId),i&&i.values&&i.values.forEach(o=>{let a=n.objectMap([o],["id","label","value","displaySequence"].concat(t.customFields))[0];a=Object.assign(a,{attributeId:e.id.concat("<"+i.attributeId),defaultSelected:i.userValues===o.value,uniqueAttributeId:r+""+i.attributeId}),s.values.push(a)}),o.productAttributes.push(s)}),t.customFields&&t.customFields.length&&t.customFields.map(t=>{e.hasOwnProperty(t)&&(o.customFields[t]=e[t])}),o}}t.AttributeCategory=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(0),i=r(6);class o{constructor(){this.customFields={}}static parse(e,t){const r=new o,s=e[n.SalesForceNamespace.namespace+"__OneTimeTotal__c"],a=e[n.SalesForceNamespace.namespace+"__RecurringTotal__c"],u=e[n.SalesForceNamespace.namespace+"__OneTimeCharge__c"],c=e[n.SalesForceNamespace.namespace+"__RecurringCharge__c"],l=e.UnitPrice,d=e[n.SalesForceNamespace.namespace+"__RecurringPrice__c"],h=["actions","originalValue","previousValue","value"].concat(t.customFields);return s&&(r.oneTimeTotal=i.objectMap([s],h)[0]),a&&(r.recurringTotal=i.objectMap([a],h)[0]),u&&(r.oneTimeCharge=i.objectMap([u],h)[0]),c&&(r.recurringCharge=i.objectMap([c],h)[0]),l&&(r.unitPrice=l),d&&(r.recurringPrice=d),t.customFields&&t.customFields.length&&t.customFields.map(t=>{e.hasOwnProperty(t)&&(r.customFields[t]=e[t])}),r}}t.Price=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(6),i=r(57);t.CreateWorkingCartInput=class extends i.B2BInput{getAPIPath(){return""}getRequestPayload(){if(!this.inputMap.SalesQuoteId&&!this.inputMap.SourceId)throw new Error("CreateWorkingCartInput::getRequestPayload() must have SalesQuoteId or SourceId");if(!this.ipMethod)throw new Error("CreateWorkingCartInput::getRequestPayload() must have ipMethod.");return this.inputMap}getInputMap(){return{}}getAnonymousSiteRestUrl(){return""}getEncodedQueryString(){return n.queryStringEncode(this.getInputMap(),!0,[])}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(6),i=r(57);t.DeleteCartItemInput=class extends i.B2BInput{getAPIPath(){return""}getRequestPayload(e){if(!this.actionObj)throw new Error("DeleteCartItemInput must have actionObj.");if(!this.lineItemId)throw new Error("DeleteCartItemInput must have lineItemId.");if(!this.rootBundleId)throw new Error("DeleteCartItemInput must have rootBundleId.");const t=e.records.find(e=>e.Id.value===this.rootBundleId);return this.parentId&&(this.parentObject=this.findLineItem(this.cloneDeep(t),this.parentId)),this.itemObject=this.findLineItem(this.cloneDeep(t),this.lineItemId),this.actionObj}getInputMap(){return{}}getAnonymousSiteRestUrl(){return""}getEncodedQueryString(){return n.queryStringEncode(this.getInputMap(),!0,[])}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(0),i=r(6),o=r(57);t.GetCartItemsInput=class extends o.B2BInput{constructor(){super(...arguments),this.fieldsToInclude=["pagesize","offsetSize","validate","price","translation","hierarchy","lastRecordId","includeIneligible","query","id","filter","priceDetailsFields","fields","includeAttachment"],this.cartId="",this.validate=!1,this.price=!1,this.remoteClass="CpqAppHandler",this.remoteMethod="getCartsItems"}getAPIPath(){if(!this.cartId)throw new Error("GetCartItemInput::getAPIPath() must have cartId.");return`${n.SalesForceNamespace.restAPIPrefix}/v2/cpq/carts/${this.cartId}/items`+this.getEncodedQueryString()}getRequestPayload(e){return{}}getInputMap(){const e={};return this.fieldsToInclude.forEach(t=>{this[t]&&(e[t]=this[t])}),this.validate||(e.validate=this.validate),this.price||(e.price=this.price),e}getAnonymousSiteRestUrl(){return""}getEncodedQueryString(){return i.queryStringEncode(this.getInputMap(),!0,this.fieldsToInclude)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(0),i=r(6),o=r(57);t.GetCartSummaryInput=class extends o.B2BInput{constructor(){super(...arguments),this.fieldsToInclude=["validate","price","translation","fields"],this.cartId="",this.validate=!1,this.price=!1,this.remoteClass="CpqAppHandler",this.remoteMethod="getCarts"}getAPIPath(){if(!this.cartId)throw new Error("GetCartSummaryInput::getAPIPath() must have cartId.");return`${n.SalesForceNamespace.restAPIPrefix}/v2/cpq/carts/${this.cartId}`+this.getEncodedQueryString()}getRequestPayload(e){return{}}getInputMap(){const e={};return this.fieldsToInclude.forEach(t=>{this[t]&&(e[t]=this[t])}),this.validate||(e.validate=this.validate),this.price||(e.price=this.price),e}prepareGetCartSummaryActionObject(){if(!this.cartId)throw new Error("GetCartSummaryInput::getAPIPath() must have cartId.");const e={client:{params:{}},remote:{methodName:this.remoteMethod,params:{cartId:this.cartId,methodName:this.remoteMethod,price:this.price,validate:this.validate}},rest:{method:"GET",link:this.getAPIPath(),params:{cartId:this.cartId,methodName:this.remoteMethod,price:this.price,validate:this.validate}}};return this.actionObj||(this.actionObj=e),this.actionObj}getAnonymousSiteRestUrl(){return""}getEncodedQueryString(){return i.queryStringEncode(this.getInputMap(),!0,this.fieldsToInclude)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(6);class i{constructor(){this.timePlans=[],this.timePolicies=[],this.messages=[]}static parse(e,t){const r=new i;return r.messages=e.messages,e.records&&e.records.forEach(e=>{const i=n.objectMap(e.listvalues,["actions","fields.valuekey","fields.label","fields.valuekey#value"].concat(t));"TimePlans"===e.listkey&&i?r.timePlans=i:i&&(r.timePolicies=i)}),r}}t.TimeList=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(6),i=r(57);t.UpdateCartLineItemInput=class extends i.B2BInput{constructor(){super(...arguments),this.lineItemDetails={},this.commitToShoppingCart=!1,this.isRapidAttributeEnabled=!1}getAPIPath(){return""}getRequestPayload(e){if(!this.actionObj)throw new Error("UpdateCartLineItemInput must have actionObj.");if(!this.lineItemId)throw new Error("UpdateCartLineItemInput must have lineItemId.");if(!this.rootBundleId)throw new Error("UpdateCartLineItemInput must have rootBundleId.");if(!this.lineItemDetails)throw new Error("UpdateCartLineItemInput must have lineItemDetails.");const t=e.records.find(e=>e.Id.value===this.rootBundleId),r=this.findLineItem(this.cloneDeep(t),this.lineItemId);return this.parentId&&(this.parentObject=this.findLineItem(this.cloneDeep(t),this.parentId)),this.itemObject=this.processLineItemDetails(r),this.actionObj}processLineItemDetails(e){if("updateQuantity"===this.lineItemDetails.action)e.Quantity.value=this.lineItemDetails.data.value;else if("updateAttribute"===this.lineItemDetails.action){const t=this.lineItemDetails.data.attributeHierarchyPath.split("<");e.attributeCategories.records.forEach(e=>{e.id===t[0]&&e.productAttributes.records.forEach(e=>{e.attributeId===t[1]&&(e.userValues=this.lineItemDetails.data.value)})})}return e}getInputMap(){return{}}getAnonymousSiteRestUrl(){return""}getEncodedQueryString(){return n.queryStringEncode(this.getInputMap(),!0,[])}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(0),i=r(116),o=r(112);t.ItemAdded=class{static handleCrossAction(e,t,r){const s=new i.CartItems;let a,u,c,l,d;return r&&e.records.Id.value===r.Id.value?(e.records.lineItems&&e.records.lineItems.records&&e.records.lineItems.records.length>0&&((u=r)[n.SalesForceNamespace.namespace+"__InCartQuantityMap__c"]=e.records[n.SalesForceNamespace.namespace+"__InCartQuantityMap__c"],e.records.lineItems.records.forEach(e=>{a=e,o.CrossActionsService.hasLineItemAlreadyBeenAddedToParent(u,a)||(u=s.insertLineItemToParent(u,a))})),e.records.productGroups&&e.records.productGroups.records&&e.records.productGroups.records.length>0&&(c=r,(d=o.CrossActionsService.findProductGroupsWithLineItemsAmongNodeList(e.records.productGroups.records)).forEach(e=>{(l=o.CrossActionsService.findProductGroupAmongNodeList(e.Id.value,e.productHierarchyPath,c.productGroups.records))[n.SalesForceNamespace.namespace+"__InCartQuantityMap__c"]=e[n.SalesForceNamespace.namespace+"__InCartQuantityMap__c"],e.lineItems.records.forEach(e=>{a=e,o.CrossActionsService.hasLineItemAlreadyBeenAddedToParent(l,a)||(l=s.insertLineItemToParent(l,a))})}))):t&&((u=i.CartItems.findAndReplaceLineItem(r,e.records.Id.value))[n.SalesForceNamespace.namespace+"__InCartQuantityMap__c"]=e.records[n.SalesForceNamespace.namespace+"__InCartQuantityMap__c"],e.records.lineItems.records.forEach(e=>{a=e,o.CrossActionsService.hasLineItemAlreadyBeenAddedToParent(u,a)||(u=s.insertLineItemToParent(u,a))})),r}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(0),i=r(116),o=r(112);t.ItemDeleted=class{static handleCrossAction(e,t,r,n){if(r&&r.deletedItemIds)return e.forEach(e=>{r.deletedItemIds&&r.deletedItemIds.indexOf(e.Id)>-1&&(delete r.deletedItemIds,n=this.processDeleteAction("delete",e,!1,r,n))}),n}static processDeleteAction(e,t,r,s,a){if(!e||!t)return a;const u={itemId:t.Id,RootItemId:t[n.SalesForceNamespace.namespace+"__RootItemId__c"]&&t[n.SalesForceNamespace.namespace+"__RootItemId__c"].value,AssetReferenceId:t[n.SalesForceNamespace.namespace+"__AssetReferenceId__c"]&&t[n.SalesForceNamespace.namespace+"__AssetReferenceId__c"].value,addonProduct:s};if(u.itemId&&a&&u.itemId===a.Id.value)(a.Id.value===a[n.SalesForceNamespace.namespace+"__RootItemId__c"].value||a[n.SalesForceNamespace.namespace+"__RootItemId__c"].value===a[n.SalesForceNamespace.namespace+"__AssetReferenceId__c"].value||u.RootItemId&&u.AssetReferenceId&&u.RootItemId===u.AssetReferenceId)&&(a.itemsToBeDeleted||(a.itemsToBeDeleted=[]),a.itemsToBeDeleted.push(a.Id.value));else if(a){let e=null;if(a.lineItems){const t=i.CartItems.findAndReplaceLineItemInCart(a,u.itemId,null,!0);t&&(e=o.CrossActionsService.searchLineItem(a,u.itemId)||null)&&this.deleteLineItem(t.lineItem,e,null,!1)}if(!e&&a.productGroups){const t=i.CartItems.findAndReplaceLineItemInCart(a,u.itemId,null,!0);t&&(e=i.CartItems.findAndReplaceLineItem(a,u.itemId)||null)&&this.deleteLineItem(t.lineItem,e,u.addonProduct,!1)}}return a}static changeLineItemCountInCardinalityMap(e,t,r){const n=e[t];let i;n&&((i=n+r)>0?e[t]=i:delete e[t])}static deleteLineItem(e,t,r,s,a){var u;const c=new i.CartItems,l=t.Id.value,d=n.SalesForceNamespace.namespace+"__SupplementalAction__c";let h,p,f,m,y;if(s||(h=e?e[n.SalesForceNamespace.namespace+"__InCartQuantityMap__c"].value:null,p=t.PricebookEntry.Product2.Id,f=t.Quantity.value,h&&this.changeLineItemCountInCardinalityMap(h,p,-1*f)),a||(e=o.CrossActionsService.removeLineItemFromParent(e,l)),r&&0===r.minQuantity&&r.defaultQuantity>0){if(!e.actions||e.actions&&!e.actions.getproducts){m=!0;for(const t of e.lineItems.records)(y=!!(t[n.SalesForceNamespace.namespace+"__Action__c"]&&"disconnect"===t[n.SalesForceNamespace.namespace+"__Action__c"].value.toLowerCase()||t[d]&&t[d].value&&"cancel"===t[d].value.toLowerCase()))||t.PricebookEntry.Product2.Id!==r.Product2.Id||(m=!1);m&&(e.childProducts||(e.childProducts={},e.childProducts.records=[]),e.childProducts.records.push(r))}}else if(r&&0===r.minQuantity&&0===r.defaultQuantity)if(e.actions&&e.actions.getproducts)c.removeAddonFromParent(e,t.PricebookEntryId.value);else if(null===(u=null===e||void 0===e?void 0:e.childProducts)||void 0===u?void 0:u.records)for(let t=0;t<e.childProducts.records.length;t++)if(e.childProducts.records[t].Product2.Id===r.Product2.Id){e.childProducts.records[t]=r;break}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(0),i=r(116),o=r(112);t.ItemUpdated=class{static handleCrossAction(e,t,r){const s=new i.CartItems,a=n.SalesForceNamespace.namespace+"__InCartQuantityMap__c";let u,c,l,d,h,p;return r&&(e.records.Id.value===r.Id.value?(l=r,r.attributeCategories=e.records.attributeCategories):l=i.CartItems.findAndReplaceLineItem(r,e.records.Id.value),e.records.lineItems&&e.records.lineItems.records&&e.records.lineItems.records.length>0&&(l[a]=e.records[a],e.records.lineItems.records.forEach(e=>{e.isVirtualItem||(u=e,(c=i.CartItems.findAndReplaceLineItem(l,e.Id.value))&&(u.lineItems=c.lineItems,u.productGroups=c.productGroups),l=s.insertLineItemToParent(l,u))})),e.records.productGroups&&e.records.productGroups.records&&e.records.productGroups.records.length>0&&(d=r,(p=o.CrossActionsService.findProductGroupsWithLineItemsAmongNodeList(e.records.productGroups.records)).forEach(e=>{(h=o.CrossActionsService.findProductGroupAmongNodeList(e.Id.value,e.productHierarchyPath,l.productGroups.records))[a]=e[a],e.lineItems.records.forEach(e=>{e.isVirtualItem||(u=e,(c=i.CartItems.findAndReplaceLineItem(h,e.Id.value))&&(u.lineItems=c.lineItems,u.productGroups=c.productGroups),h=s.insertLineItemToParent(h,u))})}))),r}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(338);e.exports=n.default},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):function(e){return e instanceof r?e:new r(function(t){t(e)})}(e.value).then(s,a)}u((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=r(0),o=r(21),s=r(15),a=r(92),u=r(49),c=r(161),l=r(162),d=r(163),h=r(167),p=r(168),f=r(169),m=r(170),y=r(339),g=r(340),v=r(171),b=r(172),I=r(341),_=r(342),w=r(343),P=r(346),S=r(348),C=r(349),T=r(350),A=r(351),E=r(352),R=r(353);class O extends i.BaseSDK{constructor(e){if(super(),this.cartItems={},this.deleteArrayListItems=["Attachments","actions","messages","childProducts","lineItems"],null===e.datasource||null===e.context)throw new Error("B2BExpress:constructor: B2BExpress didn't instantiated properly. Datasource, DigitalCommerce and user context objects have to be in Config object as argument.");this.datasource=e.datasource,this.context=e.context}set apiURL(e){e&&(c.default.anonymousSiteConfigUrl=e)}set authToken(e){e&&(c.default.authToken=e)}static createConfigForAnonymousUser(e){const t=new w.UserContext;return t.hasLogin=!1,e=e,{context:t,create:!1,datasource:new a.default({jsforceConnection:null})}}static createConfigForLoginUser(e,t,r){const n=new w.UserContext;return n.hasLogin=!0,{context:n,create:!1,datasource:new a.default({sessionId:t,url:e,proxyUrl:r})}}static getInstance(e){if(!O.instance&&!e)throw new Error("B2BExpress:getInstance: Config object must be provided in argument to create an instance the first time.");return(!O.instance||e&&e.create)&&(O.instance=new O(e)),O.instance}createWorkingCartInput(){return new h.CreateWorkingCartInput}createWorkingCartPreHook(e){return Promise.resolve(e)}createWorkingCartPostHook(e){return Promise.resolve(e)}createWorkingCart(e){return n(this,void 0,void 0,function*(){return e=yield this.createWorkingCartPreHook(e),this.invokeIntegrationProcedure(e,i.HttpMethod.POST).then(e=>n(this,void 0,void 0,function*(){return e=yield this.createWorkingCartPostHook(e)}))})}createAddProductToCartInput(){return new l.AddProductToCartInput}addProductToCartPreHook(e){return Promise.resolve(e)}addProductToCartPostHook(e,t){return Promise.resolve(e)}addProductToCart(e){return n(this,void 0,void 0,function*(){e.getRequestPayload(this.cartItems);if(e.parentObject){const t={records:[{}]};t.records[0]=Object.assign({},e.parentObject),[...this.deleteArrayListItems,"attributeCategories"].forEach(e=>{delete t.records[0][e]}),e.actionObj.remote&&e.actionObj.remote.params.items&&(e.actionObj.remote.params.items[0].parentRecord=t,e.actionObj.remote.params=Object.assign(e.actionObj.remote.params,{configureAndAdd:!1})),e.actionObj.rest&&e.actionObj.rest.params.items&&(e.actionObj.rest.params.items[0].parentRecord=t,e.actionObj.rest.params=Object.assign(e.actionObj.rest.params,{configureAndAdd:!1}))}return e=yield this.addProductToCartPreHook(e),this.invokeAction(e).then(t=>n(this,void 0,void 0,function*(){let r=t,n=null,i=null;if(!t.actions)return this.cartItems.messages=t.messages||[],Promise.reject(t);if(e.parentId){const o=this.createGetCartLineItemPricesInput();o.actionObj=t.actions.itempricesupdated;const s=yield this.getCartLineItemPrices(o),a=this.cartItems.records.find(t=>t.Id.value===e.rootBundleId),u=d.CartItems.findAndReplaceLineItem(a,e.parentObject.Id.value);r=yield d.CartItems.update(u,t,a,s),u.messages=t.records&&t.records.length?t.records[0].messages:[];const c=this.cartItems.records.findIndex(t=>t.Id.value===e.rootBundleId);n=u,i=r,this.cartItems.records[c]=r}else this.cartItems.records||(this.cartItems.records=[]),t.records&&(this.cartItems.records.unshift(t.records[0]),n=i=t.records[0]);this.cartItems=P.CrossActions.processCrossActions(t.actions,this.cartItems,n,i);const o=this.createGetCartSummaryInput();o.cartId=e.cartId||this.cartItems.prices.orderId;const s=yield this.getCartSummary(o);let a=d.CartItems.parse(s,e);return a=yield this.addProductToCartPostHook(a,s)}))})}itemsAttribute(e){return n(this,void 0,void 0,function*(){e.getRequestPayload(this.cartItems);const t=e.isRapidAttributeEnabled;return(e=yield this.itemsAttributePreHook(e)).actionObj.remote&&e.actionObj.remote.params&&(e.actionObj.remote.params.items=e.items,e.actionObj.remote.params.cartId=e.cartId,e.actionObj.remote.params.filters=null,e.actionObj.remote.params.itemId=e.itemId,e.actionObj.remote.params.id=e.id),this.invokeAction(e).then(r=>n(this,void 0,void 0,function*(){if(r.messages&&"161"===r.messages[0].code){const t=r.records[0];this.cartItems=d.CartItems.updateItemsAttribute(this.cartItems,t,e),this.cartItems.messages=r.messages}const n=yield this.itemsAttributePostHook(r);return t?d.CartItems.parse(this.cartItems,e):n}))})}itemsAttributePreHook(e){return Promise.resolve(e)}itemsAttributePostHook(e,t){return Promise.resolve(e)}createItemsAttributeInput(){return new y.ItemsAttributeInput}createUpdateCartLineItemInput(){return new b.UpdateCartLineItemInput}updateCartLineItemPreHook(e){return Promise.resolve(e)}updateCartLineItemPostHook(e,t){return Promise.resolve(e)}updateCartLineItem(e){return n(this,void 0,void 0,function*(){e.getRequestPayload(this.cartItems);const t=e.rootBundleId;let r=null,i=null,o={},s={};const a={records:[{}]};a.records[0]=Object.assign({},e.itemObject);const u=[...this.deleteArrayListItems,"productGroups"];return e.parentObject?(a.records[0]=Object.assign({},e.parentObject),u.forEach(e=>{delete a.records[0][e]}),u.forEach(t=>{delete e.itemObject[t]}),a.records[0].lineItems={records:[e.itemObject]}):(a.records[0]=Object.assign({},e.itemObject),u.forEach(e=>{delete a.records[0][e]})),e.actionObj.remote&&e.actionObj.remote.params&&(e.actionObj.remote.params.items=a,e.commitToShoppingCart&&(e.actionObj.remote.params=Object.assign(e.actionObj.remote.params,{bundleId:e.itemObject.Id.value,configureAndAdd:!0}))),e.actionObj.rest&&e.actionObj.rest.params&&(e.actionObj.rest.params.items=a,e.commitToShoppingCart&&(e.actionObj.rest.params=Object.assign(e.actionObj.rest.params,{bundleId:e.itemObject.Id.value,configureAndAdd:!0}))),e=yield this.updateCartLineItemPreHook(e),this.invokeAction(e).then(a=>n(this,void 0,void 0,function*(){if(!a.actions)return this.cartItems.messages=a.messages||[],Promise.reject(a);e.isRapidAttributeEnabled&&(this.cartItems.messages=a.messages);let n=null;if(!e.isRapidAttributeEnabled&&a.actions&&a.actions.itempricesupdated){const e=this.createGetCartLineItemPricesInput();e.actionObj=a.actions.itempricesupdated;const r=this.createGetCartSummaryInput();r.cartId=e.actionObj&&e.actionObj.remote.params.cartId||t||"",n=(o=yield Promise.all([this.getCartLineItemPrices(e),this.getCartSummary(r)]))&&o[0]||{},s=o&&o[1]||{}}const u=this.cartItems.records.find(t=>t.Id.value===e.rootBundleId);let c=null;e.parentId&&(c=d.CartItems.findAndReplaceLineItem(u,e.parentId),r=c);const l=yield d.CartItems.update(c||e.itemObject,a,u,n),h=this.cartItems.records.findIndex(t=>t.Id.value===e.rootBundleId);this.cartItems.records[h]=l,r?i=l:r=i=a.records[0],this.cartItems=P.CrossActions.processCrossActions(a.actions,this.cartItems,c,i);let p=e.isRapidAttributeEnabled?d.CartItems.parse(this.cartItems,e):d.CartItems.parse(s,e);return p=yield this.updateCartLineItemPostHook(p,s)}))})}createDeleteCartItemInput(){return new p.DeleteCartItemInput}deleteCartItemPreHook(e){return Promise.resolve(e)}deleteCartItemPostHook(e,t){return Promise.resolve(e)}deleteCartItem(e){return n(this,void 0,void 0,function*(){e.getRequestPayload(this.cartItems);const t={records:[{}]},r=e.itemObject.actions.deleteitem;let i=null,o=null;if(e.parentObject){t.records[0]=Object.assign({},e.parentObject),[...this.deleteArrayListItems,"attributeCategories"].forEach(e=>{delete t.records[0][e]}),r.remote&&r.remote.params&&(r.remote.params.items=[{parentRecord:{}}],r.remote.params.items[0].parentRecord=t),r.rest&&r.rest.params&&(r.rest.params.items=[{parentRecord:{}}],r.rest.params.items[0].parentRecord=t)}return e=yield this.deleteCartItemPreHook(e),this.invokeAction(e).then(t=>n(this,void 0,void 0,function*(){if(this.cartItems.crossActionMessages=t.messages&&t.messages.length?t.messages:null,e.rootBundleId===e.lineItemId){const r=this.cartItems.records.findIndex(t=>t.Id.value===e.rootBundleId);if(t&&t.records&&"Disconnect"===t.records[0].action){const r=this.cartItems.records.findIndex(t=>t.Id.value===e.rootBundleId);this.cartItems.records[r]=t.records[0]}else if(i=o=this.cartItems.records[r],this.cartItems.records.splice(r,1),t.actions){const e=t.actions.itemadded?t.actions.itemadded.client:null;this.cartItems=P.CrossActions.processCrossActions(t.actions,this.cartItems,i,o),e&&e.params.items&&!e.records&&(this.cartItems.crossActionMessages=this.cartItems.crossActionMessages.concat(e.params.items))}}else{const r=this.createGetCartLineItemPricesInput();if(t&&t.actions&&t.actions.itempricesupdated){r.actionObj=t.actions.itempricesupdated;const n=yield this.getCartLineItemPrices(r),i=this.cartItems.records.find(t=>t.Id.value===e.rootBundleId),o=d.CartItems.findAndReplaceLineItem(i,e.parentObject.Id.value),s=yield d.CartItems.updateDeleteItem(o,t,i,n,e),a=this.cartItems.records.findIndex(t=>t.Id.value===e.rootBundleId);this.cartItems.records[a]=s,this.cartItems=P.CrossActions.processCrossActions(t.actions,this.cartItems,o,s)}}const r=this.createGetCartSummaryInput();r.cartId=this.cartItems.prices.orderId;const n=yield this.getCartSummary(r);let s=d.CartItems.parse(n,e);return(s=yield this.deleteCartItemPostHook(s,t)).cartMessages=s.messages,s.messages=t.messages,s}))})}createGetCartLineItemPricesInput(){return new T.GetCartLineItemPricesInput}getCartLineItemPricesPreHook(e){return Promise.resolve(e)}getCartLineItemPricesPostHook(e){return Promise.resolve(e)}getCartLineItemPrices(e){return n(this,void 0,void 0,function*(){e=yield this.getCartLineItemPricesPreHook(e);let t=yield this.invokeAction(e);return t=yield this.getCartLineItemPricesPostHook(t)})}createGetCartItemsInput(){return new f.GetCartItemsInput}getCartItemsPreHook(e){return Promise.resolve(e)}getCartItemsPostHook(e,t){return Promise.resolve(e)}getCartItems(e){return n(this,void 0,void 0,function*(){const t=this.createGetCartSummaryInput();t.cartId=e.cartId,e=yield this.getCartItemsPreHook(e);const r=yield Promise.all([this.invokeAPI(e,i.HttpMethod.GET),this.getCartSummary(t)]);let n=[];e.actionObj.remote.params.lastRecordId&&(n=[...this.cartItems.records]),this.cartItems.records=r[0]&&r[0].records||[];let o=d.CartItems.parse(this.cartItems,e);return o=yield this.getCartItemsPostHook(o,r[1]||{}),this.cartItems.records=[...n,...this.cartItems.records],o})}createGetCartSummaryInput(){return new m.GetCartSummaryInput}getCartSummaryPreHook(e){return Promise.resolve(e)}getCartSummaryPostHook(e,t){return Promise.resolve(e)}getCartSummary(e){return n(this,void 0,void 0,function*(){e.actionObj=e.prepareGetCartSummaryActionObject(),e=yield this.getCartSummaryPreHook(e);const t=yield this.invokeAction(e);this.cartItems.messages=t.messages,this.cartItems.details=t.records[0];const r=t.records[0].details.records[0];return this.cartItems.prices={accountId:r["Account.Id"],accountName:r["Account.Name"],effectiveOneTimeTotal:r.EffectiveOneTimeTotal__c,effectiveOrderTotal:r.EffectiveOrderTotal__c,effectiveQuoteTotal:r.EffectiveQuoteTotal__c,effectiveRecurringTotal:r.EffectiveRecurringTotal__c,objectType:r.ObjectType,orderId:e.cartId,priceListId:r.PriceListId__c,status:r.Status,translatedLabels:r.translatedLabels},this.cartItems=yield this.getCartSummaryPostHook(this.cartItems,t),this.cartItems})}createApplyAdjustmentInput(){return new S.ApplyAdjustmentInput}applyAdjustmentsPreHook(e){return Promise.resolve(e)}applyAdjustmentsPostHook(e,t){return Promise.resolve(e)}applyAdjustment(e){return n(this,void 0,void 0,function*(){e.actionObj.remote&&e.actionObj.remote.params&&e.actionObj.remote.params.adjustments&&(e.actionObj.remote.params.adjustments[0]=Object.assign(e.actionObj.remote.params.adjustments[0],{AdjustmentMethod:e.adjustmentData.method,AdjustmentValue:parseFloat(e.adjustmentData.value),DetailType:e.adjustmentData.detailType}),e.adjustmentData.timePlan&&(e.actionObj.remote.params.adjustments[0].TimePlan=e.adjustmentData.timePlan,e.actionObj.remote.params.adjustments[0].TimePolicy=e.adjustmentData.timePolicy)),e.actionObj.rest&&e.actionObj.rest.params&&e.actionObj.rest.params.adjustments&&(e.actionObj.rest.params.adjustments[0]=Object.assign(e.actionObj.rest.params.adjustments[0],{AdjustmentMethod:e.adjustmentData.method,AdjustmentValue:parseFloat(e.adjustmentData.value),DetailType:e.adjustmentData.detailType}),e.adjustmentData.timePlan&&(e.actionObj.rest.params.adjustments[0].TimePlan=e.adjustmentData.timePlan,e.actionObj.rest.params.adjustments[0].TimePolicy=e.adjustmentData.timePolicy)),e=yield this.applyAdjustmentsPreHook(e);const t=yield this.invokeAction(e),r=t.messages&&t.messages.length?t.messages:null;if(!t.records)return this.cartItems.crossActionMessages=r,d.CartItems.parse(this.cartItems,e);this.cartItems.records=t.records;const n=this.createGetCartSummaryInput();n.cartId=this.cartItems.prices.orderId;const i=yield this.getCartSummary(n);i.crossActionMessages=r;let o=d.CartItems.parse(i,e);return o=yield this.applyAdjustmentsPostHook(o,t)})}getCartSummaryDetails(e,t){return e?JSON.parse(JSON.stringify(this.cartItems)):d.CartItems.parse(JSON.parse(JSON.stringify(this.cartItems)),t)}createCloneItemsInput(){return new _.CloneItemsInput}cloneItemsPreHook(e){return Promise.resolve(e)}cloneItemsPostHook(e,t){return Promise.resolve(e)}cloneItems(e){return n(this,void 0,void 0,function*(){e=yield this.cloneItemsPreHook(e);const t=yield this.invokeAction(e);let r=t,n=null,i=null;if(!r.records)return this.cartItems.messages=r.messages||[],Promise.reject(r);if(e.parentId){const o=this.createGetCartLineItemPricesInput();o.actionObj=r.actions.itempricesupdated;const s=yield this.getCartLineItemPrices(o),a=this.cartItems.records.find(t=>t.Id.value===e.rootBundleId),u=d.CartItems.findAndReplaceLineItem(a,e.parentId);r=yield d.CartItems.clone(u,t,a,s);const c=this.cartItems.records.findIndex(t=>t.Id.value===e.rootBundleId);n=u,i=r,this.cartItems.records[c]=r}else this.cartItems.records||(this.cartItems.records=[]),t.records&&(this.cartItems.records.unshift(t.records[0]),n=i=t.records[0]);this.cartItems=P.CrossActions.processCrossActions(t.actions,this.cartItems,n,i);const o=this.createGetCartSummaryInput();o.cartId=this.cartItems.prices.orderId;const s=yield this.getCartSummary(o);let a=d.CartItems.parse(s,e);return a=yield this.cloneItemsPostHook(a,r)})}createDeletePriceAdjustmentInput(){return new C.DeletePriceAdjustmentInput}deletePriceAdjustmentsPreHook(e){return Promise.resolve(e)}deletePriceAdjustmentsPostHook(e,t){return Promise.resolve(e)}deletePriceAdjustments(e){return n(this,void 0,void 0,function*(){e=yield this.deletePriceAdjustmentsPreHook(e);const t=yield this.invokeAction(e);if(!t.records)return this.cartItems;this.cartItems.records=t.records;const r=this.createGetCartSummaryInput();r.cartId=this.cartItems.prices.orderId;const n=yield this.getCartSummary(r);let i=d.CartItems.parse(n,e);return i=yield this.deletePriceAdjustmentsPostHook(i,this.cartItems)})}createGetPriceDetailsInput(){return new A.GetPriceDetailsInput}getPriceDetailsPreHook(e){return Promise.resolve(e)}getPriceDetailsPostHook(e,t){return Promise.resolve(e)}getPriceDetails(e){return n(this,void 0,void 0,function*(){e=yield this.getPriceDetailsPreHook(e);const t=yield this.invokeAction(e);let r=g.PriceAdjustment.parse(t,e.customFields);return r=yield this.getPriceDetailsPostHook(r,t)})}createGetTimeListsInput(){return new E.GetTimeListsInput}getTimeListsPreHook(e){return Promise.resolve(e)}getTimeListsPostHook(e,t){return Promise.resolve(e)}getTimeLists(e){return n(this,void 0,void 0,function*(){e=yield this.getTimeListsPreHook(e);const t=yield this.invokeAction(e);let r=v.TimeList.parse(t,e.customFields);return r=yield this.getTimeListsPostHook(r,t)})}createGetCartProductsInput(){return new R.GetCartProductsInput}getCartProductsPreHook(e){return Promise.resolve(e)}getCartProductsPostHook(e,t){return Promise.resolve(e)}getCartProducts(e){return n(this,void 0,void 0,function*(){e=yield this.getCartProductsPreHook(e);const t=yield this.invokeAPI(e,i.HttpMethod.GET);let r=d.CartItems.parse(t,e);return r=yield this.getCartProductsPostHook(r,t)})}createGetCatalogsInput(){return new I.GetCatalogsInput}getCatalogsPreHook(e){return Promise.resolve(e)}getCatalogsPostHook(e){return Promise.resolve(e)}getCatalogs(e){return n(this,void 0,void 0,function*(){e=yield this.getCatalogsPreHook(e);let t=yield this.invokeAPI(e,i.HttpMethod.GET);return t=yield this.getCatalogsPostHook(t)})}invokeDataRaptor(e){return n(this,void 0,void 0,function*(){const t={bundleName:e.bundleName,inputMap:e.inputMap,inputParamsString:e.inputParamsString,cacheable:e.cacheable,reload:e.reload,cacheExpiration:e.cacheExpiration||new Date((new Date).getTime()+3e5),timeoutInMillis:e.timeoutInMillis},r=this.datasource.dataRaptorInput(t);return yield this.datasource.dataRaptor(r).execute()})}invokeIntegrationProcedure(e,t){return n(this,void 0,void 0,function*(){const r=new s.ApexRestInput({body:e.getRequestPayload?e.getRequestPayload():e.inputMap,method:t});e.chainable&&(r.options={headers:{chainable:!0}});const n={optionsMap:e.optionsMap,procedureKey:e.ipMethod,input:e.getRequestPayload?e.getRequestPayload():e.inputMap,cacheable:e.cacheable,rest:r,reload:e.reload,cacheExpiration:e.cacheExpiration||new Date((new Date).getTime()+3e5),timeoutInMillis:e.timeoutInMillis},i=this.datasource.integrationProcedureInput(n);return yield this.datasource.integrationProcedure(i).execute()})}invokeAction(e){return n(this,void 0,void 0,function*(){if(this.context.hasLogin){const t=new s.ApexRestInput({body:e.actionObj.rest.params,method:e.actionObj.rest.method,path:e.actionObj.rest.link,cacheable:e.cacheable||!1,reload:e.reload||!1,cacheExpiration:e.cacheExpiration||new Date((new Date).getTime()+3e5),timeoutInMillis:e.timeoutInMillis||2e4}),r=new o.ApexRemoteInput({className:e.remoteClass,inputMap:e.actionObj.remote.params||{},methodName:e.actionObj.remote&&e.actionObj.remote.params.methodName||e.remoteMethod,cacheable:e.cacheable||!1,reload:e.reload||!1,cacheExpiration:e.cacheExpiration||new Date((new Date).getTime()+3e5),timeoutInMillis:e.timeoutInMillis||2e4});return yield this.datasource.dual(t,r).execute()}})}invokeAPI(e,t){return n(this,void 0,void 0,function*(){if(this.context.hasLogin){const r=new s.ApexRestInput({body:e.getRequestPayload(),method:t,path:e.getAPIPath(),cacheable:e.cacheable,reload:e.reload,cacheExpiration:e.cacheExpiration||new Date((new Date).getTime()+3e5),timeoutInMillis:e.timeoutInMillis}),n=new o.ApexRemoteInput({className:e.remoteClass,inputMap:e.actionObj&&e.actionObj.remote.params||{},methodName:e.actionObj&&e.actionObj.remote.params.methodName||e.remoteMethod,cacheable:e.cacheable,reload:e.reload,cacheExpiration:e.cacheExpiration||new Date((new Date).getTime()+3e5),timeoutInMillis:e.timeoutInMillis});return yield this.datasource.dual(r,n).execute()}{const r=e.getAnonymousSiteRestUrl();let n;return n="POST"===t||"PUT"===t?new u.RestInput({options:{body:"object"==typeof e.getRequestPayload()?JSON.stringify(e.getRequestPayload()):e.getRequestPayload(),headers:{Authorization:c.default.authToken,"Content-Type":e.contentType},method:t},url:r,cacheable:e.cacheable,reload:e.reload,cacheExpiration:e.cacheExpiration||new Date((new Date).getTime()+3e5),timeoutInMillis:e.timeoutInMillis}):new u.RestInput({options:{headers:{Authorization:c.default.authToken},method:t},url:r,cacheable:e.cacheable,reload:e.reload,cacheExpiration:e.cacheExpiration||new Date((new Date).getTime()+3e5),timeoutInMillis:e.timeoutInMillis}),yield this.datasource.rest(n).execute()}})}}t.default=O},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(6),i=r(57);t.ItemsAttributeInput=class extends i.B2BInput{constructor(){super(...arguments),this.isRapidAttributeEnabled=!1}getAPIPath(){return""}getRequestPayload(e){if(!this.actionObj)throw new Error("ItemsAttributeInput must have actionObj.");if(!this.cartId)throw new Error("ItemsAttributeInput must have cartId.");if(!this.id)throw new Error("ItemsAttributeInput must have id.");if(!this.itemId)throw new Error("ItemsAttributeInput must have itemId.");if(!this.items)throw new Error("ItemsAttributeInput must have items.");return e.records.find(e=>e.Id.value===this.itemId),this.actionObj}getInputMap(){return{}}getAnonymousSiteRestUrl(){return""}getEncodedQueryString(){return n.queryStringEncode(this.getInputMap(),!0,[])}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(0),i=r(6);class o{constructor(){this.records=[]}static parse(e,t){const r=new o;return e&&e.records&&e.records.forEach(e=>{const o={};let s="oneTimeCharge",a=e[n.SalesForceNamespace.namespace+"__OneTimeCharge__c"];a||(s="recurringCharge",a=e[n.SalesForceNamespace.namespace+"__RecurringCharge__c"]),o.id=e.id,o.value=a.value,o.chargeType=s,a&&(o.priceDetails=[],a.pricedetail.forEach(e=>{const r=i.objectMap([e],["actions","AdjustmentMethod#adjustmentMethod","AdjustmentType#adjustmentType","AdjustmentValue#adjustmentValue","Description#description","DetailType#detailType","EndValue#endValue","StartValue#startValue"].concat(t))[0];"None"===r.adjustmentType&&null===r.adjustmentValue&&(r.adjustmentValue=r.startValue),o.priceDetails.push(r)})),t&&t.length&&t.map(t=>{e.hasOwnProperty(t)&&(o[t]=e[t])}),r.records.push(o)}),r}}t.PriceAdjustment=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(0),i=r(6),o=r(57);t.GetCatalogsInput=class extends o.B2BInput{constructor(){super(...arguments),this.fieldsToInclude=["ContextId","pagesize","offsetSize","hierarchy","fields","sortBy"],this.remoteClass="CpqAppHandler",this.remoteMethod="getCatalogHierarchy"}getAPIPath(){return`${n.SalesForceNamespace.restAPIPrefix}/v2/cpq/catalogs`+this.getEncodedQueryString()}getRequestPayload(e){return{}}getInputMap(){const e={};return this.fieldsToInclude.forEach(t=>{this[t]&&(e[t]=this[t])}),this.cartId&&(e.ContextId=this.cartId),this.fields&&(e.fields=this.fields.join(",")),this.sortBy&&(e.sortBy=this.sortBy.join(",")),e}getAnonymousSiteRestUrl(){return""}getEncodedQueryString(){return i.queryStringEncode(this.getInputMap(),!0,this.fieldsToInclude)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(57);t.CloneItemsInput=class extends n.B2BInput{constructor(){super(...arguments),this.remoteClass="CpqAppHandler",this.remoteMethod="cloneItems"}getAPIPath(){return""}getRequestPayload(e){return{}}getInputMap(){return{}}getAnonymousSiteRestUrl(){return""}getEncodedQueryString(){return""}}},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(344)),n(r(57)),n(r(345))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Action=class{}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.UserContext=class{constructor(){this.hasLogin=!1,this.currencyCode="USD",this.currencySymbol="$"}}},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(347)),n(r(173)),n(r(174)),n(r(175)),n(r(112))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(116),i=r(112),o=r(173),s=r(174),a=r(175);t.CrossActions=class{static processCrossActions(e,t,r,u){let c=[];if(e){if(t.crossActionMessages=[],e.itemadded&&e.itemdeleted){const e={message:"Auto-replace rule has been triggered.  It will auto-add one item to replace another item which would be auto-removed from the cart"};t.crossActionMessages=t.crossActionMessages.concat(e)}for(const l of Object.keys(e)){const d=e[l].client,h=d&&d.records;"itemdeleted"===l&&(c=d.params.items),h&&(e[l].client&&e[l].client.params.items&&(t.crossActionMessages=t.crossActionMessages.concat(e[l].client.params.items)),h.forEach(e=>{let d=[],h=[];switch(l){case"itemadded":const p=n.CartItems.findRootFromGivenLineItem(t.records,e.Id.value);let f=0;p&&(f=p.index,u=p.lineItem);const m=o.ItemAdded.handleCrossAction({records:e},r,u);t.records[f]=m;break;case"rootitemadded":t.records.unshift(e);break;case"itemdeleted":d=e.childProducts&&e.childProducts.records||e.productGroups&&e.productGroups.records,!e.isRootRecord&&d?d.forEach(r=>{r.isVirtualItem?h=i.CrossActionsService.findChildItemInProductGroups(r):s.ItemDeleted.handleCrossAction(c,e,r,u),h&&h.forEach(e=>{s.ItemDeleted.handleCrossAction(c,r,e,u)}),u.itemsToBeDeleted&&u.itemsToBeDeleted.length&&u.itemsToBeDeleted.forEach(e=>{t=this.deleteCartItem(t,e)});const n=t.records.findIndex(e=>e.Id.value===u.Id.value);-1!==n&&(t.records[n]=u)}):t=this.deleteCartItem(t,e.Id);break;case"itemupdated":const y=n.CartItems.findRootFromGivenLineItem(t.records,e.Id.value);let g=0;y&&(g=y.index,u=y.lineItem);const v=a.ItemUpdated.handleCrossAction({records:e},r,u);t.records[g]=v}}))}return t}}static deleteCartItem(e,t){const r=e.records.findIndex(e=>e.Id.value===t);return-1!==r&&e.records.splice(r,1),e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(57);t.ApplyAdjustmentInput=class extends n.B2BInput{constructor(){super(...arguments),this.remoteClass="CpqAppHandler",this.remoteMethod="getPriceDetail"}getAPIPath(){return""}getRequestPayload(e){return{}}getInputMap(){return{}}getAnonymousSiteRestUrl(){return""}getEncodedQueryString(){return""}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(57);t.DeletePriceAdjustmentInput=class extends n.B2BInput{constructor(){super(...arguments),this.remoteClass="CpqAppHandler",this.remoteMethod="deleteAdjustment"}getAPIPath(){return""}getRequestPayload(e){return{}}getInputMap(){return{}}getAnonymousSiteRestUrl(){return""}getEncodedQueryString(){return""}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(57);t.GetCartLineItemPricesInput=class extends n.B2BInput{constructor(){super(...arguments),this.remoteClass="CpqAppHandler",this.remoteMethod="getPricelists"}getAPIPath(){return""}getRequestPayload(e){return{}}getInputMap(){return{}}getAnonymousSiteRestUrl(){return""}getEncodedQueryString(){return""}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(57);t.GetPriceDetailsInput=class extends n.B2BInput{constructor(){super(...arguments),this.remoteClass="CpqAppHandler",this.remoteMethod="getPriceDetail"}getAPIPath(){return""}getRequestPayload(e){return{}}getInputMap(){return{}}getAnonymousSiteRestUrl(){return""}getEncodedQueryString(){return""}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(57);t.GetTimeListsInput=class extends n.B2BInput{constructor(){super(...arguments),this.remoteClass="CpqAppHandler"}getAPIPath(){return""}getRequestPayload(e){return{}}getInputMap(){return{}}getAnonymousSiteRestUrl(){return""}getEncodedQueryString(){return""}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(0),i=r(6),o=r(57);t.GetCartProductsInput=class extends o.B2BInput{constructor(){super(...arguments),this.fieldsToInclude=["lastRecordId","includeAttachment","filters","includeIneligible","attributes","includeAttributes","query","pagesize","offsetSize","hierarchy","category","fields"],this.hierarchy=0,this.remoteClass="CpqAppHandler",this.remoteMethod="getCartsProducts"}getAPIPath(){if(!this.cartId&&!this.actionObj)throw new Error("GetCartProductsInput::getAPIPath() must have cartId.");return`${n.SalesForceNamespace.restAPIPrefix}/v2/cpq/carts/${this.cartId}/products`+this.getEncodedQueryString()}getRequestPayload(e){return{}}getInputMap(){const e={};return this.fieldsToInclude.forEach(t=>{this[t]&&(e[t]=this[t])}),this.fields&&(e.fields=this.fields.join(",")),e}getAnonymousSiteRestUrl(){return""}getEncodedQueryString(){return i.queryStringEncode(this.getInputMap(),!0,this.fieldsToInclude)}}}])});
//# sourceMappingURL=b2bexpress.sdk.js.map