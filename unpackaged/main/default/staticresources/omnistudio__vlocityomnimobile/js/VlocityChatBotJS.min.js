!function(){var fileNsPrefix=function(){"use strict";var scripts;try{scriptName=document.currentScript}catch(err){console.info("Locker vNext is not enabled")}var scriptName=(scriptName=!scriptName?(scripts=document.getElementsByTagName("script"))[scripts.length-1]:scriptName).src,parts=scriptName.split("/"),partsLength=parts.length-1,thisScript=parts[partsLength--];if(""===thisScript&&(thisScript=parts[partsLength--]),-1!=scriptName.indexOf("__"))for(;-1==thisScript.indexOf("__")&&0<=partsLength;)thisScript=parts[partsLength],partsLength--;var lowerCasePrefix=-1==thisScript.indexOf("__")?"":thisScript.substring(0,thisScript.indexOf("__")+2);if(0===(lowerCasePrefix=""!==(lowerCasePrefix=""===lowerCasePrefix&&localStorage.getItem("nsPrefix")?localStorage.getItem("nsPrefix"):lowerCasePrefix)?/__$/.test(lowerCasePrefix)?lowerCasePrefix:lowerCasePrefix+"__":lowerCasePrefix).length)return function(){return lowerCasePrefix=""!==(lowerCasePrefix=window.nsPrefix||lowerCasePrefix)?/__$/.test(lowerCasePrefix)?lowerCasePrefix:lowerCasePrefix+"__":lowerCasePrefix};var resolvedNs=null;return function(){if(resolvedNs)return resolvedNs;try{var name,tofind=lowerCasePrefix.replace("__",""),scanObjectForNs=function(object,alreadySeen){if(object&&object!==window&&-1==alreadySeen.indexOf(object)&&(alreadySeen.push(object),Object.keys(object).forEach(function(result){if("ns"===result&&"string"==typeof object[result]&&object[result].toLowerCase()===tofind)return name=object[result]+"__",!1;if("[object Array]"===Object.prototype.toString.call(object[result]))object[result].forEach(function(result){result=scanObjectForNs(result,alreadySeen);if(result)return name=result,!1});else if("object"==typeof object[result]){result=scanObjectForNs(object[result],alreadySeen);if(result)return name=result,!1}return!name&&void 0}),name))return name};return"undefined"==typeof Visualforce?lowerCasePrefix:(scanObjectForNs(Visualforce.remoting.Manager.providers,[]),resolvedNs=name||lowerCasePrefix)}catch(e){return lowerCasePrefix}}}(),fileNsPrefixDot=function(){var prefix=fileNsPrefix();return 1<prefix.length?prefix.replace("__","."):prefix};!function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var p="function"==typeof require&&require;if(!f&&p)return p(i,!0);if(u)return u(i,!0);throw(p=new Error("Cannot find module '"+i+"'")).code="MODULE_NOT_FOUND",p}p=n[i]={exports:{}},e[i][0].call(p.exports,function(r){return o(e[i][1][r]||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}({1:[function(require,module,exports){"{!$Api.Session_ID}"===window.sessionId&&(window.OmniOut=!0),require("./polyfills/Object.assign.js"),require("./modules/omni-out/main.js"),angular.module("vlocity-bot-form",[]),angular.module("vlocity-oui-common",[]),"default"===window.cbModuleList?(window.cbModuleList=["forceng","vlocity-oui-common","vlocity-bot-form","sldsangular","ui.utils.masks","viaDirectives","ui.mask","ngAria"],window.OmniOut&&window.cbModuleList.push("vlocity-omni-out")):window.cbModuleList=window.cbModuleList.split(","),angular.module("vlocity-chat-bot",window.cbModuleList),require("./modules/common/shared/osLabelSet.js"),require("./modules/common/shared/misc.js"),require("./modules/common/factory/baseService.js"),require("./modules/common/directives/baseChainup.js"),require("./modules/common/controller/OmniFormController.js"),require("./modules/chatBot/controller/chatClientController.js"),require("./modules/chatBot/factory/chatBotFactory.js"),require("./modules/common/factory/currencySymbol.js"),require("./modules/common/directives/OmniForm.js"),require("./modules/common/directives/OmniFormChild.js"),require("./modules/common/directives/appFileReader.js"),require("./modules/common/directives/vlcDateTimeFormatVal.js"),require("./modules/common/directives/vlcSldsValChecker.js"),require("./modules/common/directives/vlcSldsNgPattern.js"),require("./modules/common/directives/vlcSldsMinMaxLen.js"),require("./modules/common/directives/vlcSldsCheckValChecker.js"),require("./modules/common/directives/vlcSldsBubbleCanceller.js"),require("./modules/common/directives/vlcSldsValCheckCurrency.js"),require("./modules/common/directives/vlcSldsMuValChecker.js"),require("./modules/common/directives/vlcSldsFileSelect.js"),require("./modules/common/directives/vlcSldsNumValChecker.js"),require("./modules/common/directives/vlcSldsOnlyNumeric.js"),require("./modules/common/directives/vlcRangeSlider.js"),require("./modules/common/directives/vlcLookupControl.js"),require("./modules/common/directives/vlcBindHtml.js"),require("./modules/common/directives/vlcSldsToolTip.js"),require("./modules/chatBot/directives/chatMessage.js"),require("./modules/chatBot/directives/chatScrollUpdate.js")},{"./modules/chatBot/controller/chatClientController.js":2,"./modules/chatBot/directives/chatMessage.js":3,"./modules/chatBot/directives/chatScrollUpdate.js":4,"./modules/chatBot/factory/chatBotFactory.js":5,"./modules/common/controller/OmniFormController.js":6,"./modules/common/directives/OmniForm.js":7,"./modules/common/directives/OmniFormChild.js":8,"./modules/common/directives/appFileReader.js":9,"./modules/common/directives/baseChainup.js":10,"./modules/common/directives/vlcBindHtml.js":11,"./modules/common/directives/vlcDateTimeFormatVal.js":12,"./modules/common/directives/vlcLookupControl.js":13,"./modules/common/directives/vlcRangeSlider.js":14,"./modules/common/directives/vlcSldsBubbleCanceller.js":15,"./modules/common/directives/vlcSldsCheckValChecker.js":16,"./modules/common/directives/vlcSldsFileSelect.js":17,"./modules/common/directives/vlcSldsMinMaxLen.js":18,"./modules/common/directives/vlcSldsMuValChecker.js":19,"./modules/common/directives/vlcSldsNgPattern.js":20,"./modules/common/directives/vlcSldsNumValChecker.js":21,"./modules/common/directives/vlcSldsOnlyNumeric.js":22,"./modules/common/directives/vlcSldsToolTip.js":23,"./modules/common/directives/vlcSldsValCheckCurrency.js":24,"./modules/common/directives/vlcSldsValChecker.js":25,"./modules/common/factory/baseService.js":26,"./modules/common/factory/currencySymbol.js":27,"./modules/common/shared/misc.js":28,"./modules/common/shared/osLabelSet.js":29,"./modules/omni-out/main.js":32,"./polyfills/Object.assign.js":35}],2:[function(require,module,exports){var HtmlEncodeDecode=require("../../oui/util/HtmlEncodeDecode.js");angular.module("vlocity-chat-bot").controller("vlcChatCtrl",function($scope,ouiBaseService,force,$sce,$q,$window,$timeout){VOUINS.initiateForce($scope,force),$scope.isSforce="undefined"!=typeof sforce&&null!=sforce,$scope.sforce="undefined"!=typeof sforce?sforce:null,$scope.chatBotIconUrl=chatBotIconUrl,$scope.mode=sfdcVars.mode&&""!=sfdcVars.mode?sfdcVars.mode:null,$scope.customLabels=customLabels,$scope.convHistory=[],$scope.typeInMsg={text:""},$scope.botJSON={},$scope.DfltIPkey=sfdcVars.botName;var queryParams=sfdcVars.urlParams;window.OmniOut&&(queryParams=VOUINS.getQueryParams());if(queryParams&&queryParams.constructor===Object){for(var key in queryParams)queryParams.hasOwnProperty(key)&&("true"===queryParams[key]&&(queryParams[key]=!0),"false"===queryParams[key]&&(queryParams[key]=!1));(_.mergeWith||_.merge)($scope.botJSON,queryParams,VOUINS.mergeJSONLogic)}queryParams&&(queryParams.botName&&($scope.DfltIPkey=queryParams.botName),queryParams.mode&&($scope.mode=queryParams.mode));$scope.ofc=0,$scope.ofcCount=0,$scope.displayFormIndex=-1,$scope.sendMsgCounter=0,$scope.respBotForm,$scope.chatPrefill={},$scope.chatOutput={};var dftSubmitParams={extraInput:{input:{text:"yes"}}};$scope.submitParams=dftSubmitParams;var dftCancelParams={extraInput:{input:{text:"no"}},inputIP:$scope.DfltIPkey};$scope.cancelParams=dftCancelParams,$scope.debug=queryParams.debug,!0!==$scope.debug&&($scope.debug=!1);$scope.sendMessage=function(msg){if(0==$scope.sendMsgCounter)queryParams.userInput&&($scope.typeInMsg.text=queryParams.userInput),$scope.sendMsgCounter++;else if($scope.sendMsgCounter++,!$scope.typeInMsg.text)return;$scope.typeInMsg.text&&$scope.convHistory.push({type:"userMsg",text:$scope.typeInMsg.text});var payload={};$scope.context&&(payload.context=$scope.context),0<=$scope.displayFormIndex&&($scope.convHistory[$scope.displayFormIndex].control.OmniDef.response&&(_.mergeWith||_.merge)($scope.botJSON,$scope.convHistory[$scope.displayFormIndex].control.OmniDef.response,VOUINS.mergeJSONLogic),$scope.displayFormIndex=-1),(_.mergeWith||_.merge)(payload,$scope.botJSON,VOUINS.mergeJSONLogic);var dbgConfigObj={};payload.input={text:$scope.typeInMsg.text},$scope.typeInMsg.text="";var configObj={sClassName:sfdcVars.sNS+".IntegrationProcedureService",sMethodName:$scope.DfltIPkey,input:angular.toJson(payload),options:angular.toJson(dbgConfigObj),iTimeout:12e4,label:""};$scope.debug&&(dbgConfigObj={sClassName:sfdcVars.sNS+".IntegrationProcedureService",sMethodName:$scope.DfltIPkey,input:payload,options:dbgConfigObj,iTimeout:12e4,label:""},$scope.convHistory.push({type:"debugJSON",text:"TO SERVER: "+JSON.stringify(dbgConfigObj,null,2)})),ouiBaseService.OmniRemoteInvoke(configObj).then(function(ipResult){ipResult=angular.fromJson(ipResult);$scope.debug&&$scope.convHistory.push({type:"debugJSON",text:"FROM SERVER: "+JSON.stringify(angular.copy(ipResult),null,2)}),ipResult.error&&("OK"!==ipResult.error?($scope.convHistory.push({type:"botMsg",text:$sce.trustAsHtml(HtmlEncodeDecode.escapeHTML($scope.customLabels.ChatBotNotAvailable))}),console.log("BOT error: "+angular.toJson(ipResult.error))):(ipResult=ipResult.IPResult,$scope.updateChat(ipResult)))},function(error){$scope.convHistory.push({type:"botMsg",text:$sce.trustAsHtml(HtmlEncodeDecode.escapeHTML($scope.customLabels.ChatBotNotAvailable))}),console.log("BOT error: "+angular.toJson(error))})},$scope.updateChat=function(ipResult){if(ipResult.output){if(ipResult.OmniDef&&(ipResult.OmniInput={},ipResult.OmniInput.OmniDef=ipResult.OmniDef,ipResult.OmniInput.OmniPostAction=ipResult.OmniPostAction,ipResult.OmniInput.OmniPrefillJSON=ipResult.OmniPrefillJSON,delete ipResult.OmniDef,delete ipResult.OmniPostAction,delete ipResult.OmniPrefillJSON),ipResult.context&&($scope.context=ipResult.context),ipResult.botJSON&&(_.mergeWith||_.merge)($scope.botJSON,ipResult.botJSON,VOUINS.mergeJSONLogic),ipResult.output.text&&angular.isArray(ipResult.output.text))for(var i=0;i<ipResult.output.text.length;i++)ipResult.output.text[i]&&(ipResult.output.text[i]=$sce.trustAsHtml(ipResult.output.text[i]),$scope.convHistory.push({type:"botMsg",text:ipResult.output.text[i]}));var omniForm;ipResult.OmniInput&&ipResult.OmniInput.OmniDef&&(ipResult.OmniInput.OmniDef=angular.fromJson(ipResult.OmniInput.OmniDef),(omniForm=ipResult.OmniInput.OmniDef)&&($scope.ofc=$scope.ofcCount,omniForm.propSetMap&&omniForm.propSetMap.displayOnly?(omniForm.sOmniScriptId=omniForm.sOmniScriptId+"--"+$scope.ofc,$scope.debug&&(ipResult.OmniInput.OmniDef.debug=!0),$scope.convHistory.push({type:"displayBotForm",control:ipResult.OmniInput}),$scope.displayFormIndex=$scope.convHistory.length-1):($scope.respBotForm=ipResult.OmniInput,$scope.chatPrefill=$scope.botJSON,$scope.context&&((_.mergeWith||_.merge)($scope.submitParams.extraInput,{context:$scope.context},VOUINS.mergeJSONLogic),(_.mergeWith||_.merge)($scope.submitParams.extraInput,$scope.botJSON,VOUINS.mergeJSONLogic),$scope.submitParams.inputIP=$scope.DfltIPkey,(_.mergeWith||_.merge)($scope.cancelParams.extraInput,{context:$scope.context},VOUINS.mergeJSONLogic),(_.mergeWith||_.merge)($scope.cancelParams.extraInput,$scope.botJSON,VOUINS.mergeJSONLogic))),$scope.ofcCount++))}},$scope.$watchCollection("chatOutput",function(newValue,oldValue){var userMsg;!angular.equals(newValue,oldValue)&&newValue&&("submitting"===newValue.vlcOmniFormStatus||"cancelling"===newValue.vlcOmniFormStatus?("submitting"===newValue.vlcOmniFormStatus&&$scope.submitParams&&$scope.submitParams.extraInput&&$scope.submitParams.extraInput.input&&$scope.submitParams.extraInput.input.text?userMsg=$scope.submitParams.extraInput.input.text:"cancelling"===newValue.vlcOmniFormStatus&&$scope.cancelParams&&$scope.cancelParams.extraInput&&$scope.cancelParams.extraInput.input&&$scope.cancelParams.extraInput.input.text&&(userMsg=$scope.cancelParams.extraInput.input.text),userMsg&&$scope.convHistory.push({type:"userMsg",text:userMsg}),"submitting"===newValue.vlcOmniFormStatus&&$scope.convHistory.push({type:"botForm",control:angular.copy($scope.respBotForm)}),delete $scope.respBotForm,$scope.submitParams=dftSubmitParams,$scope.cancelParams=dftCancelParams,$scope.chatPrefill={}):"submit"!==newValue.vlcOmniFormStatus&&"cancel"!==newValue.vlcOmniFormStatus||(!1===newValue.callSuccess?newValue.vlcOmniFormResp&&($scope.convHistory.push({type:"botMsg",text:$sce.trustAsHtml(HtmlEncodeDecode.escapeHTML($scope.customLabels.ChatBotNotAvailable))}),console.log("BOT error: "+angular.toJson(newValue.vlcOmniFormResp))):newValue.vlcOmniFormResp&&newValue.vlcOmniFormResp.IPResult&&($scope.debug&&$scope.convHistory.push({type:"debugJSON",text:"FROM SERVER: "+JSON.stringify(angular.copy(newValue.vlcOmniFormResp),null,2)}),$scope.updateChat(newValue.vlcOmniFormResp.IPResult)),$scope.chatOutput={}))})})},{"../../oui/util/HtmlEncodeDecode.js":34}],3:[function(require,module,exports){angular.module("vlocity-chat-bot").directive("vlcChatMsg",function($compile,$templateCache,chatService,$timeout){"use strict";return{restrict:"E",replace:!0,transclude:!0,require:"?ngModel",scope:!1,link:function(scope,ele,attrs,ngModel){var htmlMarkup=$templateCache.get(chatService.chatTypeHTMLTpltMap[scope.message.type]);$compile(htmlMarkup)(scope,function(cloned,scope){ele.append(cloned),$timeout(function(){scope.$emit("chat_updated")})})}}})},{}],4:[function(require,module,exports){angular.module("vlocity-chat-bot").directive("chatScrollUpdate",function(){"use strict";return{restrict:"A",link:function(scope,ele,attrs){scope.$on(attrs.chatScrollUpdate,function(){var current=angular.element(ele)[0],allmsgs=document.querySelectorAll("vlc-chat-msg");0<document.querySelectorAll(".vlc-chat-user").length&&(current.scrollTop=document.querySelector(".chatbot-msg-container").clientHeight-allmsgs[allmsgs.length-1].clientHeight)})}}})},{}],5:[function(require,module,exports){angular.module("vlocity-chat-bot").factory("chatService",function(){"use strict";var factory={chatTypeHTMLTpltMap:{botMsg:"vlcChatBotMsg.html",userMsg:"vlcChatUserMsg.html",botForm:"vlcBotForm.html",displayBotForm:"vlcDisplayBotForm.html",debugJSON:"vlcBotDebugJSON.html"}};return(_.mergeWith||_.merge)(factory.chatTypeHTMLTpltMap,sfdcVars.eleTypeToHTMLTemplateMap,VOUINS.mergeJSONLogic),factory})},{}],6:[function(require,module,exports){window.VOUINS=window.VOUINS||{},VOUINS.OmniFormCtrl=function($scope,ouiBaseService,$timeout,$rootScope,$q,currencySymbol,$window,force,$filter){function setActionStatus(status,response,callSuccess){$scope.output=$scope.output||{},$scope.output.vlcOmniFormResp=response,$scope.output.callSuccess=callSuccess,$scope.output.vlcOmniFormStatus=status,$scope.actionStatus.callSuccess=callSuccess,$scope.actionStatus.vlcOmniFormStatus=status}$scope.customLabels=customLabels,$scope.ouiBaseService=ouiBaseService,$scope.isSforce="undefined"!=typeof sforce&&null!=sforce,$scope.sforce="undefined"!=typeof sforce?sforce:null,$scope.actionStatus={},$scope.isFormValid=!0,VOUINS.initiateForce($scope,force),$scope.reset=function(){$scope.bpTree.readOnly=!1,$scope.submitted=!1,$scope.actionStatus={}},$scope.cancel=function(){setActionStatus("cancelling",null,null),$scope.processAction($scope.cancelParams,"cancel")},$scope.submit=function(){$scope.isFormValid=!$scope.checkValidity($scope,0,0,"Submit",null,!0),$scope.isFormValid&&(setActionStatus("submitting",null,null),$scope.submitted=!0,$scope.processAction($scope.submitParams,"submit"))},$scope.processAction=function(params,type){var IPKey;params=params||{};var payload,configObj,option={},namespace=sfdcVars.sNS;$scope.bpTree||($scope.bpTree={}),params.vlcOmniFormClose=$scope.bpTree.vlcOmniFormClose,(IPKey=(IPKey="submit"===type&&$scope.omniInput.OmniPostAction?$scope.omniInput.OmniPostAction:IPKey)||params.inputIP)&&(payload=params.extraInput||{},$scope.bpTree.response&&(_.mergeWith||_.merge)(payload,$scope.bpTree.response,VOUINS.mergeJSONLogic),$scope.bpTree.filesMap&&(option.vlcFilesMap=VOUINS.getFilesMap($scope.bpTree.filesMap,$scope.isSforce,$scope.sforce)),configObj={sClassName:namespace+".IntegrationProcedureService",sMethodName:IPKey,input:angular.toJson(payload),options:angular.toJson(option),iTimeout:12e4,label:""},$scope.bpTree.debug&&$scope.bpTree.debugArray.push("TO SERVER: "+JSON.stringify({sClassName:namespace+".IntegrationProcedureService",sMethodName:IPKey,input:payload,options:option,iTimeout:12e4,label:""},null,2)),$scope.remoteAction(configObj,params,type)),$scope.bpTree.readOnly=!0,IPKey||(setActionStatus(type,$scope.bpTree.response,!0),params.vlcOmniFormClose&&VOUINS.ClearData($scope))},$scope.remoteAction=function(configObj,params,type){ouiBaseService.OmniRemoteInvoke(configObj).then(function(remoteResp){remoteResp=angular.fromJson(remoteResp);$scope.bpTree.debug&&$scope.bpTree.debugArray.push("FROM SERVER: "+JSON.stringify(angular.copy(remoteResp),null,2)),setActionStatus(type,remoteResp,"OK"===remoteResp.error),"OK"===remoteResp.error&&remoteResp.IPResult.fileAttachmentSyncData&&VOUINS.syncFileAttachmentData(remoteResp.IPResult,!1,$scope,$q,null,$scope.bpTree.filesMap,ouiBaseService,$window).then(function(result){$timeout(function(){},0)})},function(error){$scope.bpTree.debug&&$scope.bpTree.debugArray.push("FROM SERVER: "+JSON.stringify(angular.copy(error),null,2)),setActionStatus(type,error,!1)}).then(function(){params.vlcOmniFormClose&&VOUINS.ClearData($scope)})},$scope.getOptions=function(control,scp){var plKey;return ouiBaseService.bPLSeeding&&$rootScope.VlocPicklistSeeding&&("SObject"!==control.propSetMap.optionSource.type&&"Custom"!==control.propSetMap.optionSource.type||(plKey=control.propSetMap.optionSource.source,"Multi-select"===control.type&&plKey&&$rootScope.VlocPicklistSeeding[plKey]&&void 0===$rootScope.VlocPicklistSeeding[control.name+":"+control.$$hashKey+":"+plKey]&&($rootScope.VlocPicklistSeeding[control.name+":"+control.$$hashKey+":"+plKey]=angular.copy($rootScope.VlocPicklistSeeding[plKey])),plKey="Multi-select"===control.type?control.name+":"+control.$$hashKey+":"+plKey:plKey,VOUINS.resetOptions(control,$rootScope.VlocPicklistSeeding[plKey]))),control.propSetMap.options},$scope.aggregate=function(scp,arrayIndex,indexInParent,bUIUpdate,removeIndex){ouiBaseService.miniForm=!0,ouiBaseService.aggregate(scp,arrayIndex,indexInParent,bUIUpdate,removeIndex)},$scope.applyCallResp=function(resp,bValidation,bKnowledge,eleName,editBlockElementIndex){"string"==typeof resp&&(resp=JSON.parse(resp)),ouiBaseService.invokeResp={},$scope.topBPDom||($scope.topBPDom=VOUINS.getTopBPDom($scope)),$scope.applyCallRespAux(resp,$scope.topBPDom,bValidation,editBlockElementIndex),!0===bValidation||null!=resp&&resp.constructor===Object&&0<Object.keys(resp).length&&(!0!==ouiBaseService.previewMode&&(delete resp.ContextId,delete resp.userId,delete resp.userName,delete resp.userProfile,delete resp.timeStamp),0<Object.keys(resp).length&&(eleName&&angular.equals(eleName.type,"DocuSign Envelope Action")?(eleName=eleName.name,angular.isUndefined($scope.bpTree.response[eleName])&&($scope.bpTree.response[eleName]=[]),$scope.bpTree.response[eleName].unshift(resp[eleName])):(_.mergeWith||_.merge)($scope.bpTree.response,resp,VOUINS.mergeJSONLogic)))},$scope.applyCallRespAux=function(resp,parentDomEle,bValidation,editBlockElementIndex){if(null!=resp&&resp.constructor===Object)for(var key in resp){var data;resp.hasOwnProperty(key)&&(void 0===(data=resp[key])&&(data=null),$scope.applyDatatoElement(parentDomEle,data,key,resp,bValidation,editBlockElementIndex))}},$scope.applyDatatoElement=function(remainder,data,key,parentResp,bValidation,editBlockElementIndex){var scope,bConvertToArray=!1;if(angular.isArray(data)||$scope.bpTree.pcId&&!($scope.bpTree.pcId.indexOf(key)<0)||(data=[data],bConvertToArray=!0),data){var domEle=$scope.getDomElementV2(remainder,key);if(0!==domEle.length){var remainder=angular.element(domEle[0]),size=1;if(remainder&&(scope=remainder.scope())&&scope.control)if(void 0!==scope.control.propSetMap.repeatLimit&&null!==scope.control.propSetMap.repeatLimit&&scope.control.propSetMap.repeatLimit.constructor===Number&&angular.isArray(data)&&scope.control.propSetMap.repeatLimit+1<data.length&&(data=data.slice(0,scope.control.propSetMap.repeatLimit+1)),("Multi-select"===scope.control.type||"Radio"===scope.control.type||"Filter"===scope.control.type&&"Multi-select"===scope.control.propSetMap.type)&&scope.control.propSetMap.options&&angular.isArray(scope.control.propSetMap.options)){if((size=scope.control.propSetMap.options.length)<=0)return}else if("Edit Block"===scope.control.type&&(!parentResp[key]||0===parentResp[key].length)&&null==editBlockElementIndex){if(0<scope.control.children.length){for(var ebScope,ebRec,i=domEle.length-1;0<=i;i--)(ebRec=angular.element(domEle[i]))&&(ebScope=ebRec.scope())&&ebScope.control&&ebScope.$parent&&ebScope.$parent.child&&ebScope.deleteRecordFromDom(ebScope.$parent.child,i,ebScope,ebScope.$parent);ebScope=ebRec=null}return void delete parentResp[key]}var remainder=domEle.length/size,min=remainder>=data.length?data.length:remainder,max=remainder>=data.length?remainder:data.length;scope&&(scope.control&&ouiBaseService.repeatEleTypeList.indexOf(scope.control.type)<0||scope.bpTree.pcId&&0<=scope.bpTree.pcId.indexOf(key))&&(max=min=1),null!=editBlockElementIndex&&(min=max=1);for(var dataToBeApplied,invalidStepIndex,control,controlType,eleScope,ind=0;ind<min;ind++)(eleScope=$scope.getEleAngularScope(domEle[ind*size]))&&(scope.bpTree.pcId&&0<=scope.bpTree.pcId.indexOf(key)||key.match("_Top")&&scope.bpTree.pcId&&0<=scope.bpTree.pcId.indexOf(key.substring(0,key.indexOf("_Top")))?!0===bValidation||((invalidStepIndex=ouiBaseService.dataPreprocessorMap[key])&&invalidStepIndex.constructor===Function?scope.bpTree.response.vlcPersistentComponent[key]=invalidStepIndex(data):scope.bpTree.response.vlcPersistentComponent[key]=data,delete parentResp[key]):(controlType=(control=eleScope.control||eleScope.child).type,control&&-1===ouiBaseService.applyRespSkipTypeList.indexOf(controlType)?(dataToBeApplied=data[ind],0<=ouiBaseService.placeholderEleTypeList.indexOf(controlType)&&(dataToBeApplied=bConvertToArray?data[0]:data),!0===bValidation?dataToBeApplied&&dataToBeApplied.constructor===String&&(control.srvErr=dataToBeApplied,null!=(invalidStepIndex=$scope.findStepIndex(eleScope,control.index,control.indexInParent))&&($scope.children[invalidStepIndex].tInvalid=!0,$scope.children[invalidStepIndex].inValid=!!$scope.children[invalidStepIndex].propSetMap.validationRequired,$scope.children[invalidStepIndex].bSrvErr=!0,(void 0===$scope.invalidStepIndex||null===$scope.invalidStepIndex||$scope.invalidStepIndex>invalidStepIndex)&&($scope.invalidStepIndex=invalidStepIndex))):($scope.setElementValue(control,dataToBeApplied,!1)&&(ouiBaseService.placeholderEleTypeList.indexOf(controlType)<0&&(ouiBaseService.invokeResp[control.name+control.$$hashKey]=control.response),"Selectable Items"===controlType&&eleScope.aggregate(eleScope,control.index,control.indexInParent,!0,-1)),delete parentResp[key])):control&&0<=ouiBaseService.groupEleTypeList.indexOf(controlType)&&(/Edit Block$/.test(controlType)?null!=editBlockElementIndex?$scope.applyCallRespAux(data[ind],domEle[editBlockElementIndex],bValidation):control.childrenC||$scope.applyCallRespAux(data[ind],domEle[ind],bValidation):/Type Ahead Block$/.test(controlType)&&null!=editBlockElementIndex?$scope.applyCallRespAux(data[ind],domEle[editBlockElementIndex],bValidation):$scope.applyCallRespAux(data[ind],domEle[ind],bValidation))));if(!0!==bValidation){var ebApply=!1;if(/Edit Block$/.test(controlType)&&control.childrenC&&(control.children=angular.copy(control.childrenC),remainder--,min--),data.length>remainder&&eleScope&&control&&(!$scope.bpTree.rMap||$scope.bpTree.rMap&&$scope.bpTree.rMap.hasOwnProperty(control.name))&&-1===ouiBaseService.actionEleTypes.indexOf(controlType)&&"Step"!==controlType&&"Filter Block"!==controlType&&"Filter"!==controlType)for(var index=eleScope.control.index,ind=min;ind<max;ind++){var bIncreaseIndex=!eleScope.child.eleArray[index].childrenC;$scope.addElement(eleScope,eleScope.child,index,angular.copy(data[ind]),data[ind]),bIncreaseIndex&&index++,"Edit Block"===controlType&&(ebApply=!0)}remainder=parentResp[key];(null==remainder||remainder.constructor===Object&&0===Object.keys(remainder).length||angular.isArray(remainder)&&$scope.bpTree.labelMap.hasOwnProperty(key)||ebApply)&&delete parentResp[key]}}}},$scope.getDomElementV2=function(parentDomEle,path){var tempEle,domEle=[];try{return $scope.bpTree.rMap?$scope.bpTree.rMap.hasOwnProperty(path)||/\s/g.test(path)||!parentDomEle.getElementById?$scope.bpTree.rMap.hasOwnProperty(path)?domEle=parentDomEle.querySelectorAll("[id='"+path+"']"):(tempEle=parentDomEle.querySelector("[id='"+path+"']"))&&(domEle=[tempEle]):(tempEle=parentDomEle.getElementById(path))&&(domEle=[tempEle]):domEle=parentDomEle.querySelectorAll("[id='"+path+"']"),domEle}catch(err){return console.log(err),[]}return[]},$scope.getEleAngularScope=function(element){var scope=null,element=angular.element(element);return scope=element?element.scope():scope},$scope.findStepIndex=function(parent,arrayIndex,indexInParent){var stepIndex;return parent&&(!parent.$parent||(parent=("lightning"===ouiBaseService.layout||"newport"===ouiBaseService.layout?parent:parent.$parent).$parent)&&(parent.child&&parent.child.eleArray?stepIndex=this.findStepIndex(parent.$parent,arrayIndex,parent.child.indexInParent):(parent.child&&(stepIndex=parent.child.indexInParent),parent.step&&(stepIndex=parent.step.indexInParent)))),stepIndex},$scope.setElementValue=function(control,eleVal,bNew,setOrigVal){var bSet=!1,oldVal=control.response,cType=control.type;"Filter"===cType&&(cType+=" "+control.propSetMap.type);var newVal=eleVal;if("Radio"!==cType&&"Select"!==cType&&"Filter Select"!==cType&&"Multi-select"!==cType&&"Filter Multi-select"!==cType&&"Lookup"!==cType||(null!=eleVal&&eleVal.constructor===Object&&(newVal=eleVal.name),null!=oldVal&&(oldVal.constructor!==Object||"Radio"!==cType&&"Select"!==cType&&"Filter Select"!==cType&&"Lookup"!==cType||(oldVal=oldVal.name),!angular.isArray(oldVal)||"Multi-select"!==cType&&"Filter Multi-select"!==cType||(oldVal=ouiBaseService.handleSelect(cType,oldVal)))),angular.equals(newVal,oldVal)&&ouiBaseService.placeholderEleTypeList.indexOf(cType)<0)return bNew&&setOrigVal&&(setOrigVal.bSet=!0),bSet;var temp,node="Selectable Items"===cType?"vlcSI":"vlcInputBlock";try{switch(cType){case"Selectable Items":case"Input Block":control.compDisable=!1,control.response=null,control[node]={};var jsFunc=ouiBaseService.dataPreprocessorMap[control.name];null!=(eleVal=jsFunc&&jsFunc.constructor===Function?jsFunc(eleVal):eleVal)&&(angular.isArray(eleVal)&&"Selectable Items"===cType?control.vlcSI[control.itemsKey]=eleVal:"Selectable Items"!==cType||eleVal[control.itemsKey]&&angular.isArray(eleVal[control.itemsKey])?eleVal.constructor===Object&&(control[node]=eleVal):control.vlcSI[control.itemsKey]=[eleVal]),bSet=!0;break;case"Select":case"Filter Select":if(null!=eleVal&&(eleVal.constructor===Object&&eleVal.name||eleVal.constructor===String&&""!==eleVal))if(control.propSetMap.dependency&&"Select"===control.type)eleVal.constructor===Object?control.response=eleVal:control.response={name:eleVal,value:eleVal},bSet=!(control.propSetMap.options=null);else{var nameString=eleVal.constructor===Object&&eleVal.name?eleVal.name:eleVal;if(null!=(options=angular.copy(control.propSetMap.options))&&angular.isArray(options))for(var i=0;i<options.length;i++)if(options[i].name===nameString){control.response=options[i],bSet=!0;break}}break;case"Checkbox":case"Disclosure":null!=eleVal&&eleVal.constructor===Boolean&&(control.response=eleVal,bSet=!0);break;case"Email":case"URL":case"Type Ahead":null!=eleVal&&eleVal.constructor===String&&(control.response=eleVal,bSet=!0);break;case"Password":case"Signature":case"Text":case"Text Area":null!=eleVal&&eleVal.constructor===String&&(bValid=!0,void 0!==control.propSetMap.minLength&&null!==control.propSetMap.minLength&&control.propSetMap.minLength.constructor===Number&&eleVal.length<control.propSetMap.minLength&&(bValid=!1),(bValid=void 0!==control.propSetMap.maxLength&&null!==control.propSetMap.maxLength&&control.propSetMap.maxLength.constructor===Number&&eleVal.length>control.propSetMap.maxLength?!1:bValid)&&(control.response=eleVal,bSet=!0));break;case"Lookup":if(null!=eleVal&&(eleVal.constructor===Object&&eleVal.name||eleVal.constructor===String&&""!==eleVal)){nameString=eleVal.constructor===Object&&eleVal.name?eleVal.name:eleVal;if(null!=(options=angular.copy(control.propSetMap.options))&&angular.isArray(options))for(i=0;i<options.length;i++)options[i].name===nameString&&(control.response=options[i].name,bSet=!0);bSet||(control.propSetMap.options=control.propSetMap.options||[],angular.isObject(eleVal)&&(control.propSetMap.options.push(eleVal),control.response=eleVal.name||""),angular.isString(eleVal)&&(control.propSetMap.options.push({name:eleVal,value:eleVal}),control.response=eleVal),bSet=!0)}break;case"Radio":if(null!=eleVal&&(eleVal.constructor===Object&&eleVal.name||eleVal.constructor===String&&""!==eleVal))if(control.propSetMap.dependency)control.response=eleVal.constructor===Object?eleVal.name:eleVal,bSet=!(control.propSetMap.options=null);else{nameString=eleVal.constructor===Object&&eleVal.name?eleVal.name:eleVal;if(null!=(options=angular.copy(control.propSetMap.options))&&angular.isArray(options))for(i=0;i<options.length;i++)options[i].name===nameString&&(control.response=options[i].name,bSet=!0)}break;case"Currency":null!=eleVal&&eleVal.constructor===Number&&(bValid=!0,void 0!==control.propSetMap.min&&null!==control.propSetMap.min&&control.propSetMap.min.constructor===Number&&eleVal<control.propSetMap.min&&(bValid=!1),(bValid=void 0!==control.propSetMap.max&&null!==control.propSetMap.max&&control.propSetMap.max.constructor===Number&&eleVal>control.propSetMap.max?!1:bValid)&&(control.response=eleVal,bSet=!0));break;case"Number":null!=eleVal&&eleVal.constructor===Number&&(control.response=eleVal,bSet=!0);break;case"Telephone":null!=eleVal&&eleVal.constructor===String&&(bValid=!0,void 0!==control.propSetMap.minLength&&null!==control.propSetMap.minLength&&control.propSetMap.minLength.constructor===Number&&eleVal.length<control.propSetMap.minLength&&(bValid=!1),(bValid=void 0!==control.propSetMap.maxLength&&null!==control.propSetMap.maxLength&&control.propSetMap.maxLength.constructor===Number&&eleVal.length>control.propSetMap.maxLength?!1:bValid)&&(control.response=eleVal,bSet=!0));break;case"Range":var bValid=!1;null!=eleVal&&eleVal.constructor===Number&&(bValid=!0,eleVal<control.propSetMap.rangeLow&&(bValid=!1),eleVal>control.propSetMap.rangeHigh&&(bValid=!1)),control.response=bValid?eleVal:control.propSetMap.rangeLow,bSet=!0;break;case"Date":var dateVal=eleVal;null!=(eleVal="today"===eleVal?moment():"string"==control.propSetMap.dateType?moment(eleVal,control.propSetMap.modelDateFormat.toUpperCase()):moment.utc(eleVal))&&eleVal.isValid()&&("string"===control.propSetMap.dateType?control.response=eleVal.format(control.propSetMap.modelDateFormat.toUpperCase()):dateVal.match(/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/)?control.response=dateVal:(eleVal=new Date(eleVal.format("YYYY-MM-DD")),eleVal=(eleVal=new Date(eleVal.getTime()+6e4*eleVal.getTimezoneOffset())).toISOString(),control.response=eleVal),bSet=!0);break;case"Date/Time (Local)":null!=(eleVal="today"===eleVal||"now"===eleVal?moment.utc():moment.utc(eleVal))&&eleVal.isValid()&&(eleVal=eleVal.toISOString(),control.response=eleVal,bSet=!0);break;case"Time":"now"===eleVal?eleVal=(temp=moment.utc())._d:temp=(temp=/^(\d\d):(\d\d):(\d\d)\.(\d\d\d)Z$/.exec(eleVal))?((eleVal=new Date(Date.UTC(70,0,1))).setHours(temp[1],temp[2],temp[3],temp[4]),moment(eleVal)):moment.utc(eleVal),null!=temp&&temp.isValid()&&(temp=new Date(eleVal),temp=new Date(70,0,1,temp.getHours(),temp.getMinutes(),temp.getSeconds(),temp.getMilliseconds()),"string"===control.propSetMap.timeType?control.response=$filter("date")(eleVal,control.propSetMap.modelTimeFormat):control.response=temp.toISOString(),bSet=!0);break;case"Multi-select":case"Filter Multi-select":if(null!=eleVal&&(eleVal.constructor===Object&&eleVal.name||eleVal.constructor===String&&""!==eleVal)){var names=(nameString=eleVal.constructor===Object&&eleVal.name?eleVal.name:eleVal).split(";");if(control.propSetMap.dependency){if(names&&0<names.length){for(var resp=[],j=0;j<names.length;j++)resp.push({name:names[j],value:names[j],selected:!0});control.response=resp,bSet=!(control.propSetMap.options=null)}}else{var msResp=angular.copy(control.propSetMap.options);if(names&&0<names.length&&null!=msResp&&angular.isArray(msResp))for(i=0;i<msResp.length;i++)0<=names.indexOf(msResp[i].name)?(msResp[i].selected=!0,control.propSetMap.options[i].selected=!0):(msResp[i].selected=!1,delete control.propSetMap.options[i].selected);control.response=msResp,bSet=!0}}break;case"Radio Group":if(null!=eleVal&&eleVal.constructor===Object){var options,radioGroup={};if(null!=(options=angular.copy(control.propSetMap.options))&&angular.isArray(options)){for(var keys=Object.keys(eleVal),i=0;i<keys.length;i++)for(var oindex=0;oindex<options.length;oindex++)options[oindex].name===eleVal[keys[i]]&&(radioGroup[keys[i]]=options[oindex].name,bSet=!0);control.response=radioGroup}}}}catch(err){console.log(err)}if(bSet)return bNew&&setOrigVal&&(setOrigVal.bSet=!0),bSet;if(bNew||!bSet){newVal=null;if("Checkbox"===cType||"Disclosure"===cType)newVal=!1;else if("Multi-select"===cType||"Filter Multi-select"===cType){if((newVal=angular.copy(control.response))&&angular.isArray(newVal))for(var ind=0;ind<newVal.length;ind++)delete newVal[ind].selected;if(control.propSetMap.options&&angular.isArray(control.propSetMap.options))for(i=0;i<control.propSetMap.options.length;i++)delete control.propSetMap.options[i].selected}else 0<=ouiBaseService.placeholderEleTypeList.indexOf(cType)&&(newVal={});if((angular.equals(newVal,oldVal)||("Multi-select"===cType||"Filter Multi-select"===cType)&&null===oldVal)&&ouiBaseService.placeholderEleTypeList.indexOf(cType)<0)return bNew&&setOrigVal&&(setOrigVal.bSet=bSet),bSet;ouiBaseService.placeholderEleTypeList.indexOf(cType)<0&&(control.response=newVal),0<=ouiBaseService.placeholderEleTypeList.indexOf(control.type)&&(control[node]={}),bSet=!0,bNew&&setOrigVal&&(setOrigVal.bSet=!1)}return bSet},$scope.addElement=function(scp,control,index,data,dataCopy){var newItem=angular.copy(control.eleArray[index]);if(control.eleArray[index].childrenC)control.eleArray.splice(index,1,newItem),delete newItem.childrenC;else{newItem.index=index+1,control.eleArray.splice(index+1,0,newItem);for(var i=index+2;i<control.eleArray.length;i++)control.eleArray[i].index=control.eleArray[i].index+1}$timeout(function(){$scope.setResponse(newItem,data,dataCopy),0<=ouiBaseService.blockEleTypeList.indexOf(control.eleArray[0].type)&&scp.$parent?scp.aggregate(scp.$parent,control.index,control.indexInParent,!1,index):scp.aggregate(scp,control.index,control.indexInParent,!1,index)},0)},$scope.setResponse=function(eleNode,data,dataCopy){if(eleNode){if(-1===ouiBaseService.applyRespSkipTypeList.indexOf(eleNode.type)){var setOrigVal={};$scope.setElementValue(eleNode,data,!0,setOrigVal);return setOrigVal.bSet&&(ouiBaseService.invokeResp[eleNode.name+eleNode.$$hashKey]=eleNode.response),setOrigVal.bSet}for(var realData={},bAllNull=!0,i=0;i<eleNode.children.length;i++)if(!(0<=ouiBaseService.noneDataControlTypeListV2.indexOf(eleNode.children[i].eleArray[0].type))){var bHasKey=!1,eleData=data?(bHasKey=data.hasOwnProperty(eleNode.children[i].eleArray[0].name),data[eleNode.children[i].eleArray[0].name]):null,eleDataArray=eleData=void 0===eleData?null:eleData;angular.isArray(eleDataArray)||(eleDataArray=[eleData]);for(var min=(eleNode.children[i].eleArray.length>=eleDataArray.length?eleDataArray:eleNode.children[i].eleArray).length,max=(eleNode.children[i].eleArray.length<=eleDataArray.length?eleDataArray:eleNode.children[i].eleArray).length,k=0;k<min;k++)$scope.setResponse(eleNode.children[i].eleArray[k],eleDataArray[k],angular.copy(eleDataArray[k]))||(eleDataArray[k]=eleNode.children[i].eleArray[k].response);if(eleDataArray.length<eleNode.children[i].eleArray.length)eleNode.children[i].eleArray.splice(min,max-min);else if(eleDataArray.length>eleNode.children[i].eleArray.length)for(k=min;k<max;k++){var temp=angular.copy(eleNode.children[i].eleArray[0]);eleNode.children[i].eleArray.splice(k,0,temp),eleNode.children[i].eleArray[k].index=k,$scope.setResponse(eleNode.children[i].eleArray[k],eleDataArray[k],angular.copy(eleDataArray[k]))||(eleDataArray[k]=eleNode.children[i].eleArray[k].response)}1===eleDataArray.length&&(eleDataArray=eleDataArray[0]),eleNode.children[i].response=eleDataArray,realData[eleNode.children[i].eleArray[0].name]=eleNode.children[i].response,void 0!==eleNode.children[i].response&&null!==eleNode.children[i].response&&(bAllNull=!1),bHasKey&&delete dataCopy[eleNode.children[i].eleArray[0].name]}return!bAllNull||"Edit Block"===eleNode.type||"Block"===eleNode.type&&eleNode.propSetMap.ebp?eleNode.response=realData:eleNode.response=null,!1}},$scope.init=function(scp,control,option){var initInterval;switch(control.type){case"Select":case"Radio":case"Multi-select":ouiBaseService.bPLSeeding?initInterval=setInterval(function(){!0!==$rootScope.seedingDone&&!0!==$rootScope.seedingFailed||(clearInterval(initInterval),$scope.initAux(scp,control,option))},10):$scope.initAux(scp,control,option);break;default:$scope.initAux(scp,control,option)}},$scope.initAux=function(scp,control,option){if(void 0===control.response||null===control.response)try{var eleVal;-1===ouiBaseService.applyRespSkipTypeList.indexOf(control.type)&&ouiBaseService.pfJSON&&0<Object.getOwnPropertyNames(ouiBaseService.pfJSON).length&&ouiBaseService.pfJSON.hasOwnProperty(control.name)||control.propSetMap.hasOwnProperty("defaultValue")&&null!=control.propSetMap.defaultValue?(null!=(eleVal=null==(eleVal=ouiBaseService.pfJSON[control.name])&&control.propSetMap.hasOwnProperty("defaultValue")&&null!=control.propSetMap.defaultValue?control.propSetMap.defaultValue:eleVal)&&$scope.setElementValue(control,eleVal,!1)&&(ouiBaseService.pfJSONFill[control.name]=eleVal),delete scp.bpTree.response[control.name],delete ouiBaseService.pfJSON[control.name]):("Multi-select"===control.type&&control.req&&!control.response||"Radio Group"===control.type&&control.req&&!control.response)&&scp.loopform.$setValidity("required",!1),"Checkbox"!==control.type&&"Disclosure"!==control.type||null!==control.response?"Multi-select"===control.type?scp.onMultiSelect(scp,control,option,!0):"Range"!==control.type||null!==control.response||isNaN(control.propSetMap.rangeLow)||(control.response=parseFloat(control.propSetMap.rangeLow)):(control.response=!1,scp.aggregate(scp,control.index,control.indexInParent,!0,-1))}catch(err){console.log(err.message)}},$scope.onMultiSelect=function(scp,control,option,bInit){bInit&&control.propSetMap.dependency||(control.response=control.propSetMap.options);var validForm=!1;"Multi-select"===control.type&&(validForm=!control.req||(!(!option||!option.selected)||$scope.MultiSelectFilled(control)),("lightning"!==ouiBaseService.layout&&"newport"!==ouiBaseService.layout||!bInit?scp.$parent:scp).loopform.$setValidity("required",validForm)),scp.aggregate(scp,control.index,control.indexInParent,!0,-1)},$scope.MultiSelectFilled=function(control){if(control.propSetMap.options&&void 0!==control.response&&null!==control.response)for(var i=0;i<control.response.length;i++)if(control.response[i].selected)return!0;return!1},$scope.setAllRadioGroup=function(scp,newValue){for(var radiolabels=scp.control.propSetMap.radioLabels,radioGroup={},i=0;i<radiolabels.length;i++)radioGroup[radiolabels[i].name]=newValue;scp.control.response=radioGroup},$scope.onRadioGroupSelect=function(scp,control,option,bInit){var validForm=!1;"Radio Group"===control.type&&(validForm=!control.req||$scope.radioGroupFilled(control),("lightning"!==ouiBaseService.layout&&"newport"!==ouiBaseService.layout||!bInit?scp.$parent:scp).loopform.$setValidity("required",validForm)),scp.aggregate(scp,control.index,control.indexInParent,!0,-1)},$scope.radioGroupFilled=function(control){if(control.propSetMap.options&&void 0!==control.response&&null!==control.response){for(var ctrlKeys=Object.keys(control.response),ctrlVals=Object.values(control.response),rLabels=control.propSetMap.radioLabels,options=(control.propSetMap.radioLabels,control.propSetMap.options),rKeyCheck={},rValueCheck={},i=0;i<rLabels.length;i++)rKeyCheck[rLabels[i].name]=0;for(i=0;i<ctrlKeys.length;i++)ctrlKeys[i]in rKeyCheck&&(rKeyCheck[ctrlKeys[i]]+=1);if(Object.values(rKeyCheck).reduce(function(a,b){return a+b})!==rLabels.length)return!1;for(i=0;i<options.length;i++)rValueCheck[options[i].name]=!0;for(i=0;i<ctrlVals.length;i++)if(!(ctrlVals[i]in rValueCheck))return!1;return!0}return!1},$scope.validateRequired=function(scp,control,bInit){if(scp.loopform)return control.req||scp.miniForm&&control.propSetMap.required?"Radio Group"===control.type?scp.loopform.$setValidity("required",$scope.radioGroupFilled(control)):"Multi-select"===control.type?scp.loopform.$setValidity("required",$scope.MultiSelectFilled(control)):"Disclosure"===control.type&&scp.loopform.$setValidity("required",!0===control.response):scp.loopform.$setValidity("required",!0),!0},$scope.removeFile=function(scp,control,index){var dataBeingDeleted,toDelete,configObj;control&&control.response&&(dataBeingDeleted=control.response[index],toDelete=scp.bpTree.filesMap[control.response[index].data],delete scp.bpTree.filesMap[control.response[index].data],control.response.splice(index,1),control.propSetMap.uploadContDoc&&toDelete&&18==toDelete.length&&(configObj={sClassName:ouiBaseService.sNSC+"BusinessProcessDisplayController.BusinessProcessDisplayControllerOpen",sMethodName:"DeleteOSContentDocument",input:angular.toJson({contentDocumentId:toDelete}),options:"{}"},ouiBaseService.OmniRemoteInvoke(configObj).then(function(){var controlClone,input;control.propSetMap.remoteClass&&$scope.remoteCallInvoke&&((controlClone=angular.copy(control)).propSetMap.remoteOptions.vlcFileDeleted=toDelete,controlClone.propSetMap.remoteOptions.vlcFileKey=control.name,controlClone.ui={},(input={})[control.name]=[dataBeingDeleted],$scope.remoteCallInvoke(input,controlClone,!1,null,scp,null,"contentDocumentDelete"))}))),scp.aggregate(scp,control.index,control.indexInParent,!0,index)},$scope.uploadContentVersions=function(scp,control){var promiseArray,documentFiles;control&&control.response&&(promiseArray=[],documentFiles=[],control.response.forEach(function(file){var actualParentIds,promise=scp.bpTree.filesMap[file.data];promise&&18<promise.length&&(promise=promise.substr(promise.indexOf(",")+1),actualParentIds=[],control.propSetMap.contentParentId.forEach(function(parentId){try{var asArray=angular.fromJson(scp.handleMergeField(angular.toJson(parentId),null,null,null,null,null,!0));actualParentIds=actualParentIds.concat(asArray)}catch(e){actualParentIds.push(scp.handleMergeField(parentId))}}),$rootScope.loading=!0,$rootScope.loadingMessage="",promise={sClassName:"Vlocity CreateOSContentVersion",sMethodName:"CreateOSContentVersion",bodyData:promise,parentId:angular.toJson(actualParentIds),filename:file.filename,options:angular.toJson(control.propSetMap)},promise=ouiBaseService.CreateOSContentVersion(promise).then(function(result){!(result="string"==typeof result?angular.fromJson(result):result)||"File"!==control.type&&"Image"!==control.type||(file.contentDocumentId=result.contentDocumentId,file.vId=result.contentVersionId,scp.aggregate(scp,control.index,control.indexInParent,!0,-1)),scp.bpTree.filesMap[file.data]=result.contentDocumentId,scp.bpTree.contentVersions||(scp.bpTree.contentVersions={}),documentFiles.push(file),scp.bpTree.contentVersions[file.data]=result.contentVersionId},function(errorMsg){delete scp.bpTree.filesMap[file.data],control.response=control.response.filter(function(resFile){return resFile.data!=file.data});errorMsg=$scope.errorReplace(errorMsg.error,control);$window.alert(new Error(errorMsg))}),promiseArray.push(promise))}),promiseArray.length?$q.all(promiseArray).then(function(results){var input,controlClone;0<documentFiles.length&&control.propSetMap.remoteClass&&$scope.remoteCallInvoke?((input={})[control.name]=documentFiles,(controlClone=angular.copy(control)).propSetMap.remoteOptions.vlcFileKey=control.name,controlClone.ui={},$scope.remoteCallInvoke(input,controlClone,!1,null,scp,null,"contentDocumentAdd",null,null,null,null,function(result){$rootScope.loading=!1})):$rootScope.loading=!1},function(errorMsg){$rootScope.loading=!1;errorMsg=$scope.errorReplace(errorMsg.error,control);$window.alert(new Error(errorMsg))}):$rootScope.loading=!1)},$scope.isFileRemovable=function(scp,control,fileData){if(control&&control.response){fileData=scp.bpTree.filesMap[control.response[fileData].data];if(fileData&&"data"!==fileData.substring(0,4)&&"review"==ouiBaseService.scriptState)return!1;if(null!==fileData)return!0}return!1},$scope.getLookupOptions=function(control,scp){!(control.propSetMap.options=[])!==control.propSetMap.clearValue&&(control.response=null,scp.aggregate(scp,control.index,control.indexInParent,!0,-1));var input={},picklistObjectAndField=control.propSetMap.dataSource.type,index=$scope.findRepeatIndex(control),configObj={};if("SObject"===picklistObjectAndField){var className=ouiBaseService.sNSC+"DefaultFetchPicklistOptionsImpl",methodName="fetchLookupOptions",strArray=control.propSetMap.dataSource.mapItems;if(strArray&&strArray.phase1MapItems&&strArray.phase2MapItems&&angular.isArray(strArray.phase1MapItems)&&angular.isArray(strArray.phase2MapItems)&&0<strArray.phase1MapItems.length&&0<strArray.phase2MapItems.length){input.MapItems=strArray.phase1MapItems.concat(strArray.phase2MapItems);var inputParams=control.propSetMap.dataSource.mapItems.inputParameters,queryCriteria={};if(inputParams&&angular.isArray(inputParams)){for(var i=0;i<inputParams.length;i++){var eleName=inputParams[i].element;angular.equals(index,NaN)||(eleName=$scope.replaceNIndex(eleName,index+1)),queryCriteria[inputParams[i].inputParam]=$scope.getElementValue(eleName)}input.DRParams=queryCriteria}}}else"Custom"===picklistObjectAndField?(strArray=control.propSetMap.dataSource.source)&&((strArray=strArray.split("."))&&(2===strArray.length?(className=strArray[0],methodName=strArray[1]):3===strArray.length&&(className=strArray[0]+"."+strArray[1],methodName=strArray[2])),input=(input=$scope.bpTree.response)||{}):"PicklistFilteredbyRecordType"===picklistObjectAndField&&(className=ouiBaseService.sNSC+"DefaultOmniScriptSObjectPicklist",methodName="GetSObjectPicklistValues",picklistObjectAndField=control.propSetMap.dataSource.picklistObjectAndField.split("."),configObj.picklistObject=picklistObjectAndField[0],configObj.picklistField=picklistObjectAndField[1],configObj.picklistRecordType=scp.handleMergeField(control.propSetMap.dataSource.picklistRecordType,!1,null,control),input=$scope.bpTree.response);if(null!=className&&null!=methodName&&input&&0!==Object.getOwnPropertyNames(input).length){$rootScope.loading=!0,$rootScope.loadingMessage="",configObj.useQueueableApexRemoting=!0===control.propSetMap.useQueueableApexRemoting;var deferred=$q.defer(),configObj={sClassName:className,sMethodName:methodName,input:angular.toJson(input),options:angular.toJson(configObj),iTimeout:void 0,label:{label:control&&control.name}};return ouiBaseService.OmniRemoteInvoke(configObj).then(function(errorMsg){var remoteResp=angular.fromJson(errorMsg);remoteResp?"OK"!==remoteResp.error?($rootScope.loading=!1,errorMsg=$scope.errorReplace(remoteResp.error,control),$window.alert(new Error(errorMsg))):($rootScope.loading=!1,remoteResp.options?(angular.isArray(remoteResp.options)||remoteResp.options.constructor!==Object||(0<Object.keys(remoteResp.options).length?remoteResp.options=[remoteResp.options]:remoteResp.options=[]),control.propSetMap.options=remoteResp.options):control.propSetMap.options=[]):$rootScope.loading=!1,deferred.resolve()},function(errorMsg){$rootScope.loading=!1;errorMsg=$scope.errorReplace(errorMsg,control);$window.alert(new Error(errorMsg)),deferred.reject()}),deferred.promise}},$scope.findRepeatIndex=function(control){$scope.topBPDom||($scope.topBPDom=VOUINS.getTopBPDom($scope));var tempEle=$scope.topBPDom;if(tempEle=void 0!==control.rootIndex&&null!==control.rootIndex?!/\s/g.test($scope.bpTree.children[control.rootIndex].name)&&$scope.topBPDom.getElementById?$scope.topBPDom.getElementById($scope.bpTree.children[control.rootIndex].name):$scope.topBPDom.querySelector("[id='"+$scope.bpTree.children[control.rootIndex].name+"']"):tempEle){var eleArray=[];!$scope.bpTree.rMap||$scope.bpTree.rMap.hasOwnProperty(control.name)?eleArray=tempEle.querySelectorAll("[id='"+control.name+"']"):(tempEle=tempEle.querySelector("[id='"+control.name+"']"))&&(eleArray=[tempEle]);if(eleArray&&0<eleArray.length)for(var i=0;i<eleArray.length;i++){var ctrl=angular.element(eleArray[i]);if(ctrl){ctrl=ctrl.scope();if(ctrl){ctrl=ctrl.control;if(ctrl&&ctrl.$$hashKey===control.$$hashKey)return i}}}}return NaN},$scope.onSelectItem=function(control,option,index,scp,bFlip){if(null!=control&&null!=option){var bSetVal=!0,response=[];bFlip&&(void 0===option.vlcSelected||null===option.vlcSelected||(bSetVal=!option.vlcSelected),option.vlcSelected=bSetVal);for(var recSet=control.vlcSI[control.itemsKey],i=0;i<recSet.length;i++)!0===option.vlcSelected&&option.$$hashKey!==recSet[i].$$hashKey&&"Single"===control.propSetMap.selectMode&&(recSet[i].vlcSelected=!1),!0===recSet[i].vlcSelected&&response.push(recSet[i]);0<response.length?control.response=response:control.response=null,!0===control.propSetMap.dataJSON&&scp.aggregate(scp,control.index,control.indexInParent,!0,-1)}},$scope.handleMergeField=function(inputStr,bReplaceIndex,index,element,display,editBlkIndex,bEscape){if(null==inputStr)return"";null==index&&(index=NaN),null!=editBlkIndex?index=editBlkIndex:VOUINS.isRepeatNotation(inputStr)&&element&&(index=$scope.findRepeatIndex(element));var fields=inputStr.match(/%([^[%]+)%/g),resultName=inputStr;if(fields)for(var i=0;i<fields.length;i++){var elemValue,elem=fields[i].replace(/%/g,"");angular.equals(index,NaN)||(elem=$scope.replaceNIndex(elem,index+1)),!0!==bReplaceIndex?resultName=null==(elemValue=$scope.getElementValue(elem,!!display&&"Display"))?resultName.split(fields[i]).join(""):(bEscape&&elemValue.constructor===String&&(elemValue=(elemValue=(elemValue=elemValue.replace(/\\/g,"\\\\")).replace(/\"/g,'\\"')).replace(/[\r\n]+/gm,"\\n")),(elemValue=element&&("Headline"===element.type||"Text Block"===element.type)&&element.propSetMap.sanitize?sanitizeValue(elemValue):elemValue).constructor===String?resultName.split(fields[i]).join(elemValue):elemValue.constructor===Object||elemValue.constructor===Array?(resultName=resultName.split('"'+fields[i]+'"').join(angular.toJson(elemValue))).split(fields[i]).join(angular.toJson(elemValue)):1===fields.length&&inputStr.match("^%")&&inputStr.match("%$")?elemValue:(resultName=resultName.split('"'+fields[i]+'"').join(elemValue)).split(fields[i]).join(elemValue)):angular.equals(index,NaN)||null!=elem&&(resultName=resultName.split(fields[i]).join("%"+elem+"%"))}return resultName=null==(resultName=resultName&&"string"==typeof resultName&&-1<resultName.indexOf("$Vlocity.Percent")?resultName.replace(/\$Vlocity.Percent/g,"%"):resultName)?"":resultName},sanitizeValue=function(value){if("string"==typeof value||value instanceof String)return $("<div>").text(value).html();var isObject=value&&"object"==typeof value&&value.constructor===Object,isArray=Array.isArray(value);return isObject||isArray?$("<div>").text(angular.toJson(value)).html():value},$scope.replaceNIndex=function(prop,index){try{var propArray=$scope.preprocessElementInput(prop),concatStr="";if(propArray&&0<propArray.length)for(var idx=0,n;idx<propArray.length;idx++){0<propArray[idx].length&&(concatStr+=propArray[idx][0],1<propArray[idx].length&&(n=index,concatStr+="|"+eval(propArray[idx][1]))),idx<propArray.length-1&&(concatStr+=":")}return concatStr}catch(e){}return prop},$scope.getElementValue=function(prop,returnType){try{var propArray=$scope.preprocessElementInput(prop),scope=$scope.getElement(prop);if(scope){if(0<scope.length){if(1===scope.length)return $scope.getSingleElementValueAux(scope[0],returnType);for(var returnVal=[],i=0;i<scope.length;i++){var contrl=scope[i].control;("Multi-select"===contrl.type||"Radio"===contrl.type||"Filter"===contrl.type&&"Multi-select"===contrl.propSetMap.type||"Radio Group"===contrl.type)&&contrl.propSetMap.options&&angular.isArray(contrl.propSetMap.options)&&i%contrl.propSetMap.options.length!=0||returnVal.push($scope.getSingleElementValueAux(scope[i],returnType))}return returnVal=1===returnVal.length?returnVal[0]:returnVal}return}return"timeStamp"===prop||"userId"===prop||"userName"===prop||"userProfile"===prop?$scope.bpTree[prop]:$scope.getJSONNode($scope.bpTree.response,propArray)}catch(err){return void console.log(err)}},$scope.getJSONNode=function(data,propArray){var bArray=!(data=[data]);if(propArray&&0<propArray.length){for(var idx1=0;idx1<propArray.length;idx1++){for(var returnData=[],i=0;i<data.length;i++){var tmp=$scope.getJSONDataByPath(data[i],propArray[idx1]);angular.isArray(tmp)&&(bArray=!0),null!=tmp&&(returnData=returnData.concat(tmp))}if(!(data=returnData)||0===returnData.length)break}if(data){if(1===data.length)return null===data[0]||void 0===data[0]||angular.equals(data[0],NaN)?null:bArray?data:data[0];if(1<data.length)return data}}else;},$scope.getJSONDataByPath=function(data,path){if(0===path.length)return null;if(!data)return null;try{if(null==(data=data[path[0]])||angular.equals(data,NaN))return null;var index=NaN;return 1!==path.length||angular.isArray(data)?(1<path.length&&!angular.isArray(data)&&(data=[data]),1<path.length&&(index=VOUINS.isDigit(path[1])?parseInt(path[1],10)-1:NaN),!angular.equals(index,NaN)&&(!(index<data.length&&0<=index)||null==(data=data[index])||angular.equals(data,NaN))?null:data):data}catch(err){return console.log(err),null}return null},$scope.preprocessElementInput=function(prop){if(!prop)return null;var substrArray=prop.split(":");if(substrArray)for(var ind=0;ind<substrArray.length;ind++)substrArray[ind]=substrArray[ind].split("|");return substrArray},$scope.getSingleElementValueAux=function(scope,returnType){var dateAsDate="Date"==returnType||1==returnType;if(!scope||!scope.control)return scope&&scope.child&&"Step"===scope.child.type?scope.child.response:null;if(!1===scope.control.show)return null;var cType=scope.control.type;if("Filter"===scope.control.type&&(cType+=" "+scope.control.propSetMap.type),"Display"==returnType){if(scope.loopform&&scope.loopform.loopname&&null!==scope.loopform.loopname.$viewValue){var out="";switch(cType){case"Password":if(null===scope.loopform.loopname.$viewValue){out=null;break}for(var i=0;i<(scope.loopform.loopname.$viewValue.value||scope.loopform.loopname.$viewValue).length;i++)out+="*";break;case"Date/Time (Local)":if(angular.isString(scope.loopform.loopname.$viewValue)){out=void 0!==scope.loopform.timectrl&&"string"==typeof scope.loopform.timectrl.$viewValue?scope.loopform.loopname.$viewValue+" "+scope.loopform.timectrl.$viewValue:angular.isString(scope.control.response)?new Date(scope.control.response):scope.control.response;break}default:out=scope.loopform.loopname.$viewValue&&scope.loopform.loopname.$viewValue.value||scope.loopform.loopname.$viewValue}return out}if(scope.control.response&&null!=scope.control.response.value)return scope.control.response.value}switch(cType){case"Radio":case"Select":case"Filter Select":case"Lookup":return void 0!==scope.control.response&&null!==scope.control.response?"Display"==returnType?scope.control.propSetMap.options.find(function(opt){return opt.name==scope.control.response||opt.name==scope.control.response.name}).value:void 0!==scope.control.response.name&&null!==scope.control.response.name&&""!==scope.control.response.name?scope.control.response.name:scope.control.response:null;case"Radio Group":return null!==scope.control.response?scope.control.response[scope.label.name]:null;case"Checkbox":case"Disclosure":return void 0!==scope.control.response&&null!==scope.control.response&&scope.control.response;case"Email":case"Password":case"Signature":case"Telephone":case"Text":case"Text Area":case"URL":case"Type Ahead":case"File":case"Image":return void 0!==scope.control.response&&null!==scope.control.response&&""!==scope.control.response?scope.control.response:null;case"Currency":case"Number":case"Range":return isNaN(scope.control.response)||null==scope.control.response?null:Number(scope.control.response);case"Date":case"Date/Time (Local)":case"Time":if(void 0===scope.control.response||null===scope.control.response)return null;if("string"===(scope.control.propSetMap.timeType||scope.control.propSetMap.dateType))return scope.control.response;var temp=moment.utc(scope.control.response);if(temp.isValid())return dateAsDate?temp.toDate():temp.toISOString();break;case"Multi-select":case"Filter Multi-select":return void 0!==scope.control.response&&null!==scope.control.response&&""!==scope.control.response?ouiBaseService.handleSelect(cType,scope.control.response,"Display"==returnType):null;case"Formula":case"Aggregate":case"Validation":return"Date"===scope.control.propSetMap.dataType&&scope.control.response?scope.control.response.toISOString():scope.control.response;case"Selectable Items":case"Input Block":case"Filter Block":case"Block":case"Type Ahead Block":case"Edit Block":return scope.control.response;default:return null}},$scope.getElement=function(prop){var scope=[];if(!prop)return null;var propArray=$scope.preprocessElementInput(prop);$scope.topBPDom||($scope.topBPDom=VOUINS.getTopBPDom($scope));var domEleArray=[[$scope.topBPDom]];if(propArray&&0<propArray.length)for(var idx=0;idx<propArray.length;idx++){for(var returnDomArray=[],dIdx=0;dIdx<domEleArray.length;dIdx++)for(var tmp=domEleArray[dIdx],i=0;i<tmp.length;i++){var tempArray=$scope.getDomElement(tmp[i],propArray[idx]);tempArray&&0<tempArray.length&&returnDomArray.push(tempArray)}if(!(domEleArray=returnDomArray)||0===returnDomArray.length)break}if(domEleArray&&0<domEleArray.length)for(i=0;i<domEleArray.length;i++)for(var tmp=domEleArray[i],j=0;j<tmp.length;j++){var element=angular.element(tmp[j]);element&&scope.push(element.scope())}return scope&&0<scope.length?scope:null},$scope.getDomElement=function(parentDomEle,path){if(0===path.length)return null;var optionLength,domEleArray=[],bAdjust=!1;try{var tempEle,eleArray=[];if($scope.bpTree.rMap?$scope.bpTree.rMap.hasOwnProperty(path[0])||/\s/g.test(path[0])||!parentDomEle.getElementById?eleArray=$scope.bpTree.rMap.hasOwnProperty(path[0])?parentDomEle.querySelectorAll("[id='"+path[0]+"']"):(eleArray=parentDomEle.querySelector("[id='"+path[0]+"']"))&&[eleArray]:(tempEle=parentDomEle.getElementById(path[0]))&&(eleArray=[tempEle]):eleArray=parentDomEle.querySelectorAll("[id='"+path[0]+"']"),eleArray&&0<eleArray.length){var element=angular.element(eleArray[0]);element&&(scope=element.scope(),scope&&scope.control&&("Multi-select"===scope.control.type||"Radio"===scope.control.type||"Filter"===scope.control.type&&"Multi-select"===scope.control.propSetMap.type)&&scope.control.propSetMap.options&&angular.isArray(scope.control.propSetMap.options)&&(bAdjust=!0,optionLength=scope.control.propSetMap.options.length));var index=NaN;return 1<path.length&&(index=VOUINS.isDigit(path[1])?parseInt(path[1],10)-1:NaN),angular.equals(index,NaN)?eleArray:index<eleArray.length&&0<=index&&(bAdjust&&(index*=optionLength),index<eleArray.length&&0<=index)?(domEleArray.push(eleArray[index]),domEleArray):null}}catch(err){return console.log(err),null}return null},$scope.getCurrencySymbol=function(scope,scpService){try{if(!scope.bpTree.hasOwnProperty("oSCurrencySymbol")){var curSymbol;if(scpService=scpService||{},!scope.bpTree.propSetMap.hasOwnProperty("currencyCode"))return void(scope.bpTree.oSCurrencySymbol=null);curSymbol=(curSymbol=currencySymbol[scpService.oSCurrencyCode]||currencySymbol[scpService.oSCurrencyCodeAttr]||currencySymbol[scope.bpTree.propSetMap.currencyCode]||currencySymbol[scope.bpTree.userCurrencyCode])||currencySymbol.USD,scope.bpTree.oSCurrencySymbol=curSymbol.text,scope.bpTree.oSCurrencySetting=curSymbol,scope.bpTree.cpqCurrencySymbol=(currencySymbol[scope.bpTree.userCurrencyCode]||currencySymbol.USD).text}}catch(err){console.log(err)}},$scope.checkValidity=function(scp,arrayIndex,indexInParent,validationRequired,ngformId,bNoAlert){function hasClass(element,cls){return-1<(" "+element.className+" ").indexOf(" "+cls+" ")}var isInvalid=!1,isTruelyInvalid=!1,stepValidationReq={};if("Submit"===validationRequired&&scp.bpTree&&scp.bpTree.children)for(var i=0;i<scp.bpTree.children.length;i++){var formId=scp.bpTree.sOmniScriptId+"-"+i,form=document.getElementById(formId);if(form&&!0===(isInvalid=hasClass(form,"ng-invalid")))break}return"Step"!==validationRequired&&"StepNext"!==validationRequired||(formId="Step"===validationRequired?$scope.findStep(scp,arrayIndex,indexInParent,stepValidationReq):ngformId,(form=document.getElementById(formId))&&(isInvalid=isTruelyInvalid=hasClass(form,"ng-invalid")),!1===stepValidationReq.validationRequired&&(isInvalid=!1),!0===stepValidationReq.truelyInvalid&&(isTruelyInvalid=!0),scp.child&&"Step"===scp.child.type&&(scp.child.tInvalid=isTruelyInvalid,scp.child.inValid=isInvalid)),isInvalid&&!bNoAlert&&window.alert(new Error(customLabels.OmniStepValidationError)),($scope.miniForm||!bNoAlert)&&isInvalid},$scope.findStep=function(scp,root,indexInParent,stepValidationReqProp){var stepIndex,formId;return scp&&(!scp.$parent||(stepIndex=("lightning"===ouiBaseService.layout||"newport"===ouiBaseService.layout?scp:scp.$parent).$parent)&&(stepIndex.child&&stepIndex.child.eleArray?formId=$scope.findStep(stepIndex.$parent,root,stepIndex.child.indexInParent,stepValidationReqProp):(root=stepIndex.child||stepIndex.step)&&(stepIndex=root.indexInParent,formId=scp.bpTree.sOmniScriptId+"-"+stepIndex,root.propSetMap.validationRequired||(stepValidationReqProp.validationRequired=!1),!0===root.bSrvErr&&(stepValidationReqProp.truelyInvalid=!0)))),formId},$scope.errorReplace=function(headerError,newError){var customError=newError&&newError.propSetMap?newError.propSetMap.errorMessage:null,error=function(err){try{return angular.fromJson(err)}catch(e){return err}}(headerError),newError=error,headerError=$scope.bpTree&&$scope.bpTree.propSetMap?$scope.bpTree.propSetMap.errorMessage:null;return(newError=(newError=headerError?$scope.performErrorReplace(error,headerError.custom):newError)===error&&customError?$scope.performErrorReplace(error,customError.custom):newError)===error&&customError&&customError.default?newError=customError.default:"object"==typeof newError&&(newError=angular.toJson(error)),newError},$scope.performErrorReplace=function(error,customError){if(!customError)return error;if("string"==typeof error){for(var i=0;i<customError.length;i++)if(error===customError[i].value){error=customError[i].message;break}}else if("object"==typeof error)for(i=0;i<customError.length;i++){var path=customError[i].path,node=$scope.preprocessElementInput(path),node=$scope.getJSONNode(error,node)||null;if(node){if(path&&!customError[i].value&&!customError[i].message){error=node;break}if(node===customError[i].value){error=customError[i].message;break}}}return error}}},{}],7:[function(require,module,exports){angular.module("vlocity-oui-common").directive("vlcOmniForm",function($compile,$timeout,ouiBaseService,currencySymbol,$rootScope){"use strict";return{restrict:"E",scope:{mode:"=?",omniInput:"=?",prefillInput:"<?",submitParams:"<?",cancelParams:"<?",view:"<?",offset:"<?",output:"=?",debug:"<?"},controller:VOUINS.OmniFormCtrl,templateUrl:"vlcOmniForm.html",link:function(scope,element,attrs){scope.mode=scope.mode||null,scope.console="console"===scope.mode,scope.omniInput=angular.fromJson(scope.omniInput),scope.$watchCollection("omniInput",function(newValue,oldValue){if(newValue)if(newValue.OmniDef)if(newValue.OmniDef.constructor!==String){var customMarkup,interval,omniForm=newValue.OmniDef;if(omniForm){if(scope.prefillInput=scope.prefillInput||{},omniForm.propSetMap.seedDataJSON=omniForm.propSetMap.seedDataJSON||{},scope.omniInput.OmniPrefillJSON=scope.omniInput.OmniPrefillJSON||{},(_.mergeWith||_.merge)(scope.prefillInput,omniForm.propSetMap.seedDataJSON,VOUINS.mergeJSONLogic),(_.mergeWith||_.merge)(scope.prefillInput,scope.omniInput.OmniPrefillJSON,VOUINS.mergeJSONLogic),!0!==scope.debug&&!0!==omniForm.debug||(omniForm.debug=!0,omniForm.debugArray=omniForm.debugArray||[]),ouiBaseService.bMultiLang="Multi-Language"===omniForm.bpLang,ouiBaseService.LanguageCode=scope.prefillInput.LanguageCode,VOUINS.pickListSeeding($rootScope,ouiBaseService,omniForm),omniForm.children&&angular.isArray(omniForm.children)){for(var index=0;index<omniForm.children.length&&"Step"!==omniForm.children[index].type;index++);0<=index&&(omniForm.children=omniForm.children.slice(0,index+1))}void 0!==scope.offset&&null!==scope.offset&&(omniForm.sOmniScriptId=omniForm.sOmniScriptId+"--"+scope.offset),scope.bpTree=omniForm,(scope.bpTree.readOnly||scope.bpTree.propSetMap.displayOnly)&&(scope.bpTree.uiReadOnly=!0),scope.bpTree.vlcOmniFormClose=scope.bpTree.propSetMap.vlcOmniFormClose,scope.vlcOmniFormSubmitLabel=scope.bpTree.propSetMap.submitLabel||customLabels.OmnisubmitLabel,scope.vlcOmniFormCancelLabel=scope.bpTree.propSetMap.cancelLabel||customLabels.OmnicancelLabel,scope.vlcOmniFormResetLabel=scope.bpTree.propSetMap.resetLabel||"Reset",scope.bpTree.readOnly&&"submitted"===scope.view&&(scope.submitted=!0)}scope.bpTree&&(customMarkup=VOUINS.loadCustomHTMLJS(scope),window.OmniOut&&VOUINS.loadHeaderHTML(scope,$compile),null!==customMarkup&&($("head").append(customMarkup),$compile(customMarkup)),scope.bpTree.elementTypeToHTMLMapOW||(scope.bpTree.elementTypeToHTMLMapOW=angular.copy(ouiBaseService.elementTypeToHTMLMapOW),(_.mergeWith||_.merge)(scope.bpTree.elementTypeToHTMLMapOW,scope.bpTree.propSetMap.elementTypeToHTMLTemplateMapping,VOUINS.mergeJSONLogic)),scope.errHTMLId=scope.bpTree.elementTypeToHTMLMapOW["Error Sub Block"],scope.getCurrencySymbol(scope,scope.bpService),scope.miniForm=!0,scope.children=scope.bpTree.children,scope.child={children:scope.children},!0!==scope.bpTree.readOnly&&(scope.bpTree.response||(scope.bpTree.response={})),scope.bpTree.sOmniScriptId2=(sfdcVars.bOmniStudio?"os_":"")+scope.bpTree.sOmniScriptId,ouiBaseService.bPLSeeding?interval=setInterval(function(){!0!==$rootScope.seedingDone&&!0!==$rootScope.seedingFailed||(clearInterval(interval),$timeout(function(){!0!==scope.bpTree.readOnly&&scope.applyCallResp(scope.prefillInput)},0))},10):$timeout(function(){!0!==scope.bpTree.readOnly&&scope.applyCallResp(scope.prefillInput)},0))}else newValue.OmniDef=angular.fromJson(newValue.OmniDef);else VOUINS.ClearData(scope);else VOUINS.ClearData(scope)})}}})},{}],8:[function(require,module,exports){angular.module("vlocity-oui-common").directive("vlcOmniFormChild",function($compile,$templateCache,$sce){"use strict";return{restrict:"E",replace:!0,transclude:!0,require:"?ngModel",scope:!1,link:function(scope,ele,attrs,ngModel){var htmlMarkup,bMultiLang="Multi-Language"===scope.bpTree.bpLang;if(0===scope.child.level)htmlMarkup=scope.child.propSetMap.HTMLTemplateId||scope.bpTree.elementTypeToHTMLMapOW[scope.child.type],bMultiLang&&(scope.child.propSetMap.label=scope.bpTree.labelKeyMap[scope.bpTree.labelMap[scope.child.name]],VOUINS.ootbLabelMap.hasOwnProperty(scope.child.type)&&VOUINS.handleMultiLangLabel(scope.child,scope.bpTree.labelKeyMap));else if(angular.isArray(scope.child.eleArray[0].children)){if(bMultiLang)for(var i=0;i<scope.child.eleArray.length;i++)scope.child.eleArray[i].propSetMap.label=scope.bpTree.labelKeyMap[scope.bpTree.labelMap[scope.child.eleArray[i].name]],VOUINS.ootbLabelMap.hasOwnProperty(scope.child.eleArray[i].type)&&VOUINS.handleMultiLangLabel(scope.child.eleArray[i],scope.bpTree.labelKeyMap);"Text Block"===scope.child.eleArray[0].type?scope.child.eleArray[0].propSetMap.value=$sce.trustAsHtml(bMultiLang?scope.child.eleArray[0].propSetMap.textKey:scope.child.eleArray[0].propSetMap.text):"Headline"===scope.child.eleArray[0].type&&(scope.child.eleArray[0].propSetMap.value=$sce.trustAsHtml(bMultiLang?scope.child.eleArray[0].propSetMap.labelKey:scope.child.eleArray[0].propSetMap.label)),htmlMarkup=scope.child.eleArray[0].propSetMap.HTMLTemplateId||scope.bpTree.elementTypeToHTMLMapOW[scope.child.eleArray[0].type],"Selectable Items"===scope.child.eleArray[0].type&&(scope.child.eleArray[0].itemsKey=scope.child.eleArray[0].propSetMap.itemsKey,scope.child.eleArray[0].itemsKey||(scope.child.eleArray[0].itemsKey="recSet"),void 0!==scope.child.eleArray[0].vlcSI&&null!==scope.child.eleArray[0].vlcSI||(scope.child.eleArray[0].vlcSI={}),htmlMarkup=scope.bpTree.elementTypeToHTMLMapOW[scope.child.eleArray[0].type])}htmlMarkup=$templateCache.get(htmlMarkup),0<scope.child.level&&"Selectable Items"===scope.child.eleArray[0].type&&(scope.child.eleArray[0].propSetMap.HTMLTemplateId||(scope.child.eleArray[0].propSetMap.HTMLTemplateId=scope.bpTree.elementTypeToHTMLMapOW["Selectable Item"])),htmlMarkup&&$compile(htmlMarkup)(scope,function(cloned,scope){ele.append(cloned)})}}})},{}],9:[function(require,module,exports){!function(){"use strict";angular.module("vlocity-oui-common").directive("appFilereader",function($q,ouiBaseService){var slice=Array.prototype.slice;return{restrict:"A",require:"ngModel",priority:10,link:function(scope,element,attrs,ngModel){ngModel&&("miniForm"===attrs.appFilereader&&(ouiBaseService.miniForm=!0),ngModel.$render=function(){},element.bind("change",function(e){var element=e.target;element.value&&(element.disabled=!0,$q.all(slice.call(element.files,0).map(function(file){var deferred=$q.defer(),reader=new FileReader;return reader.onload=function(e){deferred.resolve(e.target.result)},reader.onerror=function(e){deferred.reject(e)},reader.readAsDataURL(file),deferred.promise})).then(function(values){if(element.multiple||element){var fileArray=ngModel.$viewValue;VOUINS.isEmpty(fileArray)&&(fileArray=[]);for(var i=0;i<element.files.length;i++){var f={};f.filename=element.files[i].name,f.size=element.files[i].size,f.data=VOUINS.generateUUID(),scope.bpTree.filesMap||(scope.bpTree.filesMap={}),scope.bpTree.filesMap[f.data]=values[i],fileArray.push(f)}ngModel.$setViewValue(fileArray)}element.value=null,element.disabled=!1,ouiBaseService.aggregate(scope,scope.control.index,scope.control.indexInParent,!0,-1),scope.control.propSetMap.uploadContDoc&&scope.uploadContentVersions(scope,scope.control)}))}))}}})}()},{}],10:[function(require,module,exports){angular.module("vlocity-oui-common").directive("chainup",function(ouiBaseService){"use strict";return{restrict:"A",require:"ngModel",priority:1,link:function(scope,element,attrs,ngModel){ngModel&&("miniForm"===attrs.chainup&&(ouiBaseService.miniForm=!0),scope.control&&(void 0===scope.control.propSetMap.mask||null===scope.control.propSetMap.mask||""===scope.control.propSetMap.mask?element.bind("change",function(){ouiBaseService.aggregate(scope,scope.control.index,scope.control.indexInParent,!0,-1)}):element.bind("change blur",function(){ouiBaseService.aggregate(scope,scope.control.index,scope.control.indexInParent,!0,-1)})))}}})},{}],11:[function(require,module,exports){!function(){"use strict";var omniout;"{!$Api.Session_ID}"===window.sessionId&&(omniout=!0);angular.module("vlocity-oui-common").directive("vlcBindHtml",["$sce","$parse","$compile",function($sce,$parse,$compile){return{restrict:"A",compile:function(tElement,tAttrs){$parse(tAttrs.vlcBindHtml),$parse(tAttrs.vlcBindHtml,function(val){return $sce.valueOf(val)});return $compile.$$addBindingClass(tElement),function(scope,element,attrs){$compile.$$addBindingInfo(element,attrs.vlcBindHtml);var value,control=scope.control;function bindHtml(value){omniout?element.html($compile($sce.getTrustedHtml(value))(scope)||""):element.html($sce.getTrustedHtml(value)||"")}if("Disclosure"===control.type)return(value=control.propSetMap.text)?void bindHtml(value=$sce.trustAsHtml(value)):void 0;if(scope.miniForm)return(value=control.propSetMap.value)?void bindHtml(value):void 0;scope.$watch(function(){return scope.refresh(control,!0)},function(val){bindHtml($sce.trustAsHtml(val))})}}}}])}()},{}],12:[function(require,module,exports){!function(){"use strict";angular.module("vlocity-oui-common").directive("dateFormat",function(){function dateFormatFn(match){return/^[YD]$/.test(match)?match.toLowerCase():/^[m]$/.test(match)?match.toUpperCase():match}var dateFormatPtrn=/Y(?!ear)|D(?!ate)|m/g,dateTimeFormatPtrn=/Y(?!ear)|D(?!ate)/g;return{restrict:"A",link:function(scope,el,attrs){var formatKey=attrs.hasOwnProperty("dateFormat")?"dateFormat":"modelDateFormat",formatPtrn=scope.control&&"Formula"!==scope.control.type?dateFormatPtrn:dateTimeFormatPtrn;attrs[formatKey]&&angular.isString(attrs[formatKey])&&(attrs[formatKey]=attrs[formatKey].replace(formatPtrn,dateFormatFn),scope.control&&(scope.control.propSetMap[formatKey]=attrs[formatKey]))}}}),angular.module("vlocity-oui-common").directive("timeFormat",function(){function time1224Fn(match){return match.replace(/h/g,"H")}var time1224Ptrn=/(h)([^Aa]*?$)/g;return{restrict:"A",link:function(scope,el,attrs){attrs.timeFormat&&angular.isString(attrs.timeFormat)&&(attrs.timeFormat=attrs.timeFormat.replace(time1224Ptrn,time1224Fn),scope.control&&(scope.control.propSetMap.timeFormat=attrs.timeFormat))}}})}()},{}],13:[function(require,module,exports){!function(){"use strict";angular.module("vlocity-oui-common").directive("vlcSldsLookupControl",["$rootScope","$window",function($rootScope,$window){return{restrict:"A",require:"ngModel",link:function(scope,element,attrs,ngModelCtrl){var bodyEl=angular.element($window.document.body);ngModelCtrl.$validators.validateValLookup=function(modelValue){return!(!modelValue&&null!==modelValue)};var progMessage=scope.customLabels.OmniLoading||" - loading list from the server .....";function onBodyClick(evt){if(element[0]!==evt.target&&!$.contains(element[0],evt.target)&&!$.contains(element[0].nextElementSibling,evt.target))return hide(),!0}function hide(){bodyEl.off("click",onBodyClick),scope.control.showSubList=!1,function(scope){scope.$$phase||scope.$root&&scope.$root.$$phase||scope.$digest()}(scope)}ngModelCtrl.$formatters.unshift(function(modelValue){var vObjects=scope.control.viewObjects||scope.control.propSetMap.options,index=_.findIndex(vObjects,{name:modelValue});return modelValue&&vObjects&&0<=index?(ngModelCtrl.$setTouched(),ngModelCtrl.$setDirty(),scope.aggregate(scope,scope.control.index,scope.control.indexInParent,!0,-1),vObjects[index].value):(null===modelValue&&scope.aggregate(scope,scope.control.index,scope.control.indexInParent,!0,-1),null)}),scope.convertToObject=function(optPromise){optPromise&&(bodyEl.on("click",onBodyClick),scope.control.showSubList=!0),scope.control.viewObjects=[];optPromise=scope.control.propSetMap.options;optPromise&&optPromise.length||(scope.loadingData=progMessage);optPromise=scope.getLookupOptions(scope.control,scope);optPromise&&optPromise.then&&optPromise.then(function(){scope.control.viewObjects=scope.control.propSetMap.options,scope.loadingData=""})},scope.setViewValue=function(obj){scope.control.response=obj.name,hide()}}}}])}()},{}],14:[function(require,module,exports){!function(){"use strict";function parseFloatIfNum(x){return""===x||isNaN(x)?0:parseFloat(x)}angular.module("vlocity-oui-common").provider("$vlcRangeSlider",function(){var defaults=this.defaults={animate:!1,animationDuration:100,behaviour:"drag",orientation:"horizontal",range:{min:5,max:10},step:1,start:5,direction:"ltr"};this.$get=function($rootScope,$window){var isNative=/(ip[ao]d|iphone|android)/gi.test($window.navigator.userAgent);"createTouch"in $window.document||0 in $window.document;function VlcRangeSliderFactory(element,controller,config){var $vlcRangeSlider=noUiSlider.create(element[0],angular.extend({},defaults,config)),options=$vlcRangeSlider.options,scope=$vlcRangeSlider.$scope=options.scope&&options.scope.$new()||$rootScope.$new(),keyMap={37:"ltr"!=options.direction,38:1,39:"ltr"==options.direction,40:0};options.scope.control.prevScrollval=null!=options.scope.control.propSetMap.defaultValue?options.scope.control.propSetMap.defaultValue:options.range.min,null!=options.scope.control.response&&(options.scope.control.prevScrollval=options.scope.control.response),scope.commitSliderVal=function(event,ui){if(null!=event&&null!=event[ui]&&0<=event[ui]-options.scope.control.prevScrollval&&event[ui]-options.scope.control.prevScrollval!=options.step&&event[ui]+options.step>options.range.max)return $vlcRangeSlider.set(options.scope.control.prevScrollval),!1;options.scope.control.prevScrollval=null!=event&&null!=event[ui]?event[ui]:options.scope.control.prevScrollval,controller.$setViewValue($vlcRangeSlider.get()),(angular.isFunction(controller.$oldRender)?controller.$oldRender:controller.$render)()},$vlcRangeSlider.init=function(){$vlcRangeSlider.on("slide",scope.commitSliderVal),element.children().children().on("keydown",$vlcRangeSlider.$onKeyDown),controller.$render()};var _destroy=$vlcRangeSlider.destroy;return $vlcRangeSlider.destroy=function(){$vlcRangeSlider.off(),element.children().children().off("keydown"),scope.$destroy(),_destroy()},$vlcRangeSlider.$onKeyDown=function(evt){var offset;element.attr("disabled")||("number"!=typeof(offset=$vlcRangeSlider.steps()[0][+keyMap[evt.keyCode]])||isNaN(offset)||(evt.preventDefault(),evt.stopPropagation(),controller.$setViewValue(+$vlcRangeSlider.get()+offset*(2*keyMap[evt.keyCode]-1)),controller.$render()))},$vlcRangeSlider}return VlcRangeSliderFactory.defaults=defaults,VlcRangeSliderFactory}}).directive("vlcRangeSlider",function($window,$vlcRangeSlider,ngIfDirective){$vlcRangeSlider.defaults;var format="function"==typeof $window.format?$window.format:function(mask,input){return input},isNative=/(ip[ao]d|iphone|android)/gi.test($window.navigator.userAgent),isTouch=("createTouch"in $window.document||"ontouchstart"in $window.document)&&isNative,ngIf=ngIfDirective[0];return{restrict:"A",require:"ngModel",link:function(scope,element,attrs,controller,$rootScope){var mergeLowVal,mergeHighVal,slider,updateOpt,repeatCloneResp,sliderTooltip,updateToolTip,noUiEle,options={scope:scope},rangeLowVal=scope.control.propSetMap.rangeLow,rangeHighVal=scope.control.propSetMap.rangeHigh,repeatClone=scope.control.propSetMap.repeatClone,defaultValue=scope.control.propSetMap.defaultValue,rangeLow=5,rangeHigh=10;function updateRangeOptions(mergeLVal,mergeHVal){rangeLow===mergeLVal&&rangeHigh===mergeHVal||(rangeLow=mergeLVal)!=(rangeHigh=mergeHVal)&&(null==scope.control.response&&(scope.control.response=rangeLow),updateOpt={range:{min:rangeLow,max:rangeHigh},start:rangeLow},repeatClone||null==scope.control.response&&(scope.control.response=null==defaultValue?rangeLow:defaultValue),null!=repeatCloneResp&&(scope.control.response=repeatCloneResp,repeatCloneResp=null),options.range.min=rangeLow,options.range.max=rangeHigh,options.scope.control.prevScrollval=null!=scope.control.response?scope.control.response:rangeLow,element.attr("min",rangeLow),element.attr("max",rangeHigh),element.attr("aria-valuemin",rangeLow),element.attr("aria-valuemax",rangeHigh),slider.updateOptions(updateOpt),slider.set(rangeLow),slider.init())}function formatDisplayVal(x){return String(format(options.mask,roundToStep(x)))}function roundToStep(rVal){rVal=Math.round((parseFloatIfNum(rVal)-options.range.min)/options.step)*options.step+options.range.min;return options.range.max>=rVal?rVal:options.range.max}angular.forEach(["mask"],function(key){angular.isDefined(attrs[key])&&(options[key]=attrs[key])}),angular.forEach(["min","max","step"],function(key){angular.isDefined(attrs[key])&&(options[key]=parseFloatIfNum(attrs[key]))}),null==rangeLowVal&&(scope.control.propSetMap.rangeLow=5,rangeLowVal=5),null==rangeHighVal&&(scope.control.propSetMap.rangeHigh=10,rangeHighVal=10),"string"==typeof rangeLowVal&&/^[%].*?[%]$/.test(rangeLowVal)&&!repeatClone?null==scope.control.response&&(scope.control.response=null==defaultValue?rangeLow:defaultValue):repeatClone?repeatClone&&(rangeLow=isNaN(rangeLowVal)?5:parseFloatIfNum(rangeLowVal),null==scope.control.response&&(scope.control.response=null==defaultValue?rangeLow:defaultValue),repeatCloneResp=scope.control.response):(rangeLow=isNaN(rangeLowVal)?5:parseFloatIfNum(rangeLowVal),null==scope.control.response&&(scope.control.response=null==defaultValue?rangeLow:defaultValue)),"string"==typeof rangeHighVal&&/^[%].*?[%]$/.test(rangeHighVal)||(rangeHigh=parseFloatIfNum(rangeHighVal)),attrs.ngIf=function(){var element;("string"==typeof rangeLowVal&&/^[%].*?[%]$/.test(rangeLowVal)||"string"==typeof rangeHighVal&&/^[%].*?[%]$/.test(rangeHighVal))&&(element=(scope.$parent&&scope.$parent.control?scope.$parent:scope).control,mergeLowVal="string"!=typeof rangeLowVal?rangeLowVal:scope.handleMergeField(rangeLowVal,!1,null,element),mergeHighVal="string"!=typeof rangeHighVal?rangeHighVal:scope.handleMergeField(rangeHighVal,!1,null,element),!isNaN(mergeLowVal)&&null!=mergeLowVal||(mergeLowVal=5),!isNaN(mergeHighVal)&&null!=mergeHighVal||(mergeHighVal=10),mergeLowVal=parseFloatIfNum(mergeLowVal),mergeHighVal=parseFloatIfNum(mergeHighVal),updateRangeOptions(mergeLowVal,mergeHighVal))},ngIf.link.apply(ngIf,arguments),angular.isDefined(options.start)||(options.start=parseFloatIfNum(rangeLow)?parseFloatIfNum(rangeLow):5),options=angular.extend({},options,{direction:"rtl"===element.css("direction")?"rtl":"ltr",range:{min:angular.isDefined(rangeLow)?parseFloatIfNum(rangeLow):5,max:angular.isDefined(rangeHigh)?parseFloatIfNum(rangeHigh):10},step:angular.isDefined(attrs.step)?parseFloatIfNum(attrs.step):1,tooltips:{to:formatDisplayVal},format:{to:roundToStep,from:parseFloatIfNum}}),isTouch?(element.after("<span vlc-range-slider-generated></span>"),sliderTooltip=element.next(),updateToolTip=function(){sliderTooltip.text(formatDisplayVal(controller.$viewValue))},controller.$oldRender=controller.$render,controller.$render=function(){controller.$oldRender(),updateToolTip()},controller.$viewChangeListeners.push(updateToolTip)):(element.after('<div class="noUISlider" vlc-range-slider-generated></div>'),noUiEle=element.next(),element.css("display","none"),attrs.ngDisabled&&scope.$watch(attrs.ngDisabled,function(newValue,oldValue){slider&&angular.isDefined(newValue)&&(!0===newValue?noUiEle.attr("disabled",!0):noUiEle.removeAttr("disabled"))}),slider=$vlcRangeSlider(noUiEle,controller,options),scope.$evalAsync(function(){controller.$oldRender=controller.$render,controller.$render=function(){controller.$oldRender(),slider.set(controller.$viewValue)},controller.$formatters.push(function(modelValue){return null===modelValue?options.start:modelValue}),slider.init()}),scope.$on("$destroy",function(){slider&&slider.destroy(),slider=options=null}))}}}).directive("vlcNewportRangeSlider",function($window,ngIfDirective){var ngIf=ngIfDirective[0],format="function"==typeof $window.format?$window.format:function(mask,input){return input};return{restrict:"A",require:"ngModel",link:function(scope,element,attrs,controller){var mergeLowVal,mergeHighVal,repeatCloneResp,rangeLowVal=scope.control.propSetMap.rangeLow,rangeHighVal=scope.control.propSetMap.rangeHigh,repeatClone=scope.control.propSetMap.repeatClone,defaultValue=scope.control.propSetMap.defaultValue,rangeLow=5,rangeHigh=10;function updateRangeOptions(mergeLVal,mergeHVal){rangeLow===mergeLVal&&rangeHigh===mergeHVal||(rangeLow=mergeLVal)!=(rangeHigh=mergeHVal)&&(null==scope.control.response&&(scope.control.response=rangeLow),repeatClone||null!=scope.control.response||(scope.control.response=null==defaultValue?rangeLow:defaultValue),null!=repeatCloneResp&&(scope.control.response=repeatCloneResp,repeatCloneResp=null),element.attr("min",rangeLow),element.attr("max",rangeHigh),element.attr("aria-valuemin",rangeLow),element.attr("aria-valuemax",rangeHigh),rangeLow>scope.control.response&&(scope.control.response=rangeLow),rangeHigh<scope.control.response&&(scope.control.response=rangeHigh))}null==rangeLowVal&&(scope.control.propSetMap.rangeLow=5,rangeLowVal=5),null==rangeHighVal&&(scope.control.propSetMap.rangeHigh=10,rangeHighVal=10),"string"==typeof rangeLowVal&&/^[%].*?[%]$/.test(rangeLowVal)&&!repeatClone?null==scope.control.response&&(scope.control.response=null==defaultValue?rangeLow:defaultValue):repeatClone?repeatClone&&(rangeLow=isNaN(rangeLowVal)?5:parseFloatIfNum(rangeLowVal),null==scope.control.response&&(scope.control.response=null==defaultValue?rangeLow:defaultValue),repeatCloneResp=scope.control.response):(rangeLow=isNaN(rangeLowVal)?5:parseFloatIfNum(rangeLowVal),null==scope.control.response&&(scope.control.response=null==defaultValue?rangeLow:defaultValue)),"string"==typeof rangeHighVal&&/^[%].*?[%]$/.test(rangeHighVal)||(rangeHigh=parseFloatIfNum(rangeHighVal)),element.attr("min",rangeLow),element.attr("max",rangeHigh),element.attr("aria-valuemin",rangeLow),element.attr("aria-valuemax",rangeHigh),attrs.ngIf=function(){var element;("string"==typeof rangeLowVal&&/^[%].*?[%]$/.test(rangeLowVal)||"string"==typeof rangeHighVal&&/^[%].*?[%]$/.test(rangeHighVal))&&(element=(scope.$parent&&scope.$parent.control?scope.$parent:scope).control,mergeLowVal="string"!=typeof rangeLowVal?rangeLowVal:scope.handleMergeField(rangeLowVal,!1,null,element),mergeHighVal="string"!=typeof rangeHighVal?rangeHighVal:scope.handleMergeField(rangeHighVal,!1,null,element),!isNaN(mergeLowVal)&&null!=mergeLowVal||(mergeLowVal=5),!isNaN(mergeHighVal)&&null!=mergeHighVal||(mergeHighVal=10),mergeLowVal=parseFloatIfNum(mergeLowVal),mergeHighVal=parseFloatIfNum(mergeHighVal),updateRangeOptions(mergeLowVal,mergeHighVal))},ngIf.link.apply(ngIf,arguments),scope.formatDisplayVal=function(){return attrs.mask?String(format(attrs.mask,(x=scope.control.response,rVal=angular.isDefined(attrs.step)?parseFloatIfNum(attrs.step):1,(rVal=Math.round((parseFloatIfNum(x)-rangeLow)/rVal)*rVal+rangeLow)<=rangeHigh?rVal:rangeHigh))):scope.control.response;var x,rVal}}}})}()},{}],15:[function(require,module,exports){!function(){"use strict";angular.module("vlocity-oui-common").directive("vlcBubbleCanceller",function(){return{restrict:"A",scope:!1,link:function(scope,elem,attrs){elem.bind("click keydown",function(e){var keyCode=e.which||e.keyCode;if("click"==e.type||32===keyCode||13===keyCode)return e.stopPropagation(),"true"===attrs.vlcBubbleCanceller&&e.preventDefault(),"keydown"==e.type&&"button"===e.target.type&&e.target.attributes.hasOwnProperty("ng-click")&&e.target.click(),!1})}}})}()},{}],16:[function(require,module,exports){!function(){"use strict";function setViewValue(mask,value,elem){mask&&(elem[0].value=value)}angular.module("vlocity-oui-common").directive("vlcSldsCheckValChecker",function(){return{restrict:"A",scope:!1,require:"ngModel",link:function(scope,elem,attrs,ngModelCtrl){!0!==scope.bpTree.readOnly&&ngModelCtrl.$formatters.unshift(function(modelValue){ngModelCtrl.$$runValidators(modelValue,modelValue,angular.noop);return ngModelCtrl.$valid?(scope.aggregate(scope,scope.control.index,scope.control.indexInParent,!0,-1),ngModelCtrl.$setTouched(),ngModelCtrl.$setDirty(),setViewValue(scope.control.propSetMap.mask,modelValue,elem),modelValue):(null!==scope.control.response&&(scope.control.response=null),scope.aggregate(scope,scope.control.index,scope.control.indexInParent,!0,-1),setViewValue(scope.control.propSetMap.mask,modelValue,elem),null)})}}})}()},{}],17:[function(require,module,exports){!function(){"use strict";angular.module("vlocity-oui-common").directive("vlcSldsFileSelect",function($compile){return{restrict:"A",link:function(scope,element,attrs){"true"===attrs.vlcSldsFileSelect&&element.attr("multiple","")}}})}()},{}],18:[function(require,module,exports){!function(){"use strict";angular.module("vlocity-oui-common").directive("vlcSldsMinMaxLen",function($parse,$compile){return{restrict:"A",require:"ngModel",priority:999,link:function(scope,element,attrs,ngModelCtrl){attrs.uiMask&&scope.control.propSetMap.mask&&(delete ngModelCtrl.$validators.minlength,delete ngModelCtrl.$validators.maxlength)}}})}()},{}],19:[function(require,module,exports){!function(){"use strict";angular.module("vlocity-oui-common").directive("vlcSldsMuValChecker",function(){return{restrict:"A",scope:!1,require:["^form","ngModel"],link:function(scope,elem,attrs,ctrls){var ngModelCtrl,formCtrl;!0!==scope.bpTree.readOnly&&(ngModelCtrl=ctrls[1],formCtrl=ctrls[0],ngModelCtrl.$formatters.unshift(function(modelValue){ngModelCtrl.$$runValidators(modelValue,modelValue,angular.noop);return ngModelCtrl.$valid?("Multi-select"===scope.control.type?scope.onMultiSelect(scope,scope.control,scope.option,!0):"Radio Group"===scope.control.type&&scope.onRadioGroupSelect(scope,scope.control,scope.option,!0),ngModelCtrl.$setTouched(),ngModelCtrl.$setDirty(),formCtrl&&formCtrl.$setDirty(),modelValue):(scope.control.req&&null!==scope.control.response&&(scope.control.response=null),scope.aggregate(scope,scope.control.index,scope.control.indexInParent,!0,-1),null)}))}}})}()},{}],20:[function(require,module,exports){!function(){"use strict";var REG_EMAIL=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)+$/;angular.module("vlocity-oui-common").directive("vlcSldsNgPattern",function($timeout){return{restrict:"A",require:"?ngModel",link:function(scope,elm,attr,ctrl){var regexp,regex;ctrl&&(regexp=attr.vlcSldsNgPattern,"email"===attr.type&&0===attr.vlcSldsNgPattern.length?regex=REG_EMAIL:angular.isString(regexp)&&0<regexp.length&&(regex=(regex=/^\s*\/(.*)\/([gimuy]*)\s*$/.exec(regexp))?new RegExp(regex[1],regex[2]):new RegExp("^"+regexp+"$"))&&!regex.test&&console.error("invalid regular expression "+regex),regexp=regex||void 0,angular.isUndefined(regex)||(ctrl.$validators.pattern=function(modelValue,viewValue){return ctrl.$isEmpty(viewValue=modelValue!==viewValue?modelValue:viewValue)||angular.isUndefined(regexp)||function(viewValue){return!!regexp.test(viewValue)}(viewValue)}))}}})}()},{}],21:[function(require,module,exports){!function(){"use strict";angular.module("vlocity-oui-common").directive("vlcSldsNumValChecker",function(){return{restrict:"A",scope:!1,require:"ngModel",link:function(scope,elem,attrs,ngModelCtrl){var valObjBackUp;!0!==scope.bpTree.readOnly&&(ngModelCtrl.runAllValidators=function(required,modelValue){var result=!0;if(!required)for(var key in this.$validators)this.$validators.hasOwnProperty(key)&&"required"!==key&&(result=result&&this.$validators[key](""+ngModelCtrl.$modelValue,""+ngModelCtrl.$modelValue));return result},attrs.viaMask&&(ngModelCtrl.$formatters.unshift(function(modelValue){var editBlockParent="lightning"==scope.ouiBaseService.layout?".vlc-slds-edit-block--child":".nds-edit-block_child";return("true"===scope.control.noformatterebmodal||scope.$parent&&scope.$parent.control&&"true"===scope.$parent.control.noformatterebmodal)&&"true"===$(elem).parents(editBlockParent).attr("noformattereb")?modelValue:(0===Object.keys(ngModelCtrl.$validators).length&&valObjBackUp&&!scope.control.req&&(ngModelCtrl.$validators=valObjBackUp),ngModelCtrl.runAllValidators(scope.control.req,modelValue)?ngModelCtrl.$$runValidators(""+ngModelCtrl.$modelValue,""+ngModelCtrl.$modelValue,angular.noop):modelValue=null,modelValue&&ngModelCtrl.$valid?(ngModelCtrl.$setTouched(),ngModelCtrl.$setDirty(),scope.aggregate(scope,scope.control.index,scope.control.indexInParent,!0,-1),modelValue):(null!==scope.control.response&&(scope.control.response=null,ngModelCtrl.$setPristine(),ngModelCtrl.$setUntouched(),(void 0===scope.control.req?scope.control.propSetMap.required:scope.control.req)||(valObjBackUp=ngModelCtrl.$validators,ngModelCtrl.$validators={},setTimeout(function(){ngModelCtrl.$validators=valObjBackUp}))),scope.aggregate(scope,scope.control.index,scope.control.indexInParent,!0,-1),function(mask,value,elem){mask&&(elem[0].value=value)}(scope.control.propSetMap.mask,modelValue,elem),null))}),scope.init(scope,scope.control)))}}})}()},{}],22:[function(require,module,exports){!function(){"use strict";angular.module("vlocity-oui-common").directive("vlcSldsOnlyNumeric",function(){return{restrict:"A",require:"ngModel",link:function(scope,element,attrs,ctrl){var decimalSeperator=".";try{var sep=parseFloat(1.5).toLocaleString().substring(1,2);"."!==sep&&","!==sep||(decimalSeperator=sep)}catch(e){}var decimalKeyCode="."===decimalSeperator?".":",";element.on("keypress",function(evt){var _ref=evt.key,_ref1=evt.key;"ArrowLeft"===_ref||"ArrowRight"===_ref||"."===_ref||"Backspace"===_ref||"Tab"===_ref||"End"===_ref||"Home"===_ref||"Delete"===_ref?"ArrowRight"==evt.key&&0==this.selectionStart&&(this.selectionStart=0,this.selectionEnd=1):(_ref1!==decimalKeyCode&&"1"!==_ref1&&"2"!==_ref1&&"3"!==_ref1&&"4"!==_ref1&&"5"!==_ref1&&"6"!==_ref1&&"7"!==_ref1&&"8"!==_ref1&&"9"!==_ref1&&"0"!==_ref1&&"-"!==_ref1||(_ref===decimalKeyCode||_ref1===decimalKeyCode)&&-1<evt.target.value.indexOf(decimalSeperator)||("-"===_ref||"-"===_ref1)&&(0!==evt.target.selectionStart||-1<evt.target.value.indexOf("-"))||0===evt.target.selectionStart&&-1<evt.target.value.indexOf("-")&&0===evt.target.selectionEnd)&&evt.preventDefault()})}}})}()},{}],23:[function(require,module,exports){!function(){"use strict";angular.module("vlocity-oui-common").provider("$vlcSldsToolTip",function(){var defaults=this.defualts={templateUrl:"vlcSldsOmniToolTip.html",placement:"auto bottom",nubbinDirection:"top-right",tooltip:"true",trigger:"hover focus"};this.$get=function($sldsPopover){function VlcSldsToolTipFactory($vlcSldsToolTip,config){$vlcSldsToolTip=$sldsPopover($vlcSldsToolTip,angular.extend({},defaults,config)),config.scope,$vlcSldsToolTip.$options,$vlcSldsToolTip.$scope;return $vlcSldsToolTip}return VlcSldsToolTipFactory.defaults=defaults,VlcSldsToolTipFactory}}).directive("vlcSldsToolTip",["$vlcSldsToolTip","$aria",function($vlcSldsToolTip,$aria){$vlcSldsToolTip.defaults;return{restrict:"A",scope:!0,link:function(scope,element,attr){var options={scope:scope};angular.forEach(["template","templateUrl","controller","controllerAs","contentTemplate","placement","container","delay","trigger","html","nubbinDirection","tooltip","animation","id","prefixClass","prefixEvent"],function(key){angular.isDefined(attr[key])&&(options[key]=attr[key])}),$aria.config("tabindex")&&!element.attr("tabindex")&&element.attr("tabindex",0);var falseValueRegExp=/^(false|0|)$/i;angular.forEach(["html","container"],function(key){angular.isDefined(attr[key])&&falseValueRegExp.test(attr[key])&&(options[key]=!1)}),angular.forEach(["onBeforeShow","onShow","onBeforeHide","onHide"],function(key){var bsKey="bs"+key.charAt(0).toUpperCase()+key.slice(1);angular.isDefined(attr[bsKey])&&(options[key]=scope.$eval(attr[bsKey]))});var toolTip=$vlcSldsToolTip(element,options),options=toolTip.$options;scope.nubbinDirection=options.nubbinDirection,scope.$on("$destroy",function(){toolTip&&toolTip.destroy(),toolTip=options=null})}}}])}()},{}],24:[function(require,module,exports){!function(){"use strict";angular.module("vlocity-oui-common").directive("vlcSldsValCheckCurrency",function(){return{restrict:"A",scope:!1,require:"ngModel",link:function(scope,element,attrs,ngModelCtrl){var min,max;!0!==scope.bpTree.readOnly&&(min=scope.control.propSetMap.min||null,ngModelCtrl.$validators.min=function(modelValue,viewValue){return angular.isUndefined(min)||null===min||ngModelCtrl.$isEmpty(ngModelCtrl.$$rawModelValue)||Number(ngModelCtrl.$$rawModelValue)>=min},max=scope.control.propSetMap.max||null,ngModelCtrl.$validators.max=function(modelValue,viewValue){return angular.isUndefined(max)||null===max||ngModelCtrl.$isEmpty(ngModelCtrl.$$rawModelValue)||Number(ngModelCtrl.$$rawModelValue)<=max},ngModelCtrl.$parsers.push(function(value){return""===value?null:value}))}}})}()},{}],25:[function(require,module,exports){!function(){"use strict";var dModule=angular.module("vlocity-oui-common");function setViewValue(mask,value,elem){mask&&(elem[0].value=value||"")}function valChecker(mValue,modelValue){var elem=mValue.elem,scope=mValue.scope,ngModelCtrl=mValue.ngModelCtrl,maxLength=mValue.attrs,minLength=mValue.formIndex;if(!0===scope.bpTree.readOnly)return modelValue;if("Disclosure"===scope.control.type&&!0===scope.control.req&&!1===scope.control.response)return ngModelCtrl.$setValidity("required",!1),modelValue;var editBlockParent="lightning"==scope.ouiBaseService.layout?".vlc-slds-edit-block--child":".nds-edit-block_child",mValue=scope.$parent&&scope.$parent.control?scope.$parent.control:{};return("true"===scope.control.noformatterebmodal||"true"===mValue.noformatterebmodal)&&"true"===$(elem).parents(editBlockParent).attr("noformattereb")||mValue.hasOwnProperty("showInlineEBRow")&&ngModelCtrl.hasOwnProperty("$$lastCommittedViewValue")||scope.$parent&&scope.$parent.control&&scope.$parent.control.propSetMap&&!scope.$parent.control.propSetMap.isNewInlineBlock&&"true"===scope.control.noformatterebmodal&&null==modelValue||modelValue&&"telControl"===maxLength.vlcSldsValChecker&&ngModelCtrl.$viewValue===ngModelCtrl.$modelValue&&modelValue===ngModelCtrl.$viewValue?modelValue:(ngModelCtrl.$$runValidators(modelValue,modelValue,angular.noop),maxLength.uiMask&&scope.control.propSetMap.mask&&modelValue&&(mValue=ngModelCtrl.$formatters[minLength](modelValue+=""),maxLength=null===(maxLength=scope.control.propSetMap.maxLength)?255:maxLength,minLength=null===(minLength=scope.control.propSetMap.minLength)?0:minLength,mValue||(modelValue=null),mValue&&(mValue.length>maxLength||mValue.length<minLength)&&(modelValue=null)),modelValue&&ngModelCtrl.$valid?(scope.aggregate(scope,scope.control.index,scope.control.indexInParent,!0,-1),ngModelCtrl.$setTouched(),ngModelCtrl.$setDirty(),setViewValue(scope.control.propSetMap.mask,modelValue,elem),modelValue):(null!==scope.control.response&&(/Disclosure/.test(scope.control.type)?scope.control.response=!1:/Date\/Time \(Local\)/.test(scope.control.type)&&document.activeElement.closest('*[name="loopform"]')==elem[0].closest('*[name="loopform"]')||(scope.control.response=null)),scope.aggregate(scope,scope.control.index,scope.control.indexInParent,!0,-1),setViewValue(scope.control.propSetMap.mask,modelValue,elem),null))}dModule.directive("vlcSldsValChecker",function(){return{restrict:"A",scope:!1,require:"ngModel",priority:440,link:function(scope,elem,attrs,ngModelCtrl){var editBlockParent="lightning"==scope.ouiBaseService.layout?".vlc-slds-edit-block--child":".nds-edit-block_child",ebCtrl=scope.$parent&&scope.$parent.control?scope.$parent.control:{};return("true"===scope.control.noformatterebmodal||"true"===ebCtrl.noformatterebmodal)&&"true"===$(elem).parents(editBlockParent).attr("noformattereb")||ebCtrl.hasOwnProperty("showInlineEBRow")&&ngModelCtrl.hasOwnProperty("$$lastCommittedViewValue")?null:"Type Ahead"===scope.control.type&&scope.control.propSetMap.enableLookup?(ngModelCtrl.$formatters.push(valChecker.bind(null,{elem:elem,ngModelCtrl:ngModelCtrl,formIndex:0,scope:scope,attrs:attrs})),null):(scope.control.propSetMap.mask&&"uiMask"in attrs&&ngModelCtrl.$$attr&&ngModelCtrl.$$attr.$$observers&&ngModelCtrl.$$attr.$$observers.uiMask&&ngModelCtrl.$$attr.$$observers.uiMask[0]&&ngModelCtrl.$$attr.$$observers.uiMask[0](attrs.uiMask),scope.control.propSetMap.mask&&"uiMask"in attrs&&scope.control.propSetMap.pattern?ngModelCtrl.$formatters.push(valChecker.bind(null,{elem:elem,ngModelCtrl:ngModelCtrl,formIndex:0,scope:scope,attrs:attrs})):ngModelCtrl.$formatters.unshift(valChecker.bind(null,{elem:elem,ngModelCtrl:ngModelCtrl,formIndex:1,scope:scope,attrs:attrs})),void("uiMask"in attrs&&scope.init(scope,scope.control)))}}})}()},{}],26:[function(require,module,exports){angular.module("vlocity-oui-common").factory("ouiBaseService",function($q,$rootScope){var factory={};return factory.GenericInvoke=function(sClassName,sMethodName,input,options,iTimeout){var deferred=$q.defer();return VOUINS.GenericInvoke(sClassName,sMethodName,input,options,iTimeout,function(result,event){$rootScope.$apply(function(){event.status?deferred.resolve(result):deferred.reject(event)})}),deferred.promise},factory.OmniRemoteInvokeAux=function(configObj,src){var restPath=!1;if(window.customVOmniRemoteInvoke&&window.customVOmniRemoteInvoke.constructor===Function)return restPath=!0,window.customVOmniRemoteInvoke(configObj,src);if(!(window.OmniOut&&window.OmniForce&&window.OmniForce.isAuthenticated())||"Vlocity BuildJSONWithPrefill"===configObj.sClassName&&window.forceLocalDef)return restPath;restPath=!0,restPath="";return this.apexRestPathMap.hasOwnProperty(configObj.sClassName)?restPath=this.apexRestPathMap[configObj.sClassName]:configObj.sMethodName&&(restPath=configObj.sClassName+"/"+configObj.sMethodName+"/"),window.OmniForce.apexrest({path:"/"+this.sNS+"/v1/GenericInvoke/"+restPath,params:configObj.params,data:configObj,method:"POST"})},factory.OmniRemoteInvoke=function(configObj){var prom=this.OmniRemoteInvokeAux(configObj,this);return!1===prom?this.GenericInvoke(configObj.sClassName,configObj.sMethodName,configObj.input,configObj.options,configObj.iTimeout,configObj.label):prom},factory.miniForm=!1,factory.previewMode=sfdcVars.previewMode,factory.dataPreprocessorMap={},factory.pfJSON={},factory.scriptState=sfdcVars.scriptState,factory.sNS=sfdcVars.sNS,factory.sNSC=factory.sNS&&factory.sNS+".",factory.layout=sfdcVars.layout,factory.rootEleTypes=["Step","Remote Action","Rest Action","DataRaptor Extract Action","DataRaptor Post Action","Post to Object Action","Review Action","Done Action","Calculation Action","PDF Action","Set Values","Set Errors","DocuSign Envelope Action","Email Action","DataRaptor Transform Action","Matrix Action","Integration Procedure Action","Delete Action"],factory.actionEleTypes=VOUINS.actionEleTypes,factory.remoteInvokePrePostEleTypes=["Remote Action","Rest Action","Calculation Action","Integration Procedure Action"],factory.remoteInvokePostEleTypes=["DataRaptor Post Action","Post to Object Action","Matrix Action"],factory.remoteInvokePreEleTypes=["PDF Action"],factory.noneDataControlTypeListV2=sfdcVars.noneDataControlTypeListV2,"default"===factory.noneDataControlTypeListV2&&(factory.noneDataControlTypeListV2=["Button","Submit","Headline","Text Block","Remote Action","Rest Action","DataRaptor Extract Action","DataRaptor Post Action","Post to Object Action","Review Action","Done Action","Calculation Action","PDF Action","Set Values","Set Errors","DocuSign Envelope Action","DocuSign Signature Action","Line Break","Email Action","DataRaptor Transform Action","Matrix Action","Integration Procedure Action","Delete Action"]),factory.applyRespSkipTypeList=["Block","Edit Block","Step","Type Ahead Block","File","Button","Headline","Text Block","Remote Action","Rest Action","DataRaptor Extract Action","DataRaptor Post Action","Post to Object Action","Review Action","Done Action","Filter Block","Calculation Action","PDF Action","Image","Geolocation","Formula","Aggregate","Validation","Set Values","Set Errors","DocuSign Envelope Action","DocuSign Signature Action","Line Break","Email Action","DataRaptor Transform Action","Matrix Action","Integration Procedure Action","Delete Action"],factory.groupEleTypeList=["Step","Block","Edit Block","Filter Block","Type Ahead Block"],factory.readOnlyReqEleTypeList=["Checkbox","Currency","Date","Date/Time (Local)","Disclosure","Email","Lookup","Multi-select","Number","Password","Radio","Radio Group","Range","Select","Signature","Telephone","Text","Text Area","Time","URL","Type Ahead"],factory.repeatEleTypeList=["Block","Edit Block","Checkbox","Currency","Date","Date/Time (Local)","Email","Lookup","Multi-select","Number","Password","Radio","Range","Select","Signature","Telephone","Text","Text Area","Time","URL"],factory.selectTypeList=["Select","Multi-select"],factory.placeholderEleTypeList=["Selectable Items","Input Block"],factory.blockEleTypeList=["Block","Edit Block"],factory.elementTypeToHTMLMap={Checkbox:"vlcCheckbox.html",Currency:"vlcCurrency.html",Date:"vlcDate.html","Date/Time (Local)":"vlcDatetime-local.html",Disclosure:"vlcDisclosure.html",Email:"vlcEmail.html",File:"vlcFile.html",Image:"vlcImage.html",Headline:"vlcHeadline.html",Lookup:"vlcLookup.html","Multi-select":"vlcMulti-select.html",Number:"vlcNumber.html",Password:"vlcPassword.html",Radio:"vlcRadio.html",Range:"vlcRange.html",Step:"vlcStep.html",Select:"vlcSelect.html",Signature:"vlcSignature.html",Telephone:"vlcTel.html",Text:"vlcText.html","Text Area":"vlcTextarea.html","Text Block":"vlcTextblock.html",Time:"vlcTime.html",URL:"vlcURL.html","Selectable Items":"vlcSelectableItems.html","Line Break":"vlcLineBreak.html","Error Sub Block":"vlcErrorSubBlock.html","Selectable Item":"vlcEmpty.html"},factory.apexRestPathMap={"Vlocity SaveBP":"ApplicationService/SaveBPInstance","Vlocity BuildJSONV3":"ApplicationService/BuildJSONV3","Vlocity CompleteScript":"ApplicationService/CompleteScript","Vlocity CreateOSAttachment":"BusinessProcessDisplayController/CreateOSAttachment","Vlocity DeleteOSAttachment":"BusinessProcessDisplayController/DeleteOSAttachment","Vlocity VlocityTrack":"VlocityTrackingService/trackListObject","Vlocity BuildJSONWithPrefill":"BusinessProcessDisplayController/BuildJSONWithPrefillV2","Vlocity GetUserInfo":"BusinessProcessDisplayController/GetUserInfo","Vlocity GetCustomLabels":"DRDataPackRunnerController/getCustomLabels","Vlocity CreateOSContentVersion":"BusinessProcessUtility/CreateOSContentVersion","Vlocity LogUsageInteractionEvent":"BusinessProcessDisplayController/logUsageInteractionEvent"},factory.elementTypeToHTMLMapOW=angular.copy(factory.elementTypeToHTMLMap),(_.mergeWith||_.merge)(factory.elementTypeToHTMLMapOW,sfdcVars.eleTypeToHTMLTemplateMap,VOUINS.mergeJSONLogic),factory.aggregate=function(scp,arrayIndex,tempNode,bUIUpdate,resp,level){var key,newArrayIndex=arrayIndex;if(scp){scp.bpTree.propSetMap&&!0===scp.bpTree.propSetMap.enableKnowledge&&null!==scp.bpTree.asIndex&&!0!==level&&scp.searchKnowledgeArticle(scp.bpTree.children[scp.bpTree.asIndex]);var ctrlLevel=-10;scp.control&&(ctrlLevel=scp.control.level);var newItemResp,root,children,level=-10;if((level=scp.children&&0<scp.children.length?scp.children[0].level:level)===ctrlLevel+1&&scp.control){if("Filter Block"===scp.control.type)this.handleFilterBlock(scp.control);else if(VOUINS.isEmpty(scp.control.response)){scp.control.response={};for(var j=0;j<scp.children.length;j++)-1===this.noneDataControlTypeListV2.indexOf(scp.children[j].eleArray[0].type)&&(this.placeholderEleTypeList.indexOf(scp.children[j].eleArray[0].type)<0||0<=this.placeholderEleTypeList.indexOf(scp.children[j].eleArray[0].type)&&!0===scp.children[j].eleArray[0].propSetMap.dataJSON)&&(key=scp.children[j].eleArray[0].name,scp.control.response[key]=scp.children[j].response)}else-1===this.noneDataControlTypeListV2.indexOf(scp.children[tempNode].eleArray[0].type)&&(this.placeholderEleTypeList.indexOf(scp.children[tempNode].eleArray[0].type)<0||0<=this.placeholderEleTypeList.indexOf(scp.children[tempNode].eleArray[0].type)&&!0===scp.children[tempNode].eleArray[0].propSetMap.dataJSON)&&(key=scp.children[tempNode].eleArray[0].name,scp.control.response[key]=scp.children[tempNode].response);newArrayIndex=scp.control.index}if(scp.$parent)if(scp.$parent.child&&scp.$parent.child.eleArray){if(0<scp.$parent.child.eleArray.length)if(1==scp.$parent.child.eleArray.length){if(VOUINS.isEmpty(scp.$parent.child.response)&&!bUIUpdate)return;var eleType=scp.$parent.child.eleArray[0].type;0<=this.selectTypeList.indexOf(eleType)?scp.$parent.child.response=this.handleSelect(eleType,scp.$parent.child.eleArray[0].response):"Date"===eleType||"Date/Time (Local)"===eleType||"Time"===eleType?(null!=(tempResp=scp.$parent.child.eleArray[0].response)&&tempResp.constructor===Date&&(tempResp=tempResp.toISOString()),scp.$parent.child.response=tempResp):scp.$parent.child.response=scp.$parent.child.eleArray[0].response}else if(bUIUpdate)if(VOUINS.isEmpty(scp.$parent.child.response)){scp.$parent.child.response=[];for(var tempResp,i=0;i<scp.$parent.child.eleArray.length;i++)eleType=scp.$parent.child.eleArray[i].type,0<=this.selectTypeList.indexOf(eleType)?scp.$parent.child.response.push(this.handleSelect(eleType,scp.$parent.child.eleArray[i].response)):"Date"===eleType||"Time"===eleType||"Date/Time (Local)"===eleType?(null!=(tempResp=scp.$parent.child.eleArray[i].response)&&tempResp.constructor===Date&&(tempResp=tempResp.toISOString()),scp.$parent.child.response.push(tempResp)):scp.$parent.child.response.push(scp.$parent.child.eleArray[i].response)}else scp.$parent.child.eleArray[arrayIndex]&&scp.$parent.child.eleArray[arrayIndex].type&&(eleType=scp.$parent.child.eleArray[arrayIndex].type,angular.isArray(scp.$parent.child.response)||(scp.$parent.child.response=[scp.$parent.child.response]),0<=this.selectTypeList.indexOf(eleType)?scp.$parent.child.response[arrayIndex]=this.handleSelect(eleType,scp.$parent.child.eleArray[arrayIndex].response):"Date"===eleType||"Time"===eleType||"Date/Time (Local)"===eleType?(null!=(tempResp=scp.$parent.child.eleArray[arrayIndex].response)&&tempResp.constructor===Date&&(tempResp=tempResp.toISOString()),scp.$parent.child.response[arrayIndex]=tempResp):scp.$parent.child.response[arrayIndex]=scp.$parent.child.eleArray[arrayIndex].response);else{if(VOUINS.isEmpty(scp.$parent.child.response))return;angular.isArray(scp.$parent.child.response)?scp.$parent.child.response.length<scp.$parent.child.eleArray.length?null!==resp&&(newItemResp=scp.$parent.child.eleArray[resp+1].response,eleType=scp.$parent.child.eleArray[resp+1].type,0<=this.selectTypeList.indexOf(eleType)&&(newItemResp=this.handleSelect(eleType,newItemResp)),scp.$parent.child.response.splice(resp+1,0,newItemResp)):scp.$parent.child.response.length>scp.$parent.child.eleArray.length&&null!==resp&&(scp.$parent.child.response.splice(resp,1),1===scp.$parent.child.response.length&&(scp.$parent.child.response=scp.$parent.child.response[0])):(resp=scp.$parent.child.response,1<scp.$parent.child.eleArray.length&&(scp.$parent.child.response=[],newItemResp=scp.$parent.child.eleArray[1].response,eleType=scp.$parent.child.eleArray[1].type,0<=this.selectTypeList.indexOf(eleType)&&(newItemResp=this.handleSelect(eleType,newItemResp)),scp.$parent.child.response.splice(0,0,resp,newItemResp)))}this.aggregate(scp.$parent.$parent,newArrayIndex,scp.$parent.child.indexInParent,bUIUpdate,null,!0)}else if(function(scp,miniForm){return miniForm?scp.child&&scp.$parent&&scp.$parent.children:scp.$parent.$parent&&scp.$parent.$parent.$parent&&scp.$parent.$parent.$parent.child&&scp.$parent.$parent.$parent.children}(scp,this.miniForm)){if(this.miniForm?(children=scp.$parent.$parent.children,root=scp.$parent.child,children||(children=scp.$parent.children,root=scp.child)):(root=("lightning"!==this.layout&&"newport"!==this.layout?scp.$parent.$parent:scp).$parent.child,children=scp.$parent.$parent.$parent.children),0<scp.children.length)if(VOUINS.isEmpty(root.response)){root.response={};for(var k=0;k<scp.children.length;k++)-1===this.noneDataControlTypeListV2.indexOf(scp.children[k].eleArray[0].type)&&(this.placeholderEleTypeList.indexOf(scp.children[k].eleArray[0].type)<0||0<=this.placeholderEleTypeList.indexOf(scp.children[k].eleArray[0].type)&&!0===scp.children[k].eleArray[0].propSetMap.dataJSON)&&(key=scp.children[k].eleArray[0].name,root.response[key]=scp.children[k].response,scp.children[k].bHasAttachment&&scp.children[k].response&&0<scp.children[k].response.length&&(root.bHasAttachment=!0)),"Filter Block"===scp.children[k].eleArray[0].type&&(scp.children[k].eleArray[0].vlcJSONPath=root.name+":"+scp.children[k].eleArray[0].name)}else-1===this.noneDataControlTypeListV2.indexOf(scp.children[tempNode].eleArray[0].type)&&(this.placeholderEleTypeList.indexOf(scp.children[tempNode].eleArray[0].type)<0||0<=this.placeholderEleTypeList.indexOf(scp.children[tempNode].eleArray[0].type)&&!0===scp.children[tempNode].eleArray[0].propSetMap.dataJSON)&&(key=scp.children[tempNode].eleArray[0].name,root.response[key]=scp.children[tempNode].response,scp.children[tempNode].bHasAttachment&&scp.children[tempNode].response&&0<scp.children[tempNode].response.length&&(root.bHasAttachment=!0));if(VOUINS.isEmpty(scp.bpTree.response)){scp.bpTree.response={};for(var m=0;m<children.length;m++)-1===this.noneDataControlTypeListV2.indexOf(children[m].type)&&(key=children[m].name,scp.bpTree.response[key]=children[m].response,children[m].bHasAttachment&&(scp.bpTree.bHasAttachment=!0))}else{if(!(key=root.name))return;tempNode={};tempNode[key]=children[root.indexInParent].response,(_.mergeWith||_.merge)(scp.bpTree.response,tempNode,VOUINS.mergeJSONLogic),children[root.indexInParent].bHasAttachment&&(scp.bpTree.bHasAttachment=!0)}}}($rootScope.tabKey||this.previewMode)&&scp.$evalAsync(function(){scp.bpTree.responseAsText=JSON.stringify(scp.bpTree.response,null,4)})},factory.handleFilterBlock=function(element){for(var filters=[],i=0;i<element.children.length;i++){var filter=element.children[i].eleArray[0].response;if(filter){var filterEle={},attributes=[];if(angular.isArray(filter))for(var j=0;j<filter.length;j++)filter[j]&&!0===filter[j].selected&&attributes.push(filter[j].name);else attributes.push(filter.name);0<attributes.length&&(filterEle.category=element.children[i].eleArray[0].propSetMap.attributeCategoryCode,filterEle.attributes=attributes,filters.push(filterEle))}}0<filters.length?element.response=filters:element.response=null},factory.handleSelect=function(reformattedResp,response,display){if("Select"===reformattedResp)return response&&response.constructor===Object?display?response.value:response.name:null;if("Multi-select"!==reformattedResp&&"Filter Multi-select"!==reformattedResp||!angular.isArray(response))return null;for(var name="",value="",reformattedResp={},ind=0;ind<response.length;ind++)response[ind].selected&&(""!==name&&(name+=";"),name+=response[ind].name,""!=value&&(value+=";"),value+=response[ind].value);return reformattedResp.name=name,reformattedResp.value=value,""===name&&(name=null),display?value:name},factory.UpdateOSAttachment=function(bodyData,attachmentId,options,callback){var deferred=$q.defer();return VOUINS.UpdateOSAttachment(bodyData,attachmentId,options,function(result,event){$rootScope.$apply(function(){event.status?deferred.resolve(result):deferred.reject(null)})}),deferred.promise},factory.CreateOSContentVersion=function(configObj){var prom=this.OmniRemoteInvokeAux(configObj,this);if(!1!==prom)return prom;var deferred=$q.defer();return VOUINS.CreateOSContentVersion(configObj.bodyData,configObj.filename,configObj.parentId,configObj.options,function(result,event){event.status?deferred.resolve(result):result?deferred.reject(result):deferred.reject({error:event.message})}),deferred.promise},factory})},{}],27:[function(require,module,exports){!function(){"use strict";angular.module("vlocity-oui-common").factory("currencySymbol",function(){return{ALL:{text:"Lek",uniDec:"76, 101, 107",uniHex:"4c, 65, 6b",decimal:",",group:".",format:"!##,###.00"},AFN:{text:"",uniDec:"1547",uniHex:"60b",decimal:"",group:"",format:"##,###.00!"},ARS:{text:"$",uniDec:"36",uniHex:"24",decimal:",",group:".",format:"!##,###.00"},AWG:{text:"",uniDec:"402",uniHex:"192",decimal:",",group:".",format:"! ##,###.00"},AUD:{text:"$",uniDec:"36",uniHex:"24",format:"!##,###.00"},AZN:{text:"",uniDec:"1084, 1072, 1085",uniHex:"43c, 430, 43d",decimal:",",group:".",format:"! ##,###.00"},BSD:{text:"$",uniDec:"36",uniHex:"24",format:"!#,###.00"},BBD:{text:"$",uniDec:"36",uniHex:"24",format:"!#,###.00"},BYR:{text:"p.",uniDec:"112, 46",uniHex:"70, 2e",decimal:",",group:" ",format:"!#,###.00"},BZD:{text:"BZ$",uniDec:"66, 90, 36",uniHex:"42, 5a, 24",format:"!#,###.00"},BMD:{text:"$",uniDec:"36",uniHex:"24",format:"!#,###.00"},BOB:{text:"$b",uniDec:"36, 98",uniHex:"24, 62",decimal:",",group:".",format:"!##,###.00"},BAM:{text:"KM",uniDec:"75, 77",uniHex:"4b, 4d",decimal:",",group:".",format:"##,###.00 !"},BWP:{text:"P",uniDec:"80",uniHex:"50",format:"!#,###.00"},BGN:{text:"",uniDec:"1083, 1074",uniHex:"43b, 432",decimal:",",group:" ",format:"##,###.00 !"},BRL:{text:"R$",uniDec:"82, 36",uniHex:"52, 24",decimal:",",group:".",format:"! ##,###.00"},BND:{text:"$",uniDec:"36",uniHex:"24",decimal:",",group:".",format:"!##,###.00"},KHR:{text:"",uniDec:"6107",uniHex:"17db",decimal:",",group:".",format:"!##,###.00"},CAD:{text:"$",uniDec:"36",uniHex:"24",format:"!#,###.00"},KYD:{text:"$",uniDec:"36",uniHex:"24",format:"!#,###.00"},CLP:{text:"$",uniDec:"36",uniHex:"24",decimal:",",group:".",format:"!##,###.00"},CNY:{text:"",uniDec:"165",uniHex:"a5",format:"! #,###.00"},COP:{text:"$",uniDec:"36",uniHex:"24",decimal:",",group:".",format:"!##,###.00"},CRC:{text:"",uniDec:"8353",uniHex:"20a1",format:"!##,###.00"},HRK:{text:"kn",uniDec:"107, 110",uniHex:"6b, 6e",decimal:",",group:".",format:"! ##,###.00"},CUP:{text:"",uniDec:"8369",uniHex:"20b1",decimal:",",group:".",format:"!##,###.00"},CZK:{text:"K",uniDec:"75, 269",uniHex:"4b, 10d",decimal:",",group:" ",format:"##,###.00 !"},DKK:{text:"kr",uniDec:"107, 114",uniHex:"6b, 72",decimal:",",group:".",format:"! ##,###.00"},DOP:{text:"RD$",uniDec:"82, 68, 36",uniHex:"52, 44, 24",format:"!##,###.00"},XCD:{text:"$",uniDec:"36",uniHex:"24",format:"!#,###.00"},EGP:{text:"",uniDec:"163",uniHex:"a3",decimal:"",group:"",format:"##,###.00 !"},SVC:{text:"$",uniDec:"36",uniHex:"24",format:"!#,###.00"},EUR:{text:"",uniDec:"8364",uniHex:"20ac",decimal:",",group:" ",format:"##,###.00 !"},FKP:{text:"",uniDec:"163",uniHex:"a3",format:"!##,###.00"},FJD:{text:"$",uniDec:"36",uniHex:"24",format:"!##,###.00"},GHS:{text:"",uniDec:"162",uniHex:"a2",format:"!#,###.00"},GIP:{text:"",uniDec:"163",uniHex:"a3",format:"!#,###.00"},GTQ:{text:"Q",uniDec:"81",uniHex:"51",format:"!#,###.00"},GYD:{text:"$",uniDec:"36",uniHex:"24",format:"!##,###.00"},HNL:{text:"L",uniDec:"76",uniHex:"4c",format:"!#,###.00"},HKD:{text:"$",uniDec:"36",uniHex:"24",format:"!#,###.00"},HUF:{text:"Ft",uniDec:"70, 116",uniHex:"46, 74",decimal:",",group:" ",format:"##,###.00 !"},ISK:{text:"kr",uniDec:"107, 114",uniHex:"6b, 72",decimal:",",group:".",format:"##,###.00 !"},INR:{text:"",uniDec:"8377",uniHex:"20B9",decimal:".",group:",",format:"!##,###.00"},IDR:{text:"Rp",uniDec:"82, 112",uniHex:"52, 70",decimal:",",group:".",format:"!##,###.00"},IRR:{text:"",uniDec:"65020",uniHex:"fdfc",decimal:"",group:"",format:"##,###.00!"},ILS:{text:"",uniDec:"8362",uniHex:"20aa",decimal:",",group:".",format:"##,###.00 !"},IQD:{text:"..",uniDec:"",uniHex:"",decimal:"",group:"",format:"##,###.00 !"},JMD:{text:"J$",uniDec:"74, 36",uniHex:"4a, 24",format:"!#,###.00"},JPY:{text:"",uniDec:"165",uniHex:"a5",format:"!#,###.00"},KZT:{text:"",uniDec:"1083, 1074",uniHex:"43b, 432",decimal:",",group:" ",format:"##,###.00!"},KPW:{text:"",uniDec:"8361",uniHex:"20a9",format:"!##,###.00"},KRW:{text:"",uniDec:"8361",uniHex:"20a9",format:"!##,###.00"},KGS:{text:"",uniDec:"1083, 1074",uniHex:"43b, 432",decimal:",",group:" ",format:"##,###.00 !"},LAK:{text:"",uniDec:"8365",uniHex:"20ad",decimal:",",group:".",format:"!##,###.00"},LBP:{text:"",uniDec:"163",uniHex:"a3",decimal:"",group:"",format:"##,###.00 !"},LRD:{text:"$",uniDec:"36",uniHex:"24",format:"!##,###.00"},MKD:{text:"",uniDec:"1076, 1077, 1085",uniHex:"434, 435, 43d",decimal:",",group:".",format:"! ##,###.00"},MYR:{text:"RM",uniDec:"82, 77",uniHex:"52, 4d",format:"!#,###.00"},MUR:{text:"Rs",uniDec:"8360",uniHex:"20a8",format:"!#,###.00"},MXN:{text:"$",uniDec:"36",uniHex:"24",format:"!#,###.00"},MZN:{text:"MT",uniDec:"77, 84",uniHex:"4d, 54",decimal:",",group:" ",format:"##,###.00 !"},NAD:{text:"$",uniDec:"36",uniHex:"24",format:"!##,###.00"},NPR:{text:"Rs",uniDec:"8360",uniHex:"20a8",format:"! #,###.00"},ANG:{text:"",uniDec:"402",uniHex:"192",format:"!#,###.00"},NZD:{text:"$",uniDec:"36",uniHex:"24",format:"!#,###.00"},NIO:{text:"C$",uniDec:"67, 36",uniHex:"43, 24",format:"!#,###.00"},NGN:{text:"",uniDec:"8358",uniHex:"20a6",format:"!#,###.00"},NOK:{text:"kr",uniDec:"107, 114",uniHex:"6b, 72",decimal:",",group:" ",format:"! ##,###.00"},OMR:{text:"",uniDec:"65020",uniHex:"fdfc",decimal:"",group:"",format:"##,###.00 !"},PKR:{text:"Rs",uniDec:"8360",uniHex:"20a8",format:"!#,###.00"},PAB:{text:"B/.",uniDec:"66, 47, 46",uniHex:"42, 2f, 2e",format:"!#,###.00"},PYG:{text:"Gs",uniDec:"71, 115",uniHex:"47, 73",decimal:",",group:".",format:"!##,###.00"},PEN:{text:"S/.",uniDec:"83, 47, 46",uniHex:"53, 2f, 2e",decimal:",",group:".",format:"!##,###.00"},PHP:{text:"",uniDec:"8369",uniHex:"20b1",format:"! ##,###.00"},PLN:{text:"z",uniDec:"122, 322",uniHex:"7a, 142",decimal:",",group:" ",format:"##,###.00 !"},QAR:{text:"",uniDec:"65020",uniHex:"fdfc",decimal:"",group:"",format:"##,###.00 !"},RON:{text:"lei",uniDec:"108, 101, 105",uniHex:"6c, 65, 69",decimal:",",group:".",format:"##,###.00 !"},RUB:{text:"",uniDec:"1088, 1091, 1073",uniHex:"440, 443, 431",decimal:",",group:" ",format:"##,###.00 !"},SHP:{text:"",uniDec:"163",uniHex:"a3",format:"!#,###.00"},SAR:{text:"",uniDec:"65020",uniHex:"fdfc",decimal:"",group:"",format:"##,###.00 !"},RSD:{text:".",uniDec:"1044, 1080, 1085, 46",uniHex:"414, 438, 43d, 2e",decimal:",",group:".",format:"! ##,###.00"},SCR:{text:"Rs",uniDec:"8360",uniHex:"20a8",format:"!##,###.00"},SGD:{text:"$",uniDec:"36",uniHex:"24",format:"!##,###.00"},SBD:{text:"$",uniDec:"36",uniHex:"24",format:"!##,###.00"},SOS:{text:"S",uniDec:"83",uniHex:"53",format:"!##,###.00"},ZAR:{text:"R",uniDec:"82",uniHex:"52",format:"!##,###.00"},LKR:{text:"Rs",uniDec:"8360",uniHex:"20a8",format:"! ##,###.00"},SEK:{text:"kr",uniDec:"107, 114",uniHex:"6b, 72",decimal:",",group:" ",format:"##,###.00 !"},CHF:{text:"CHF",uniDec:"67, 72, 70",uniHex:"43, 48, 46",decimal:".",group:"'",format:"! ##,###.00"},SRD:{text:"$",uniDec:"36",uniHex:"24",decimal:",",group:".",format:"! ##,###.00"},SYP:{text:"",uniDec:"163",uniHex:"a3",decimal:"",group:"",format:"##,###.00 !"},TWD:{text:"NT$",uniDec:"78, 84, 36",uniHex:"4e, 54, 24",format:"!##,###.00"},THB:{text:"",uniDec:"3647",uniHex:"e3f",format:"!#,###.00"},TTD:{text:"TT$",uniDec:"84, 84, 36",uniHex:"54, 54, 24",format:"!##,###.00"},TRY:{text:"",uniDec:"8378",uniHex:"20ba",group:".",decimal:",",format:"!#,###.00"},TVD:{text:"$",uniDec:"36",uniHex:"24",group:",",decimal:".",format:"!#,###.00"},UAH:{text:"",uniDec:"8372",uniHex:"20b4",group:" ",decimal:",",format:"#,###.00 !"},GBP:{text:"",uniDec:"163",uniHex:"a3",group:",",decimal:".",format:"!#,###.00"},USD:{text:"$",uniDec:"36",uniHex:"24",group:",",decimal:".",format:"!#,###.00"},UYU:{text:"$U",uniDec:"36, 85",uniHex:"24, 55",group:".",decimal:",",format:"! #,###.00"},UZS:{text:"som",uniDec:"1083, 1074",uniHex:"43b, 432",group:",",decimal:".",format:"#,###.00 !"},VEF:{text:"Bs",uniDec:"66, 115",uniHex:"42, 73",decimal:",",group:".",format:"!#,###.00"},VND:{text:"",uniDec:"8363",uniHex:"20ab",decimal:",",group:".",format:"#,###.00 !"},XOF:{text:"CFA",uniDec:"8363",uniHex:"20ab",decimal:".",group:",",format:"!#,###.00"},YER:{text:"..",uniDec:"65020",uniHex:"fdfc",decimal:".",group:",",format:"#,###.00 !"},ZWD:{text:"Z$",uniDec:"90, 36",uniHex:"5a, 24",format:"# ###.##"},AED:{text:"."},AOA:{text:"Kz"},BDT:{text:"Tk"},BHD:{text:"BD"},ETB:{text:"Br"},HTG:{text:"G"},KES:{text:"KSh"},KWD:{text:""},LYD:{text:"LD"},MGA:{text:"Ar"},MMK:{text:"K"},MNT:{text:""},MOP:{text:"MOP$"},MWK:{text:"MK"},PGK:{text:"K"},SLL:{text:"Le"},TOP:{text:"T$"},UGX:{text:"UGX"},VUV:{text:"VT"},MAD:{text:"MAD",format:"!##,###.00"}}})}()},{}],28:[function(require,module,exports){window.VOUINS=window.VOUINS||{},VOUINS.GenericInvoke=function(sClassName,sMethodName,input,options,totalLength,callback){var remoteOptions,isQueueable=JSON.parse(options);void 0!==isQueueable.customAjaxFunction?(0,window[isQueueable.customAjaxFunction])(sClassName,sMethodName,input,options,totalLength,callback):(remoteOptions={escape:!1,buffer:!1},null!=totalLength&&null!==totalLength&&3e4!==totalLength&&(remoteOptions.timeout=totalLength),null==sClassName&&(sClassName=""),null==sMethodName&&(sMethodName=""),totalLength=input.length+options.length,(!0===isQueueable.useQueueableApexRemoting||7e5<totalLength)&&"undefined"!=typeof vlocityVFActionFunctionControllerHandlers&&"function"==typeof vlocityVFActionFunctionControllerHandlers.runServerMethod?(isQueueable=!0===isQueueable.useQueueableApexRemoting,vlocityVFActionFunctionControllerHandlers.runServerMethod(sClassName,sMethodName,input,options,isQueueable,callback)):"undefined"!=typeof Visualforce?Visualforce.remoting.Manager.invokeAction(remoteActionMap.GenericInvoke2,sClassName,sMethodName,input,options,function(result,event){event.message&&!event.error&&(-1<event.message.indexOf("Input too long.")?event.error=customLabels.RequestTooLarge:event.error=event.message),callback(result,event)},remoteOptions):VOUINS.fakeAjax(callback))},VOUINS.isEmpty=function(obj){return null==obj||""===obj||obj.constructor===Object&&0===Object.keys(obj).length},VOUINS.mergeJSONLogic=function(a,b){return _.isArray(a)||_.isArray(b)||null===a||null===b?b:void 0===b?null:void 0},VOUINS.fakeAjax=function(callback){setTimeout(function(){callback({error:customLabels.OmniNoSFDCConnection},{status:!0})},0)},VOUINS.generateUUID=function(){var d=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=(d+16*Math.random())%16|0;return d=Math.floor(d/16),("x"==c?r:3&r|8).toString(16)})},VOUINS.getQueryParams=function(tmp0){tmp0=(tmp0||window.location.search).substring(1);if(!tmp0)return!1;function decode(s){return s?s=(s=(s=(s=s.replace(/\+/g," ")).replace(/%([EF][0-9A-F])%([89AB][0-9A-F])%([89AB][0-9A-F])/gi,function(code,n1,n2,n){n1=parseInt(n1,16)-224,n2=parseInt(n2,16)-128;if(0==n1&&n2<32)return code;n=(n1<<12)+(n2<<6)+(parseInt(n,16)-128);return 65535<n?code:String.fromCharCode(n)})).replace(/%([CD][0-9A-F])%([89AB][0-9A-F])/gi,function(code,n1,n2){n1=parseInt(n1,16)-192;if(n1<2)return code;n2=parseInt(n2,16)-128;return String.fromCharCode((n1<<6)+n2)})).replace(/%([0-7][0-9A-F])/gi,function(code,hex){return String.fromCharCode(parseInt(hex,16))}):""}tmp0=_.chain(tmp0.split("&")).map(function(p){p=p.split("=");if(!(p[0]&&unescape(p[0])&&0<=unescape(p[0]).toLowerCase().indexOf("</script")||decode(p[1])&&unescape(decode(p[1]))&&0<=unescape(decode(p[1])).toLowerCase().indexOf("</script")))return[p[0],decode(p[1])]});return(tmp0.fromPairs&&"function"==typeof tmp0.fromPairs?tmp0.fromPairs():tmp0.object()).value()},VOUINS.initiateForce=function(scope,force){var accessToken,instanceURL;scope.instanceHost="..",null!=sfdcVars&&null!=sfdcVars.instanceHost&&(scope.instanceHost=sfdcVars.instanceHost),window.OmniForce=force,"{!$Api.Session_ID}"===window.sessionId&&(window.customVOmniAuth&&window.customVOmniAuth.constructor===Function?window.customVOmniAuth(scope):(window.parent.VlocOmniOut&&window.parent.VlocOmniOut.force?(window.parent.VlocOmniOut.forceLocalDef&&(window.forceLocalDef=window.parent.VlocOmniOut.forceLocalDef),window.parent.VlocOmniOut.callUserInfo&&(window.callUserInfo=window.parent.VlocOmniOut.callUserInfo),instanceURL=window.parent.VlocOmniOut.force.getOAuth(),accessToken=window.parent.VlocOmniOut.force.getURLs(),instanceURL&&accessToken&&window.OmniForce.init({useProxy:accessToken.useProxy,proxyURL:accessToken.proxyURL,oauthCallbackURL:accessToken.oauthCallbackURL,accessToken:instanceURL.access_token,instanceURL:instanceURL.instance_url})):window.parent.sfdccredentials&&(accessToken=window.parent.sfdccredentials.accessToken,instanceURL=window.parent.sfdccredentials.instanceURL,accessToken&&instanceURL&&window.OmniForce.init({accessToken:accessToken,instanceURL:instanceURL,useProxy:!1})),window.OmniForce&&window.OmniForce.getOAuth()&&(scope.instanceHost=window.OmniForce.getOAuth().instance_url,scope.$root.instanceHost=window.OmniForce.getOAuth().instance_url)))},VOUINS.loadCustomHTMLJS=function(customJSCode){var customJS,htmlMarkup=null;return customJSCode.bpTree&&void 0!==customJSCode.bpTree.testTemplates&&null!==customJSCode.bpTree.testTemplates&&(htmlMarkup=customJSCode.bpTree.testTemplates),customJSCode.bpTree&&void 0!==customJSCode.bpTree.customJS&&null!==customJSCode.bpTree.customJS&&(customJS=document.createElement("SCRIPT"),customJSCode=document.createTextNode(customJSCode.bpTree.customJS),customJS.appendChild(customJSCode),document.body.appendChild(customJS)),htmlMarkup},VOUINS.loadHeaderHTML=function(scope,compile){for(var headerMarkup="",headerScripts=window.document.head.getElementsByTagName("script"),length=headerScripts.length,i=0;i<length;i++)"text/ng-template"==headerScripts[i].getAttribute("type")&&(headerMarkup+=headerScripts[i].outerHTML);""!=headerMarkup&&compile(headerMarkup)},VOUINS.getTopBPDom=function(scp){return(scp.miniForm?document.getElementById(scp.bpTree.sOmniScriptId):document)||document},VOUINS.isDigit=function(s){return/[\d()+]/.test(s)},VOUINS.isRepeatNotation=function(parseFlds){if(null!=parseFlds){parseFlds=parseFlds.match(/[|]( *)[n]/g);if(parseFlds&&0<parseFlds.length)return!0}return!1},VOUINS.getFilesMap=function(filesMap,bSforce,filesString){if(filesMap){if(bSforce&&filesString.connection){var filesString=angular.toJson(filesMap),filesMapReduced={};if(1e6<filesString.length){filesMapReduced={};return angular.forEach(filesMap,function(value,fileKey){filesMapReduced[fileKey]=fileKey}),filesMapReduced}return filesMap}return filesMap}return{}},VOUINS.syncFileAttachmentData=function(response,block,rootScp,qSrv,scp,filesMap,injSrc,winSrv){var deferred=qSrv.defer();return block?rootScp.loading=!0:scp&&scp.bpTree&&(scp.bpTree.savingAttachments=!0),setTimeout(function(){var allAttachmentPromises,onSyncComplete;(onSyncComplete=response?response.fileAttachmentSyncData:onSyncComplete)?(allAttachmentPromises=[],angular.forEach(onSyncComplete,function(attachmentId,fileMapKey){rootScp.isSforce&&filesMap&&filesMap[fileMapKey]&&"string"==typeof filesMap[fileMapKey]&&allAttachmentPromises.push(injSrc.UpdateOSAttachment(filesMap[fileMapKey].substr(filesMap[fileMapKey].indexOf(",")+1),attachmentId,{ContentType:filesMap[fileMapKey].substring(5,filesMap[fileMapKey].indexOf(";"))}))}),onSyncComplete=function(results){console.log("results",results),block?rootScp.loading=!1:scp&&scp.bpTree&&(scp.bpTree.savingAttachments=!1),results||winSrv.alert(customLabels.OmniScriptSavingAttachmentsFailed),deferred.resolve({status:!0})},qSrv.all(allAttachmentPromises).then(onSyncComplete,onSyncComplete)):(block?rootScp.loading=!1:scp.bpTree.savingAttachments=!1,deferred.resolve({status:!0}))}),deferred.promise},VOUINS.UpdateOSAttachment=function(bodyData,attachmentId,options,callback){sforce.connection.sessionId=window.sessionId;var attachmentSObj=new sforce.SObject("Attachment");attachmentSObj.Id=attachmentId,attachmentSObj.Body=bodyData,options.ContentType&&(attachmentSObj.ContentType=options.ContentType),sforce.connection.update([attachmentSObj],{onSuccess:function(result){callback&&callback(attachmentId,{status:result[0].getBoolean("success")})},onFailure:function(result){callback&&callback(attachmentId,{status:!1})}})},VOUINS.propShortNameMap={previousLabel:"ompl",nextLabel:"omnl",cancelLabel:"omcl",saveLabel:"omsl",completeLabel:"omcoml",summaryLabel:"omsul",submitLabel:"omsubl",reviseLabel:"omrl",failureNextLabel:"omfnl",failureAbortLabel:"omfal",failureGoBackLabel:"omfgbl",redirectNextLabel:"omrnl",redirectPreviousLabel:"omrpl",consoleTabLabel:"omctl",newItemLabel:"omnil",newLabel:"omnewl",editLabel:"omel",deleteLabel:"omdl",cancelMessage:"omcm",saveMessage:"omsm",completeMessage:"omcomm",inProgressMessage:"omipm",postMessage:"ompm",failureAbortMessage:"omfam",buttonLabel:"ombl",checkLabel:"omckl","messages|n:text":"omtl","persistentComponent|n:label":"ompcl","options|n:value":"omov","radioLabels|n:value":"omrlv",instructionKey:"omik",labelKey:"omlk",textKey:"omtk",subLabel:"omsbl",remoteConfirmMsg:"omrcm","errorMessage:custom|n:message":"omermc","errorMessage:default":"omerd",ptrnErrText:"ompet",helpText:"omht"},VOUINS.updatePropJSON=function(propInput,labelMsg,labelKeyMap){var tokenList=labelMsg.split(":"),propToUpdate=VOUINS.getPropToUpdate(propInput,tokenList);if(propToUpdate){var node=tokenList[tokenList.length-1];if(angular.isArray(propToUpdate))for(var j=0;j<propToUpdate.length;j++)void 0===propToUpdate[j][VOUINS.propShortNameMap[labelMsg]]&&(propToUpdate[j][VOUINS.propShortNameMap[labelMsg]]=propToUpdate[j][node]),!propToUpdate[j][VOUINS.propShortNameMap[labelMsg]]&&customLabels.hasOwnProperty("Omni"+labelMsg)?propToUpdate[j][node]=customLabels["Omni"+labelMsg]:propToUpdate[j][node]=labelKeyMap[propToUpdate[j][VOUINS.propShortNameMap[labelMsg]]];else void 0===propToUpdate[VOUINS.propShortNameMap[labelMsg]]&&(propToUpdate[VOUINS.propShortNameMap[labelMsg]]=propToUpdate[node]),!propToUpdate[VOUINS.propShortNameMap[labelMsg]]&&customLabels.hasOwnProperty("Omni"+labelMsg)?propToUpdate[node]=customLabels["Omni"+labelMsg]:propToUpdate[node]=labelKeyMap[propToUpdate[VOUINS.propShortNameMap[labelMsg]]]}},VOUINS.handleMultiLangLabel=function(control,labelKeyMap,scriptHd){if(control){if(0<=VOUINS.picklistEleList.indexOf(control.type)&&("Custom"===control.propSetMap.optionSource.type||"SObject"===control.propSetMap.optionSource.type))return;var labelMsgList=VOUINS.ootbLabelMap[control.type];if(labelMsgList=0<=VOUINS.actionEleTypesBase.indexOf(control.type)&&!0===control.propSetMap.confirm?labelMsgList.concat(VOUINS.ootbLabelMap2):labelMsgList)for(var i=0;i<labelMsgList.length;i++)labelMsgList[i].indexOf(":")<0&&labelMsgList[i].indexOf("|")<0?(void 0===control.propSetMap[VOUINS.propShortNameMap[labelMsgList[i]]]&&(control.propSetMap[VOUINS.propShortNameMap[labelMsgList[i]]]=control.propSetMap[labelMsgList[i]]),!control.propSetMap[VOUINS.propShortNameMap[labelMsgList[i]]]&&customLabels.hasOwnProperty("Omni"+labelMsgList[i])?control.propSetMap[labelMsgList[i]]=customLabels["Omni"+labelMsgList[i]]:control.propSetMap[labelMsgList[i]]=labelKeyMap[control.propSetMap[VOUINS.propShortNameMap[labelMsgList[i]]]]):VOUINS.updatePropJSON(control.propSetMap,labelMsgList[i],labelKeyMap)}if(scriptHd)for(labelMsgList=VOUINS.ootbLabelMap.Script,i=0;i<labelMsgList.length;i++)VOUINS.updatePropJSON(scriptHd,labelMsgList[i],labelKeyMap)},VOUINS.pickListSeeding=function(rootScope,bpSrc,configObj){if(void 0===bpSrc.bPLSeeding&&(!(bpSrc.bPLSeeding=!1)!==configObj.propSetMap.rtpSeed&&!bpSrc.bMultiLang||(bpSrc.bPLSeeding=!0)),!1!==bpSrc.bPLSeeding){if(Object.getOwnPropertyNames(configObj.sobjPL).length<=0&&Object.getOwnPropertyNames(configObj.cusPL).length<=0&&Object.getOwnPropertyNames(configObj.depSOPL)<=0&&Object.getOwnPropertyNames(configObj.depCusPL)<=0)return rootScope.VlocPicklistSeeding={},void(rootScope.seedingDone=!0);configObj={sobjPL:Object.keys(configObj.sobjPL).join(),cusPL:Object.keys(configObj.cusPL).join(),depSOPL:Object.keys(configObj.depSOPL).join(),depCusPL:Object.keys(configObj.depCusPL).join(),LanguageCode:bpSrc.LanguageCode},configObj={sClassName:bpSrc.sNSC+"DefaultFetchPicklistOptionsImpl",sMethodName:"OmniScriptPicklistSeed",input:angular.toJson(configObj),options:"{}",iTimeout:null,label:{label:"PicklistSeeding",stage:"PicklistSeeding"}};bpSrc.OmniRemoteInvoke(configObj).then(function(remoteResp){remoteResp=angular.fromJson(remoteResp);remoteResp&&remoteResp.VlocPicklistSeeding?rootScope.VlocPicklistSeeding=angular.fromJson(remoteResp.VlocPicklistSeeding):rootScope.VlocPicklistSeeding={},rootScope.seedingDone=!0,console.log("seeding")},function(error){rootScope.seedingFailed=!0,rootScope.VlocPicklistSeeding={},console.log("Picklist seeding failed "+scope.child.eleArray[0].name)})}},VOUINS.CreateOSContentVersion=function(bodyData,filename,parentId,input,callback){var className=JSON.parse(input);void 0!==className.customAjaxFunction?(0,window[className.customAjaxFunction])(bodyData,parentId,filename,input,callback):"undefined"!=typeof Visualforce?5e7<bodyData.length?callback({error:customLabels.OmniMaxFileSize},{status:!1}):"undefined"!=typeof sforce&&sforce.connection&&2e6<bodyData.length?VOUINS.CreateOSContentVersionSOAP(bodyData,filename,function(result){(result="string"==typeof result?JSON.parse(result):result).contentVersionId?VOUINS.CreateOSContentVersionCallback(result.contentVersionId,parentId,callback):callback(result,{status:!1})}):7e5<bodyData.length&&"undefined"!=typeof vlocityVFActionFunctionControllerHandlers&&"function"==typeof vlocityVFActionFunctionControllerHandlers.runServerMethod?(className="BusinessProcessDisplayController.BusinessProcessDisplayControllerOpen",""!=sfdcVars.sNS&&(className=sfdcVars.sNS+"."+className),input=angular.toJson({bodyData:bodyData,filename:filename,parentId:parentId}),vlocityVFActionFunctionControllerHandlers.runServerMethod(className,"CreateOSContentVersion",input,"{}",!1,function(result,event){(result="string"==typeof(result=result||event)?JSON.parse(result):result).contentDocumentId?callback(result,{status:!0}):(result.error||(result.error=customLabels.UploadFailed),callback(result,{status:!1}))})):Visualforce.remoting.Manager.invokeAction(remoteActionMap.CreateOSContentVersion,bodyData,filename,parentId,callback,{escape:!1,buffer:!1}):VOUINS.fakeAjax(callback)},VOUINS.CreateOSContentVersionSOAP=function(bodyData,filename,callback){sforce.connection.sessionId=window.sessionId;var attachmentSObj=new sforce.SObject("ContentVersion");attachmentSObj.VersionData=bodyData,attachmentSObj.Title=filename,attachmentSObj.PathOnClient=filename,sfdcVars.communitiesNetworkId&&(attachmentSObj.NetworkId=sfdcVars.communitiesNetworkId),sforce.connection.create([attachmentSObj],{onSuccess:function(result){callback&&callback({contentVersionId:result[0].id},{status:result[0].getBoolean("success")})},onFailure:function(result){callback&&callback({error:result.faultstring},{status:!1})}})},VOUINS.CreateOSContentVersionCallback=function(contentVersionId,parentId,callback){Visualforce.remoting.Manager.invokeAction(remoteActionMap.ContentVersionAddLink,contentVersionId,parentId,function(result){"string"==typeof result&&(result=angular.fromJson(result)),callback(result,{status:!0})},{escape:!1,buffer:!1})},VOUINS.ClearData=function(scope){scope.bpTree=null,scope.omniInput=null,scope.child={},scope.children=[],scope.submitted=!1,scope.actionStatus={},scope.isFormValid=!0},VOUINS.resetOptions=function(control,newOpt){if("Multi-select"!==control.type)control.propSetMap.options=newOpt;else{var existingOptMap={};if(angular.isArray(control.propSetMap.options))for(var i=0;i<control.propSetMap.options.length;i++)!0===control.propSetMap.options[i].selected&&(existingOptMap[control.propSetMap.options[i].name]="");if(angular.isArray(newOpt)&&0<Object.getOwnPropertyNames(existingOptMap).length)for(i=0;i<newOpt.length;i++)existingOptMap.hasOwnProperty(newOpt[i].name)&&(newOpt[i].selected=!0);control.propSetMap.options=newOpt}},VOUINS.handleEditBlockLabel=function(children,labelKeyMap,labelMap){for(var i=0;i<children.length;i++)for(var j=0;j<children[i].eleArray.length;j++)children[i].eleArray[j].propSetMap.disOnTplt&&(children[i].eleArray[j].propSetMap.label=labelKeyMap[labelMap[children[i].eleArray[j].name]])}},{}],29:[function(require,module,exports){window.VOUINS=window.VOUINS||{},VOUINS.ootbLabelMap={Step:["previousLabel","nextLabel","cancelLabel","saveLabel","completeLabel","cancelMessage","saveMessage","completeMessage","instructionKey","chartLabel","errorMessage:custom|n:message","errorMessage:default"],"Text Block":["textKey"],Headline:["labelKey"],Submit:["summaryLabel","submitLabel","reviseLabel","errorMessage:custom|n:message","errorMessage:default"],"DataRaptor Extract Action":["failureNextLabel","failureAbortLabel","failureGoBackLabel","redirectNextLabel","redirectPreviousLabel","inProgressMessage","failureAbortMessage","postMessage","errorMessage:custom|n:message","errorMessage:default"],"Remote Action":["failureNextLabel","failureAbortLabel","failureGoBackLabel","redirectNextLabel","redirectPreviousLabel","inProgressMessage","failureAbortMessage","postMessage","errorMessage:custom|n:message","errorMessage:default"],"Rest Action":["failureNextLabel","failureAbortLabel","failureGoBackLabel","redirectNextLabel","redirectPreviousLabel","inProgressMessage","failureAbortMessage","postMessage","errorMessage:custom|n:message","errorMessage:default"],"DataRaptor Post Action":["failureNextLabel","failureAbortLabel","failureGoBackLabel","redirectNextLabel","redirectPreviousLabel","inProgressMessage","failureAbortMessage","postMessage","errorMessage:custom|n:message","errorMessage:default"],"Post to Object Action":["failureNextLabel","failureAbortLabel","failureGoBackLabel","redirectNextLabel","redirectPreviousLabel","inProgressMessage","failureAbortMessage","postMessage","errorMessage:custom|n:message","errorMessage:default"],"Done Action":["consoleTabLabel","errorMessage:custom|n:message","errorMessage:default"],"Review Action":["nextLabel","previousLabel","errorMessage:custom|n:message","errorMessage:default"],"Filter Block":["buttonLabel"],"Calculation Action":["failureNextLabel","failureAbortLabel","failureGoBackLabel","redirectNextLabel","redirectPreviousLabel","inProgressMessage","failureAbortMessage","postMessage","errorMessage:custom|n:message","errorMessage:default"],"PDF Action":["failureNextLabel","failureAbortLabel","failureGoBackLabel","redirectNextLabel","redirectPreviousLabel","inProgressMessage","failureAbortMessage","postMessage","errorMessage:custom|n:message","errorMessage:default"],"DocuSign Envelope Action":["failureNextLabel","failureAbortLabel","failureGoBackLabel","redirectNextLabel","redirectPreviousLabel","inProgressMessage","failureAbortMessage","postMessage","errorMessage:custom|n:message","errorMessage:default"],"DocuSign Signature Action":["failureNextLabel","failureAbortLabel","failureGoBackLabel","inProgressMessage","failureAbortMessage","postMessage","errorMessage:custom|n:message","errorMessage:default"],"Type Ahead":["helpText"],"Email Action":["failureNextLabel","failureAbortLabel","failureGoBackLabel","redirectNextLabel","redirectPreviousLabel","inProgressMessage","failureAbortMessage","postMessage","errorMessage:custom|n:message","errorMessage:default"],"DataRaptor Transform Action":["failureNextLabel","failureAbortLabel","failureGoBackLabel","redirectNextLabel","redirectPreviousLabel","inProgressMessage","failureAbortMessage","postMessage","errorMessage:custom|n:message","errorMessage:default"],"Matrix Action":["failureNextLabel","failureAbortLabel","failureGoBackLabel","redirectNextLabel","redirectPreviousLabel","inProgressMessage","failureAbortMessage","postMessage","errorMessage:custom|n:message","errorMessage:default"],"Integration Procedure Action":["failureNextLabel","failureAbortLabel","failureGoBackLabel","redirectNextLabel","redirectPreviousLabel","inProgressMessage","failureAbortMessage","postMessage","errorMessage:custom|n:message","errorMessage:default"],"Edit Block":["newLabel","editLabel","deleteLabel"],"Delete Action":["failureNextLabel","failureAbortLabel","failureGoBackLabel","redirectNextLabel","redirectPreviousLabel","inProgressMessage","failureAbortMessage","postMessage","remoteConfirmMsg","cancelLabel","subLabel"],Validation:["messages|n:text"],Checkbox:["checkLabel","helpText"],Email:["ptrnErrText","helpText"],Number:["ptrnErrText","helpText"],Password:["ptrnErrText","helpText"],Telephone:["ptrnErrText","helpText"],Text:["ptrnErrText","helpText"],"Text Area":["ptrnErrText","helpText"],URL:["ptrnErrText","helpText"],Disclosure:["checkLabel","textKey"],Script:["persistentComponent|n:label","consoleTabLabel","errorMessage:custom|n:message"],Radio:["options|n:value","helpText"],Select:["options|n:value","helpText"],"Multi-select":["options|n:value","helpText"],"Radio Group":["options|n:value","radioLabels|n:value","helpText"],File:["errorMessage:custom|n:message","errorMessage:default","helpText"],Image:["errorMessage:custom|n:message","errorMessage:default","helpText"],Lookup:["errorMessage:custom|n:message","errorMessage:default","helpText"],Currency:["helpText"],Date:["helpText"],"Date/Time (Local)":["helpText"],Time:["helpText"],Range:["helpText"]},VOUINS.ootbLabelMap2=["subLabel","remoteConfirmMsg","cancelLabel"],VOUINS.actionEleTypesBase=["Remote Action","Rest Action","DataRaptor Extract Action","DataRaptor Post Action","Post to Object Action","Review Action","Done Action","Calculation Action","PDF Action","Set Values","Set Errors","DocuSign Envelope Action","DocuSign Signature Action","Email Action","DataRaptor Transform Action","Matrix Action","Integration Procedure Action"],VOUINS.actionEleTypes=VOUINS.actionEleTypesBase.concat(["Delete Action"]),VOUINS.picklistEleList=["Select","Multi-select","Radio"],VOUINS.getPropToUpdate=function(prop,tokenList){"use strict";for(var ind=0;ind<tokenList.length-1;ind++){0<=tokenList[ind].indexOf("|n")&&(tokenList[ind]=tokenList[ind].slice(0,tokenList[ind].length-2));var buildupArray=[];if(!prop)return null;if(Array.isArray(prop)){for(var j=0;j<prop.length;j++)if(prop[j]=prop[j][tokenList[ind]],Array.isArray(prop[j]))for(var k=0;k<prop[j].length;k++)buildupArray.push(prop[j][k])}else if(prop=prop&&prop[tokenList[ind]],Array.isArray(prop))for(var l=0;l<prop.length;l++)buildupArray.push(prop[l]);0<buildupArray.length&&(prop=buildupArray)}return prop},VOUINS.createPropPaths=function(prop,pathStr){"use strict";var pathList=[];if("string"!=typeof pathStr)return pathList;pathStr=(pathStr=pathStr.replace(/[|]n/g,"|\\d")).replace(/[|]/g,"[|]");var pathStrRegex=new RegExp("^"+pathStr+"$"),flatten=function(prop,path){if(!prop)return path;for(var pathFlat,keys=Object.keys(prop),i=0;i<keys.length;i++)"object"==typeof prop[keys[i]]?(pathFlat=Array.isArray(prop[keys[i]])?"|":":",flatten(prop[keys[i]],path+keys[i]+pathFlat)):(pathFlat=path+keys[i],pathStrRegex.test(pathFlat)&&pathList.push(pathFlat))};return flatten(prop,""),pathList}},{}],30:[function(require,module,exports){!function(){"use strict";angular.module("vlocity-omni-out").directive("img",["$q",function($q){return{restrict:"E",link:function(scope,element,attrs){scope.$root;var sString=attrs.src||attrs.ngSrc;sString&&(scope.instanceHost||(scope.instanceHost=scope.$root.instanceHost||null),scope.instanceHost&&setTimeout(function(){attrs.$set("src",sString.replace("..",scope.instanceHost))}))}}}])}()},{}],31:[function(require,module,exports){!function(){"use strict";angular.module("vlocity-omni-out").directive("vlcSldsOpen",function(bpService){var opInConsole=function(url,instance){url=instance+(url="/articles/"+url.aType+"/"+url.urlName);window.open(url,"_blank")};return{restrict:"A",isOmniOut:!0,link:function(scope,element,attrs){function listener(){opInConsole(scope.i,scope.instanceHost)}element.on("click",listener),scope.$on("destroy",function(){element.off("click",listener)})}}})}()},{}],32:[function(s,module,exports){!function(){"use strict";angular.module("vlocity-omni-out",[])}(),s("./directives/vlcSldsImage.js"),s("./directives/vlcSldsOmniOutOpen.js"),s("./run/cordovaKeyboardHandler.js");s=navigator.userAgent;-1==s.indexOf("Salesforce")||-1==s.indexOf("iPhone")&&-1==s.indexOf("iPad")||-1!=s.indexOf("Safari")||((s=document.createElement("style")).innerHTML="html,html body{overflow:scroll;-webkit-overflow-scrolling:touch;zindex:0;}body{position:absolute;left:0;right:0;top:0;bottom:0;}",document.getElementsByTagName("head")[0].appendChild(s))},{"./directives/vlcSldsImage.js":30,"./directives/vlcSldsOmniOutOpen.js":31,"./run/cordovaKeyboardHandler.js":33}],33:[function(require,module,exports){!function(){"use strict";angular.module("vlocity-omni-out").run(function(){var list,isNative=/(ip[ao]d|iphone|android)/gi.test(window.navigator.userAgent);("createTouch"in window.document||"ontouchstart"in window.document)&&isNative&&(list={"Type Ahead":1,Lookup:1},window.addEventListener("click",function(evt){if("input"===evt.target.nodeName.toLowerCase())try{(angular.element(evt.target).scope().control.type||angular.element(evt.target).scope().$parent.control.type)in list&&evt.target.scrollIntoView()}catch(e){}}))})}()},{}],34:[function(require,module,exports){var escape=document.createElement("textarea");exports.escapeHTML=function(html){return escape.innerHTML=html,escape.innerHTML},exports.unescapeHTML=function(html){return escape.innerHTML=html,escape.value}},{}],35:[function(require,module,exports){"function"!=typeof Object.assign&&(Object.assign=function(target,varArgs){"use strict";if(null==target)throw new TypeError("Cannot convert undefined or null to object");for(var to=Object(target),index=1;index<arguments.length;index++){var nextSource=arguments[index];if(null!=nextSource)for(var nextKey in nextSource)Object.prototype.hasOwnProperty.call(nextSource,nextKey)&&(to[nextKey]=nextSource[nextKey])}return to})},{}]},{},[1])}();
//# sourceMappingURL=VlocityChatBotJS.min.js.map